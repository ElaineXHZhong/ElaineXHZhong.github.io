<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[13-Nodemailer]]></title>
    <url>%2F2019%2F04%2F22%2Fnodejs-13-Nodemailer%2F</url>
    <content type="text"><![CDATA[13-nodemailerå®žçŽ°é‚®ç®±çš„å‘é€ã€æ¿€æ´»ã€æ³¨å†Œ nodemailer æ˜¯ä¸€ä¸ªç®€å•æ˜“ç”¨çš„Node.jsé‚®ä»¶å‘é€æ’ä»¶. å®˜ç½‘åœ°å€:https://nodemailer.com. Githubåœ°å€:https://github.com/nodemailer/nodemailer. ðŸ˜Šè¿™æ¬¡æ•™ç¨‹ï¼Œæˆ‘ä»¬ä½¿ç”¨nodemailerè¿™ä¸ªæ’ä»¶æ¥æ”¶å‘é‚®ä»¶ï¼Œè¿™ä¸ªåŠŸèƒ½éžå¸¸å¸¸è§ï¼Œå½“æˆ‘ä»¬æ³¨å†Œä¸€ä¸ªè´¦å·æ—¶ï¼Œè‚¯å®šä¼šæœ‰è¿™æ­¥. ä¸ºäº†å®žçŽ°è¿™ä¸ªåŠŸèƒ½ï¼Œä½ é¦–å…ˆè¦æœ‰ä¸€ä¸ªé‚®ç®±ï¼Œç”±äºŽéœ€è¦ä½¿ç”¨SMTPæ–¹å¼å‘é€ï¼Œä½ è¿˜éœ€è¦å¼€å¯ç›¸å…³åŠŸèƒ½ï¼ˆåœ¨é‚®ç®±é‡ŒåŽ»è®¾ç½®ï¼‰. ä¸€ã€æ€è·¯ï¼š 1. å®‰è£…ä½¿ç”¨ 1npm install nodemailer --save 2. å‘å‡ºçœŸå®žçš„é‚®ä»¶ å› ä¸ºQQé‚®ç®±ç”³è¯·åŽéœ€è¦10å¤šå¤©æ‰å¯ä»¥åŽ»è®¾ç½®smtpðŸ˜ï¼Œæ‰€ä»¥è¿™æ¬¡æˆ‘ä»¬ä½¿ç”¨163é‚®ç®±æ¥åšæµ‹è¯•. 1234567891011121314151617181920212223242526const nodemailer = require('nodemailer'); // å‘é€é‚®ä»¶çš„nodeæ’ä»¶let transporter = nodemailer.createTransport(&#123; service: '163', // å‘é€è€…çš„é‚®ç®±åŽ‚å•† secureConnection: true, // SSLå®‰å…¨é“¾æŽ¥ auth: &#123; // å‘é€è€…çš„è´¦æˆ·å¯†ç  user: 'your163mail', // è´¦æˆ· pass: 'smtpCode', // smtpæŽˆæƒç ï¼Œåˆ°é‚®ç®±è®¾ç½®ä¸‹èŽ·å– &#125; &#125;);let mailOptions = &#123; from: '"name" &lt;your163mail&gt;', // å‘é€è€…æ˜µç§°å’Œåœ°å€ to: 'your163mail', // æŽ¥æ”¶è€…çš„é‚®ç®±åœ°å€ subject: 'è¯·åœ¨24å°æ—¶å†…æ¿€æ´»ä½ çš„Virtual Bankè´¦å·', // é‚®ä»¶ä¸»é¢˜ text: 'è¿™é‡Œæ˜¯textæ–‡æœ¬:ç‚¹å‡»æ¿€æ´»&lt;a href="http://localhost:3000/checkCode?name='+ usermess.name +'&amp;code='+ usermess.code + '"', // é‚®ä»¶çš„text // html: html //ä¹Ÿå¯ä»¥ç”¨htmlå‘é€ &#125;; // ç”¨å·²ç»å®šä¹‰å¥½çš„transportå¯¹è±¡æ¥å‘é€é‚®ä»¶transporter.sendMail(mailOptions, (error, info) =&gt; &#123; if (error) &#123; return console.log(error); &#125; console.log('é‚®ä»¶å‘é€æˆåŠŸ IDï¼š', info.messageId);&#125;); çŽ°åœ¨é‚®ä»¶å·²ç»é€šè¿‡æˆ‘ä»¬çš„ä»£ç å‘é€æˆåŠŸï¼Œä½†æ˜¯é‚®ä»¶å†…å®¹åªæœ‰textï¼Œè¿˜ä¸å¤Ÿæ²¡ç¾Žè§‚ï¼Œæ‰€ä»¥æŽ¥ä¸‹æ¥æˆ‘ä»¬åªéœ€è¦å¯¹ä¸Šé¢çš„ä»£ç åšä¸€äº›å°å°çš„æ”¹è¿›ï¼Œå°±å¯ä»¥ç¾ŽåŒ–é‚®ä»¶çš„å†…å®¹ï¼ŒåšæˆHTML. nodemailer.js 1234567891011121314151617181920212223242526const nodemailer = require('nodemailer'); // å¼•å…¥å‘é€é‚®ä»¶çš„nodeæ’ä»¶//åˆ›å»ºä¸€ä¸ªSMTPå®¢æˆ·ç«¯å¯¹è±¡ï¼ˆé‡Œé¢æ˜¯SMTPå®¢æˆ·ç«¯çš„é…ç½®ï¼‰let transporter = nodemailer.createTransport(&#123; service: '163', // å‘é€è€…çš„é‚®ç®±åŽ‚å•† secureConnection: true, // SSLå®‰å…¨é“¾æŽ¥ auth: &#123; // å‘é€è€…çš„è´¦æˆ·å¯†ç  user: 'your163mail', // è´¦æˆ· pass: 'smtpCode', // smtpæŽˆæƒç ï¼Œåˆ°é‚®ç®±è®¾ç½®ä¸‹èŽ·å– &#125; &#125;);let mailOptions = &#123; from: '"name" &lt;your163mail&gt;', // å‘é€è€…æ˜µç§°å’Œåœ°å€ to: 'your163mail', // æŽ¥æ”¶è€…çš„é‚®ç®±åœ°å€ subject: 'è¯·åœ¨24å°æ—¶å†…æ¿€æ´»ä½ çš„Virtual Bankè´¦å·', // é‚®ä»¶ä¸»é¢˜ html: fs.createReadStream(path.resolve(__dirname),'virtual_bank.html'); // æµ &#125;; // ç”¨å·²ç»å®šä¹‰å¥½çš„transportå¯¹è±¡æ¥å‘é€é‚®ä»¶transporter.sendMail(mailOptions, (error, info) =&gt; &#123; if (error) &#123; return console.log(error); &#125; console.log('é‚®ä»¶å‘é€æˆåŠŸ IDï¼š', info.messageId);&#125;); virtual_bank.html (è¿™é‡Œåªç»™å‡ºæ¡†æž¶ï¼Œè‡ªå·±å‘æŒ¥æƒ³è±¡ç©ºé—´åŽ»åˆ›ä½œ) 123456789&lt;!doctype html&gt;&lt;html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office"&gt; &lt;head&gt; &lt;script&gt;...&lt;/script&gt; &lt;/head&gt; &lt;body&gt; ... &lt;/body&gt;&lt;/html&gt; 3. å®žçŽ°é‚®ç®±çš„éªŒè¯ åœ¨ç”¨æˆ·æ³¨å†Œæ—¶ï¼Œæˆ‘ä»¬å…ˆä¿å­˜ç”¨æˆ·çš„ä¿¡æ¯(ç”¨æˆ·åå’ŒåŠ å¯†åŽçš„å¯†ç )ï¼Œç„¶åŽç”Ÿæˆæ¿€æ´»ç (é€šè¿‡usernameï¼Œemailï¼Œå½“å‰æ—¶é—´ç­‰æ•°æ®èžåˆåŽåŠ å¯†)ä¸€å¹¶ä¿å­˜ï¼ŒåŒæ—¶å°†æ¿€æ´»ç å‘é€è‡³ç”¨æˆ·é‚®ç®±. åœ¨è‡ªå·±å®šä¹‰çš„æ•°æ®åº“ä¸­éœ€è¦åŠ ä¸‰ä¸ªå­—æ®µï¼šæ¿€æ´»ç  ã€è¿‡æœŸæ—¶é—´(ç”¨æ¥éªŒè¯æ¿€æ´»é‚®ä»¶æ˜¯å¦è¿‡æœŸ)ã€æ˜¯å¦å·²æ¿€æ´» (ç”¨äºŽåœ¨æ¿€æ´»æ—¶è¿›è¡Œåˆ¤æ–­). 12345&#123; activeCode:String, //æ¿€æ´»ç ï¼Œæ ¼å¼è‡ªå·±å®šä¹‰ codeExptime:Number, //è¿‡æœŸæ—¥æœŸï¼Œè¿‡æœŸåŽä¸èƒ½æ¿€æ´» activeState:Boolean //åˆ¤æ–­æ˜¯å¦æ¿€æ´»ï¼ˆ0:æœªæ¿€æ´»ï¼Œ1ï¼šæ¿€æ´»æˆåŠŸï¼‰&#125; ï¼ˆ1ï¼‰æ¿€æ´»ç :ç”¨crypto(nodejsçš„æ ¸å¿ƒæ¨¡å—)æ¥ç”Ÿæˆï¼Œå¹¶ä¿è¯æ¿€æ´»ç ä¸ä¼šé‡å¤ï¼› ï¼ˆ2ï¼‰è¿‡æœŸæ—¶é—´ï¼šè®¾ä¸º24å°æ—¶ï¼ŒDate.now() + 24 * 3600 * 1000ï¼› ï¼ˆ3ï¼‰æ•°æ®åº“ç»“æž„è®¾è®¡: ç”¨æˆ·å¡«å†™èµ„æ–™ï¼Œç‚¹å‡»æ³¨å†Œï¼Œæ’å…¥æ•°æ®æˆåŠŸï¼Œstateå­—æ®µé»˜è®¤æ˜¯0ï¼ŒåŒæ—¶ç”Ÿæˆä¸€ä¸ªactiveCode(ç”¨ä¼ è¿‡æ¥çš„é‚®ç®±ã€ç”¨æˆ·åå’Œå½“å‰æ—¶é—´åŠ å¯†å½¢æˆ)ä¹Ÿå­˜å…¥æ•°æ®åº“. å‘é€æ¿€æ´»é‚®ä»¶ï¼Œæç¤ºç”¨æˆ·ç™»å½•é‚®ç®±æ¿€æ´»ï¼Œé‚®ç®±ä¸­å¸¦æœ‰ä¸€ä¸ªæ¿€æ´»æˆåŠŸé¡µçš„URLï¼ŒURLé‡Œæœ‰ä¸¤ä¸ªå‚æ•°ï¼ˆç”¨æˆ·åå’Œæ¿€æ´»ç ï¼‰. 123456let mailOptions = &#123; from: '"name" &lt;your163mail&gt;', // å‘é€è€…æ˜µç§°å’Œåœ°å€ to: 'your163mail', // æŽ¥æ”¶è€…çš„é‚®ç®±åœ°å€ subject: 'æ¿€æ´»ä½ çš„Virtual Bankè´¦å·', // é‚®ä»¶ä¸»é¢˜ html: fs.createReadStream(path.resolve(__dirname),'virtual_bank.html'); // æµ &#125;; å“åº”æ¿€æ´»è¯·æ±‚ï¼šç”¨æˆ·ç™»å½•è‡ªå·±çš„é‚®ç®±ï¼Œç‚¹å‡»é“¾æŽ¥ï¼Œæ¥åˆ°å¤„ç†æ¿€æ´»ä¸šåŠ¡é€»è¾‘çš„é¡µé¢æˆ–Servletï¼Œå¾—åˆ°URLä¸­çš„ä¸¤ä¸ªå‚æ•°ï¼Œä»¥è¿™ä¸¤ä¸ªå‚æ•°ä¸ºæ¡ä»¶æŸ¥è¯¢æ•°æ®åº“é‡Œçš„æ•°æ®. å¦‚æžœæœ‰ï¼Œå–å½“å‰æ—¶é—´å’Œä¹‹å‰å­˜å…¥æ•°æ®åº“çš„æ¿€æ´»ç è¿‡æœŸæ—¶é—´codeExptimeä½œæ¯”è¾ƒï¼Œçœ‹æ˜¯å¦è¿‡æœŸï¼Œå¦‚æžœè¿‡æœŸé…’åˆ é™¤æ•°æ®åº“ä¸­çš„è¯¥è®°å½•å¹¶è½¬åˆ°å¤±è´¥é¡µé¢ï¼Œå¦‚æžœæ²¡æœ‰è¿‡æœŸå°±æŸ¥çœ‹é“¾æŽ¥ä¼ è¿‡æ¥çš„æ¿€æ´»ç ä¸Žæ•°æ®åº“å­—æ®µæ¿€æ´»ç æ˜¯å¦ä¸€è‡´ï¼Œä¸ä¸€è‡´å°±åŒæ ·åˆ é™¤æ•°æ®åº“ä¸­è¯¥æ¡è®°å½•å¹¶è·³è½¬åˆ°æ¿€æ´»å¤±è´¥é¡µé¢ï¼Œä¸€è‡´åˆ™å°†stateå­—æ®µè®¾ä¸º1 ï¼Œæ¿€æ´»æˆåŠŸï¼Œè·³è½¬åˆ°æ¿€æ´»æˆåŠŸé¡µ. ï¼ˆ1ï¼‰æ ¹æ®æ¿€æ´»é“¾æŽ¥ä¸­çš„æ¿€æ´»ç æŸ¥æ‰¾å¯¹åº”çš„ç”¨æˆ·ï¼› ï¼ˆ2ï¼‰ç”¨æˆ·åä¸Žæ•°æ®åº“æ˜¯å¦åŒ¹é…(è‹¥åŒ¹é…)â€“&gt;åˆ¤æ–­æ¿€æ´»ç æ˜¯å¦åŒ¹é…(è‹¥åŒ¹é…)â€“&gt;å¹¶åˆ¤æ–­æ¿€æ´»ç æ˜¯å¦è¿‡æœŸ(æœªè¿‡æœŸ)â€“&gt;æ”¹å˜æ¿€æ´»çŠ¶æ€:ä»Ž0å˜ä¸º1ï¼Œæ¿€æ´»æˆåŠŸï¼› 1234&#123; title: 'æ¿€æ´»æˆåŠŸ', content:'å·²æˆåŠŸæ¿€æ´»ï¼Œè¯·å‰å¾€&lt;a href="/account/signup"&gt;ç™»å½•&lt;/a&gt;'&#125; ï¼ˆ3ï¼‰æ¿€æ´»æ—¶é—´ &gt; å½“å‰æ—¶é—´ï¼Œæ¿€æ´»ç æ— æ•ˆï¼›å…¶ä»–ä»»ä½•ä¸åŒ¹é…ï¼Œæ¿€æ´»å¤±æ•ˆï¼› 1234&#123; title: 'æ¿€æ´»å¤±è´¥', content:'æ‚¨çš„æ¿€æ´»é“¾æŽ¥æ— æ•ˆï¼Œè¯·é‡æ–°&lt;a href="/account/signup"&gt;æ³¨å†Œ&lt;/a&gt;'&#125; äºŒã€å…·ä½“å®žçŽ°ä»£ç  é¦–å…ˆï¼Œå‡†å¤‡ä¸€ä¸ªç®€å•çš„æµ‹è¯•é¡µé¢. test.html 123456789101112131415&lt;body&gt; &lt;div id="main" style="margin:0 auto;width:500px;"&gt; &lt;form id="reg" action="user.action?op=reg" method="post"&gt; &lt;p&gt; E-mailï¼š&lt;input type="text" class="input" name="email" id="email"&gt; &lt;/p&gt; &lt;p&gt; å¯† ç ï¼š&lt;input type="password" class="input" name="pwd" id="pwd"&gt; &lt;/p&gt; &lt;p&gt; &lt;input type="submit" class="btn" value="æäº¤æ³¨å†Œ" &gt; &lt;/p&gt; &lt;/form&gt; &lt;/div&gt;&lt;/body&gt; ç‚¹å‡»æäº¤æ³¨å†Œï¼Œæ¥åˆ°user.action?op=regï¼Œæ³¨æ„å¸¦çš„å‚æ•°opæŒ‡æˆ‘è¦åšçš„æ“ä½œï¼Œç”¨äºŽåŽé¢çš„Servletåšåˆ¤æ–­è¯¥åšä»€ä¹ˆæ“ä½œï¼Œä¸‹é¢çš„ä»£ç å®Œæˆäº†å½¢æˆæ¿€æ´»ç ã€è¿‡æœŸæ—¶é—´ç­‰è¡¨ç¤ºå½“å‰æ³¨å†Œç”¨æˆ·çš„çŠ¶æ€çš„ä¿¡æ¯å­˜å…¥æ•°æ®åº“å¹¶å‘é€é‚®ä»¶çš„è¿‡ç¨‹ã€‚ ä¸ºäº†æ–¹ä¾¿ï¼ŒNode.js ä¸­ä½¿ç”¨ node-uuid åº“æ¥ç”Ÿæˆ UUIDï¼Œç®€å•åœ°åˆ›å»ºéšæœºè€Œä¸”ä¸é‡å¤çš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥ç”¨æ¥ä¸€æ¬¡ç”Ÿæˆå¾ˆå¤šä¸åŒçš„æ¿€æ´»ç . 1234567891011121314151617181920212223242526272829303132333435363738394041424344//code.jsvar uuid = require('node-uuid');function getCode(number) &#123; var codes = []; for (var i=0; i &lt; number; i++) &#123; codes.push(uuid.v4()); &#125; return codes&#125;exports.getCode = getCode;//code_insert.jsvar mysql = require('mysql');var code = require('./code.js'); var codes = code.getCode(200); // ç”Ÿæˆ200ä¸ªä¸åŒçš„æ¿€æ´»ç var conn = mysql.createConnection(&#123; host: 'localhost', user: 'test0002', password: 'test0002', database: 'test0002'&#125;);conn.connect(function(err)&#123; if (err) &#123; console.error(err); return; &#125;&#125;);var sql_create_table = 'create table if not exists code(id smallint auto_increment, code char(20), primary key(id))';conn.query(sql_create_table,function(err,res)&#123; if(err)&#123; console.log(err); return; &#125; for (var i=0;i&lt;codes.length;i++)&#123; var sql_insert_code = "insert into code values('code','" + codes[i] + "')"; conn.query(sql_insert_code,function(err,res)&#123; if(err)&#123; console.log(err); return; &#125; console.log(res); &#125;); &#125;&#125;);]]></content>
      <categories>
        <category>node.js</category>
      </categories>
      <tags>
        <tag>node.js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[work-summary-2019-4-9.md]]></title>
    <url>%2F2019%2F04%2F22%2Fwork-summary-2019-4-9-md%2F</url>
    <content type="text"><![CDATA[2019-4-9å·¥ä½œæ€»ç»“ ä¸€ã€Mysqlæ•°æ®åº“ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149//é€šé…ç¬¦ï¼š%mysql&gt; show databases like &apos;virt%&apos;;mysql&gt; show tables like &apos;user%&apos;;mysql&gt; show variables like &apos;character_set%&apos;;+--------------------------+--------------------------+| Variable_name | Value |+--------------------------+--------------------------+| character_set_client | utf8 || character_set_connection | utf8 || character_set_database | utf8 |å½“å‰é»˜è®¤æ•°æ®åº“çš„ç¼–ç | character_set_filesystem | binary || character_set_results | utf8 || character_set_server | utf8 |æœåŠ¡å™¨çš„ç¼–ç ï¼šmy.ini| character_set_system | utf8 |æ ‡è¯†ç¬¦çš„ç¼–ç | character_sets_dir | C:\MySQL\share\charsets\ |+--------------------------+--------------------------+//åˆ é™¤è¡¨ï¼šdrop table table_namedrop table user;drop table if exists user;//é‡å‘½åè¡¨: rename table table_name01 to table_name02rename table user to user01,test to test01;//è·¨æ•°æ®åº“é‡å‘½å(å‰ªåˆ‡): rename table table_name01 to `database_name`.table_name02rename table user to `test01`.user01;//ä¿®æ”¹åˆ—çš„å®šä¹‰ï¼š(1)å¢žåŠ åˆ—ï¼šadd alter table user01 add age int(11);(2)ä¿®æ”¹åˆ—ï¼šmodify alter table user01 modify age varchar(40);(3)åˆ é™¤åˆ—ï¼šdrop alter table user01 drop age;(4)é‡å‘½ååˆ—ï¼šchange alter table user01 change age age01 blob;ä¿®æ”¹è¡¨ç»“æž„ï¼Œä¸Šé¢æ˜¯å­å‘½ä»¤ï¼Œä¸Šçº§å‘½ä»¤æ˜¯ï¼š alter table table_name//è¡¨é€‰é¡¹ï¼š show create table user01;å…ˆåˆ†æžéœ€è¦ä¿å­˜çš„å®žä½“æ•°æ®æ‹¥æœ‰å“ªäº›å±žæ€§ï¼Œè¿™äº›å±žæ€§åº”è¯¥å¦‚ä½•ä¿å­˜ã€‚//ä¿®æ”¹è¡¨é€‰é¡¹ï¼š alter table table_name æ–°çš„è¡¨é€‰é¡¹alter table user01 character set utf8;//ä¿®æ”¹æ•°æ®åº“ä¿¡æ¯ï¼š alter database database_name ä¿®æ”¹æŒ‡ä»¤alter database test01 character set gbk;//åˆ›å»ºæ•°æ®(æ’å…¥æ•°æ®)ï¼šinsert into table_name (å­—æ®µåˆ—è¡¨) values (å€¼åˆ—è¡¨)å¯ä»¥çœç•¥å­—æ®µåˆ—è¡¨ï¼Œä½†è¦æ±‚æ˜¯å€¼çš„é¡ºåºåº”è¯¥ä¸Žè¡¨ä¸­çš„å­—æ®µé¡ºåºä¸€è‡´ã€‚insert into user(id,email) values(1,&apos;test@163.com&apos;);//èŽ·å¾—æ•°æ®ï¼šselect å­—æ®µåˆ—è¡¨ from è¡¨å æŸ¥è¯¢æ¡ä»¶å­—æ®µåˆ—è¡¨å¯ä»¥ç”¨*ä»£æ›¿ï¼Œè¡¨ç¤ºæ‰€æœ‰çš„å­—æ®µï¼›æŸ¥è¯¢æ¡ä»¶å¯ä»¥çœç•¥ï¼Œè¡¨ç¤ºæ‰€æœ‰çš„è®°å½•éƒ½èŽ·å¾—ã€‚select * from user where id&gt;=72;//åˆ é™¤æ•°æ®(ä¸å¯é€†)ï¼šdelete from è¡¨å æ¡ä»¶åˆ é™¤éœ€è¦åœ¨é€»è¾‘ä¸Šä¸¥æ ¼ç»™æ¡ä»¶ï¼Œå¦åˆ™å®¹æ˜“é€ æˆæ•°æ®è¯¯æ“ä½œã€‚delete from user where id&lt;=72;//æ ¡å¯¹è§„åˆ™ï¼š gbk_chinese_ci(ä¸åŒºåˆ†å¤§å°å†™)ï¼› gbk_bin(æŒ‰ASCç æŽ’åº)ï¼›show collation;show collation like &apos;gbk%&apos;;//èŽ·å¾—æ•°æ®æ—¶æŒ‰ç…§æŸä¸ªå­—æ®µæŽ’åºï¼šselect * from user order by name;//åˆ—ç±»åž‹ï¼š(1)æ•°å€¼åž‹ï¼šA. æ•´æ•°åž‹ï¼ša. tinyint å­—èŠ‚1 æœ€å°å€¼ï¼š-128/0 æœ€å¤§å€¼ï¼š127/255b. smallint å­—èŠ‚2 æœ€å°å€¼ï¼š-32768/0 æœ€å¤§å€¼ï¼š32767/65535c. mediumint å­—èŠ‚3 æœ€å°å€¼ï¼š-8388608/0 æœ€å¤§å€¼ï¼š8388607/16777215d. int å­—èŠ‚4 æœ€å°å€¼ï¼š-2147483648/0 æœ€å¤§å€¼ï¼š2147483647/4294967295e. bigint å­—èŠ‚8 æœ€å°å€¼ï¼š-9223372036854775808/0 æœ€å¤§å€¼ï¼š...å­—èŠ‚è¶Šå°ï¼Œèƒ½å­˜å‚¨çš„ç©ºé—´è¶Šå°ï¼›å­—èŠ‚è¶Šå°ï¼Œå¤„ç†çš„é€Ÿåº¦è¶Šå¿«unsigned æŽ§åˆ¶æ˜¯å¦æœ‰æ­£è´Ÿï¼› zerofill å‰å¯¼é›¶å¡«å……ï¼› boolå¸ƒå°”ç±»åž‹æ˜¯ tinyint(1)çš„åˆ«åcreate table test(a tinyint unsigned,b tinyint);alter table test add c tinyint(2) zerofill; (01,09 ...)B. å°æ•°åž‹ï¼ša. float(å•ç²¾åº¦) å­—èŠ‚4 é»˜è®¤æƒ…å†µï¼Œç²¾åº¦ä½æ•°ä¸º6ä½å·¦å³b. double(åŒç²¾åº¦) å­—èŠ‚8 é»˜è®¤æƒ…å†µï¼Œç²¾åº¦ä½æ•°ä¸º16ä½å·¦å³c. decimal å˜é•¿ï¼ˆå¤§æ¦‚æ¯9ä¸ªæ•°å­—ç”¨4å­—èŠ‚å­˜å‚¨ï¼Œæ•´æ•°å’Œåˆ†æ•°åˆ†å¼€è®¡ç®—ï¼‰ decimal(10,2)123.456 0.123456*10^3 123456 3å¯ä»¥åˆ©ç”¨M,DæŽ§åˆ¶æ•°å€¼èŒƒå›´ï¼›å¯ä»¥æ— ç¬¦å·ï¼›å¯ä»¥zerofillï¼›å¯ä»¥ç”¨ç§‘å­¦è®¡æ•°æ³•create table test(a float,b double); ç²¾åº¦ä¸¢å¤±ï¼ˆ7ä¸ªå·¦å³åŽå°±ä¸å‡†ç¡®ï¼‰ 16ä½æœ‰æ•ˆinsert into test values (123456789.0123456789,123456789.0123456789)Type(M,D):Mè¡¨ç¤º(æ€»ä½æ•°)æ‰€æœ‰çš„æ•°å€¼ä½æ•°(ä¸åŒ…æ‹¬å°æ•°ç‚¹å’Œç¬¦å·)ï¼ŒDè¡¨ç¤ºå…è®¸çš„å°æ•°ä½æ•°create table test(a float(5,2), ä¸€å…±5ä½ï¼Œå°æ•°2ä½ï¼Œå°æ•°å‰é¢åªèƒ½æœ‰3ä½ï¼ˆæ‰€ä»¥æœ€å¤§åªèƒ½è¡¨ç¤º999)b double(8,3));insert into test (a) values (0.23E3);float(5,2)è¡¨ç¤º-999.99åˆ° 999.99æ³¨æ„ï¼š float(2)æ˜¯æ˜¾ç¤ºå®½åº¦ï¼›float(5,2)æ˜¯æ•°å€¼èŒƒå›´(2)æ—¥æœŸæ—¶é—´åž‹ï¼ša. yearb. timestampc. timed. datee. datetime(3)å­—ç¬¦ä¸²åž‹ï¼ša. setb. enumc. blobd. texte. varchar å¯å˜é•¿ varchar(M)è¡¨ç¤ºå…è®¸çš„æœ€å¤§é•¿åº¦(å¯å˜é•¿åº¦)f. char æœ€å¤§é•¿åº¦255 char(M)è¡¨ç¤ºå…è®¸çš„å­—ç¬¦ä¸²é•¿åº¦(ä¸¥æ ¼é™åˆ¶é•¿åº¦)//æ—¥æœŸäº‹ä»¶ç±»åž‹(1)DATETIME: YYYY-MM-DD HH:MM:SS å­˜å‚¨ç©ºé—´8 é›¶å€¼ä¸º 0000-00-00 00:00:00å–å€¼ä»Žâ€˜1000-01-01 00:00:00â€™åˆ°&apos;9999-12-31 23:59:59&apos;create table test(elaine datetime);insert into test values (&apos;2013-04-16 11:50:21&apos;);(2)TIMESTAMP: YYYY-MM-DD HH:MM:SS å­˜å‚¨ç©ºé—´4 é›¶å€¼ä¸º 0000-00-00 00:00:00å–å€¼ä»Ž&apos;1970-01-01 00:00:00&apos;åˆ°&apos;2038-01-19 03:14:07&apos;create table test(elaine timestamp);insert into test values (&apos;2013-04-16 11:50:21&apos;);(3)DATE: YYYY-MM-DD å­˜å‚¨ç©ºé—´3 é›¶å€¼ä¸º 0000-00-00å–å€¼ä»Ž&apos;1000-01-01&apos;åˆ°&apos;9999-12-31&apos;(4)TIME: HH:MM:SS å­˜å‚¨ç©ºé—´3 é›¶å€¼ä¸º 00:00:00å–å€¼ä»Ž&apos;-838:59:59&apos;åˆ°&apos;838:59:59&apos;æ„ä¹‰ï¼šä¸€å¤©ä¸­çš„æ—¶é—´ï¼›è¡¨ç¤ºæ—¶é—´é—´éš”ï¼Œåœ¨è¡¨ç¤ºé—´éš”æ—¶å¯ä»¥ç”¨å¤©æ¥è¡¨ç¤º D HH:MM:SS create table test(elaine time);insert into test values (&apos;23:12:11&apos;);insert into test values (&apos;231211&apos;);insert into test values (&apos;5 12:34:11&apos;);(5)YEAR: YYYY å­˜å‚¨ç©ºé—´1 é›¶å€¼ä¸º0000å–å€¼ä»Ž&apos;1901&apos;åˆ°&apos;2155&apos; æ“ä½œè¯­å¥ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465mysql&gt; select host,user from user where user=&apos;root&apos;;+-----------+------+| host | user |+-----------+------+| localhost | root |+-----------+------+mysql&gt; select version();+-----------+| version() |+-----------+| 5.7.25 |+-----------+mysql&gt; status--------------mysql Ver 14.14 Distrib 5.7.25, for Win64 (x86_64)Connection id: 23Current database: mysqlCurrent user: root@localhostSSL: Not in useUsing delimiter: ;Server version: 5.7.25 MySQL Community Server (GPL)Protocol version: 10Connection: localhost via TCP/IPServer characterset: utf8Db characterset: utf8Client characterset: utf8Conn. characterset: utf8TCP port: 3306Uptime: 6 days 14 hours 52 min 16 secThreads: 1 Questions: 155 Slow queries: 0 Opens: 146 Flush tables: 1 Open tables: 115 Queries per second avg: 0.000--------------æ‰§è¡Œ FLUSH PRIVILEGES è¯­å¥ã€‚ è¿™ä¸ªå‘½ä»¤æ‰§è¡ŒåŽä¼šé‡æ–°è½½å…¥æŽˆæƒè¡¨ã€‚mysql&gt; use user;Database changedmysql&gt; show columns from user02;+-----------+--------------+------+-----+-------------------+----------------+| Field | Type | Null | Key | Default | Extra |+-----------+--------------+------+-----+-------------------+----------------+| id | int(11) | NO | PRI | NULL | auto_increment || email | varchar(255) | YES | | NULL | || password | varchar(255) | YES | | NULL | || createdAt | timestamp | YES | | CURRENT_TIMESTAMP | || image | varchar(255) | YES | | NULL | || audio | varchar(255) | YES | | NULL | |+-----------+--------------+------+-----+-------------------+----------------+mysql&gt; show index from user02;+--------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+| Table | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment | Index_comment |+--------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+| user02 | 0 | PRIMARY | 1 | id | A | 1 | NULL | NULL | | BTREE | | |+--------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+mysql&gt; show table status from virtual_bank;+--------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+---------------------+------------+-----------------+----------+----------------+---------+| Name | Engine | Version | Row_format | Rows | Avg_row_length | Data_length | Max_data_length | Index_length | Data_free | Auto_increment | Create_time | Update_time | Check_time | Collation | Checksum | Create_options | Comment |+--------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+---------------------+------------+-----------------+----------+----------------+---------+| audios | InnoDB | 10 | Dynamic | 0 | 0 | 16384 | 0 | 0 | 0 | 1 | 2019-04-08 10:20:15 | NULL | NULL | utf8_general_ci | NULL | | || images | InnoDB | 10 | Dynamic | 2 | 8192 | 16384 | 0 | 0 | 0 | 3 | 2019-04-08 10:20:15 | 2019-04-08 12:03:56 | NULL | utf8_general_ci | NULL | | || user | InnoDB | 10 | Dynamic | 0 | 0 | 16384 | 0 | 0 | 0 | 1 | 2019-04-08 10:09:56 | NULL | NULL | utf8_general_ci | NULL | | |+--------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+---------------------+------------+-----------------+----------+----------------+---------+ ç´¢å¼•ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108mysql&gt; use test;Database changed//å»ºè¡¨æµ‹è¯•ï¼šæµ‹è¯•è¡¨ä¸­æœ‰äº”ä¸ªåˆ—(c1,c2,c3,c4,c5)ï¼Œå‡ä¸ºchar(1)ç±»åž‹ä¸”ä¸ä¸ºç©ºã€‚å­—ç¬¦é›†ä¸ºutf8(ç´¢å¼•é•¿åº¦ä»¥å­—èŠ‚æ•°è®¡ç®—)mysql&gt; create table tb_test( -&gt; c1 char(1) not null, -&gt; c2 char(1) not null, -&gt; c3 char(1) not null, -&gt; c4 char(1) not null, -&gt; c5 char(1) not null) -&gt; engine innodb charset utf8; mysql&gt; show tables;+----------------+| Tables_in_test |+----------------+| tb_test |+----------------+//åˆ›å»ºå¤åˆç´¢å¼•mysql&gt; alter table tb_test add index idx_c1_c2_c3_c4(c1,c2,c3,c4);Query OK, 0 rows affected (0.02 sec)Records: 0 Duplicates: 0 Warnings: 0//æ’å…¥å‡ æ¡æµ‹è¯•æ•°æ®mysql&gt; insert into tb_test(c1,c2,c3,c4,c5) -&gt; values(&apos;A&apos;,&apos;A&apos;,&apos;A&apos;,&apos;A&apos;,&apos;A&apos;),(&apos;B&apos;,&apos;B&apos;,&apos;B&apos;,&apos;B&apos;,&apos;B&apos;),(&apos;C&apos;,&apos;C&apos;,&apos;C&apos;,&apos;C&apos;,&apos;C&apos;);Query OK, 3 rows affected (0.01 sec)Records: 3 Duplicates: 0 Warnings: 0mysql&gt; select * from tb_test;+----+----+----+----+----+| c1 | c2 | c3 | c4 | c5 |+----+----+----+----+----+| A | A | A | A | A || B | B | B | B | B || C | C | C | C | C |+----+----+----+----+----+3 rows in set (0.00 sec)//ç”¨åˆ°äº†ç´¢å¼•çš„æ‰€æœ‰éƒ¨åˆ†ï¼Œå…¶ä¸­c1,c2,c3ç²¾ç¡®åŒ¹é…ï¼Œc4èŒƒå›´æŸ¥è¯¢ï¼šmysql&gt; explain select * from tb_test where c1=&apos;A&apos; and c2=&apos;A&apos; and c3=&apos;A&apos; and c4&gt;&apos;A&apos;\G*************************** 1. row *************************** id: 1 select_type: SIMPLE table: tb_test partitions: NULL type: range //èŒƒå›´æŸ¥è¯¢possible_keys: idx_c1_c2_c3_c4 key: idx_c1_c2_c3_c4 //ç”¨åˆ°å¤åˆç´¢å¼• key_len: 12 //ç”¨åˆ°äº†ç´¢å¼•çš„æ‰€æœ‰åˆ—ï¼Œæ¯ä¸ªutf8å­—ç¬¦å 3ä¸ªå­—èŠ‚ ref: NULL rows: 1 filtered: 100.00 Extra: Using index condition //æ„å‘³ç€æ²¡æœ‰è¾¾åˆ°ç´¢å¼•è¦†ç›–1 row in set, 1 warning (0.01 sec)//å‡ºçŽ°ICPä¸»è¦æ˜¯å› ä¸ºæˆ‘ä»¬ç”¨äº†select *ã€‚æˆ‘ä»¬æŠŠSQLç¨å¾®æ”¹åŠ¨ä¸€ä¸‹ï¼Œè®©å®ƒèƒ½è¾¾åˆ°ç´¢å¼•è¦†ç›–mysql&gt; explain select c1,c2,c3,c4 from tb_test where c1=&apos;A&apos; and c2=&apos;A&apos; and c4&gt;&apos;A&apos; and c3=&apos;A&apos;\G*************************** 1. row *************************** id: 1 select_type: SIMPLE table: tb_test partitions: NULL type: rangepossible_keys: idx_c1_c2_c3_c4 key: idx_c1_c2_c3_c4 key_len: 12 ref: NULL rows: 1 filtered: 100.00 Extra: Using where; Using index1 row in set, 1 warning (0.00 sec)//ç”¨åˆ°äº†ç´¢å¼•çš„c1,c2,c3åˆ—ï¼Œå…¶ä¸­c1ã€c2åˆ—ç”¨äºŽæŸ¥è¯¢ï¼Œc3ç”¨äºŽæŽ’åºã€‚ç”±äºŽc3åˆ—æ²¡æœ‰ç²¾ç¡®åŒ¹é…ï¼Œå¯¼è‡´c4åˆ—æ— æ³•ç”¨åˆ°ç´¢å¼•ã€‚mysql&gt; explain select * from tb_test where c1=&apos;A&apos; and c2=&apos;A&apos; and c4=&apos;A&apos; order by c3\G*************************** 1. row *************************** id: 1 select_type: SIMPLE table: tb_test partitions: NULL type: ref //ä»Žè¡¨ä¸­è¯»å–åŒ¹é…ç´¢å¼•çš„è¡Œï¼ˆæŸ¥è¯¢è¯­å¥ä¸èƒ½é€šè¿‡ç´¢å¼•æŸ¥æ‰¾åˆ°å•ç‹¬ä¸€è¡Œæ•°æ®ï¼‰ //type: eq_ref å°±æ˜¯ä½¿ç”¨äº†primary keyæˆ–unique keyçš„æŸ¥è¯¢ï¼Œå¯ä»¥æŸ¥åˆ°è¡¨ä¸­å”¯ä¸€ä¸€æ¡è®°å½•possible_keys: idx_c1_c2_c3_c4 key: idx_c1_c2_c3_c4 //ç”¨åˆ°å¤åˆç´¢å¼• key_len: 6 //ç”¨åˆ°ç´¢å¼•çš„å‰ä¸¤åˆ— ref: const,const rows: 1 filtered: 33.33 Extra: Using index condition1 row in set, 1 warning (0.01 sec)//group byå­å¥æ‰§è¡Œæ—¶ä¼šå…ˆæŽ’åºï¼Œå†åˆ†ç»„ã€‚è¿™æ¡è¯­å¥ç”±äºŽgroup byçš„é¡ºåºä¸ºc3,c2ä¸Žç´¢å¼•é¡ºåºä¸åŒ¹é…ï¼Œæ‰€ä»¥æ²¡ç”¨åˆ°ç´¢å¼•ã€‚group byæ²¡æœ‰ç”¨åˆ°ç´¢å¼•ï¼Œå¯¼è‡´åˆ›å»ºäº†ä¸´æ—¶è¡¨ï¼Œå¹¶ä½¿ç”¨æ–‡ä»¶æŽ’åºmysql&gt; explain select c2,c3 from tb_test where c1=&apos;A&apos; and c4=&apos;A&apos; group by c3,c2\G*************************** 1. row *************************** id: 1 select_type: SIMPLE table: tb_test partitions: NULL type: refpossible_keys: idx_c1_c2_c3_c4 key: idx_c1_c2_c3_c4 //ç”¨åˆ°å¤åˆç´¢å¼• key_len: 3 //åªç”¨åˆ°ç´¢å¼•çš„ä¸€åˆ— ref: const rows: 1 filtered: 33.33 Extra: Using where; Using index; Using temporary; Using filesort1 row in set, 1 warning (0.01 sec) mysqlå®žä¾‹ï¼š ä¸€ã€ä½¿ç”¨MySQLå‘½ä»¤è¡Œå°†MySQLç¤ºä¾‹æ•°æ®åº“å¯¼å…¥åˆ°MySQLæ•°æ®åº“æœåŠ¡å™¨ä¸­ ç¤ºä¾‹æ•°æ®åº“ä¸‹è½½åœ°å€ï¼šhttp://www.yiibai.com/downloads/yiibaidb.zip 1234567891011121314151617181920212223242526272829303132333435363738394041// 1.åˆ›å»ºæ•°æ®åº“mysql&gt; create database if not exists yiibaidb default charset utf8 collate utf8_general_ci;Query OK, 1 row affected (0.00 sec)// 2.å¯¼å…¥æ•°æ®mysql&gt; use yiibaidb;Database changedmysql&gt; source C:\MySQL\yiibaidb\yiibaidb.sql// 3.æµ‹è¯•å¯¼å…¥ç»“æžœmysql&gt; use yiibaidb;Database changedmysql&gt; show tables;+--------------------+| Tables_in_yiibaidb |+--------------------+| customers || employees || items || offices || orderdetails || orders || payments || productlines || products || tokens |+--------------------+10 rows in set (0.00 sec)mysql&gt; select city,phone,country from offices;+---------------+------------------+-----------+| city | phone | country |+---------------+------------------+-----------+| San Francisco | +1 650 219 4782 | USA || Boston | +1 215 837 0825 | USA || NYC | +1 212 555 3000 | USA || Paris | +33 14 723 4404 | France || Beijing | +86 33 224 5000 | China || Sydney | +61 2 9264 2451 | Australia || London | +44 20 7877 2041 | UK |+---------------+------------------+-----------+7 rows in set (0.00 sec) äºŒã€mysqlç¤ºä¾‹æ•°æ®åº“ç»“æž„ MySQLç¤ºä¾‹æ•°æ®åº“æ¨¡å¼ç”±ä»¥ä¸‹è¡¨ç»„æˆï¼š customers: å­˜å‚¨å®¢æˆ·çš„æ•°æ®ã€‚ products: å­˜å‚¨æ±½è½¦çš„æ•°æ®ã€‚ productLines: å­˜å‚¨äº§å“ç±»åˆ«æ•°æ®ã€‚ orders: å­˜å‚¨å®¢æˆ·è®¢è´­çš„é”€å”®è®¢å•ã€‚ orderDetails: å­˜å‚¨æ¯ä¸ªé”€å”®è®¢å•çš„è®¢å•äº§å“æ•°æ®é¡¹ã€‚ payments: å­˜å‚¨å®¢æˆ·è®¢å•çš„ä»˜æ¬¾æ•°æ®ä¿¡æ¯ã€‚ employees: å­˜å‚¨æ‰€æœ‰å‘˜å·¥ä¿¡æ¯ä»¥åŠç»„ç»‡ç»“æž„ï¼Œä¾‹å¦‚ï¼Œç›´æŽ¥ä¸Šçº§(è°å‘è°æŠ¥å‘Šå·¥ä½œ)ã€‚ offices: å­˜å‚¨é”€å”®å¤„æ•°æ®ï¼Œç±»ä¼¼äºŽå„ä¸ªåˆ†å…¬å¸ã€‚ è¡¨ä¸Žè¡¨ä¹‹é—´çš„å…³ç³»ï¼Œè¯·å‚è€ƒä»¥ä¸‹ERå›¾ï¼š ä¸‰ã€mysqlåŸºç¡€æ•™ç¨‹ 1ã€æŸ¥è¯¢æ•°æ® select è¯­å¥ select distinct è¯­å¥ ï¼ˆ1ï¼‰select è¯­å¥ SELECTè¯­å¥çš„ç»“æžœç§°ä¸ºç»“æžœé›†ï¼Œå®ƒæ˜¯è¡Œåˆ—è¡¨ã€‚ 1mysql&gt; select * from employees; employeesè¡¨çš„ç»“æž„ï¼šå®ƒæœ‰8åˆ—ï¼šå‘˜å·¥äººæ•°ï¼Œå§“æ°ï¼Œåå­—ï¼Œåˆ†æœºï¼Œç”µå­é‚®ä»¶ï¼ŒåŠžå…¬å®¤ä»£ç ï¼ŒæŠ¥å‘Šï¼ŒèŒä½ç­‰ã€‚ SELECTè¯­å¥æŽ§åˆ¶è¦æŸ¥çœ‹å“ªäº›åˆ—å’Œè¡Œã€‚ä¾‹å¦‚ï¼Œå¦‚æžœåªå¯¹æ‰€æœ‰å‘˜å·¥çš„åå­—ï¼Œå§“æ°å’ŒèŒä½æ„Ÿå…´è¶£ï¼Œæˆ–è€…æ‚¨åªæƒ³æŸ¥çœ‹å…¶èŒä½æ˜¯é”€å”®ä»£è¡¨çš„æ¯ä½å‘˜å·¥çš„ä¿¡æ¯ï¼š 12345678select column_1,column_2,... from table_1 [inner | left | right | join table_2 on conditions]where conditionsgroup by column_1having group_conditionsorder by column_1limit offset,length; SELECTè¯­å¥ç”±ä»¥ä¸‹åˆ—è¡¨ä¸­æ‰€è¿°çš„å‡ ä¸ªå­å¥ç»„æˆï¼š SELECTä¹‹åŽæ˜¯é€—å·åˆ†éš”åˆ—æˆ–æ˜Ÿå·(*)çš„åˆ—è¡¨ï¼Œè¡¨ç¤ºè¦è¿”å›žæ‰€æœ‰åˆ—ã€‚ FROMæŒ‡å®šè¦æŸ¥è¯¢æ•°æ®çš„è¡¨æˆ–è§†å›¾ã€‚ JOINæ ¹æ®æŸäº›è¿žæŽ¥æ¡ä»¶ä»Žå…¶ä»–è¡¨ä¸­èŽ·å–æ•°æ®ã€‚ WHEREè¿‡æ»¤ç»“æžœé›†ä¸­çš„è¡Œã€‚ GROUP BYå°†ä¸€ç»„è¡Œç»„åˆæˆå°åˆ†ç»„ï¼Œå¹¶å¯¹æ¯ä¸ªå°åˆ†ç»„åº”ç”¨èšåˆå‡½æ•°ã€‚ HAVINGè¿‡æ»¤å™¨åŸºäºŽGROUP BYå­å¥å®šä¹‰çš„å°åˆ†ç»„ã€‚ ORDER BYæŒ‡å®šç”¨äºŽæŽ’åºçš„åˆ—çš„åˆ—è¡¨ã€‚ LIMITé™åˆ¶è¿”å›žè¡Œçš„æ•°é‡ã€‚ è¯­å¥ä¸­çš„SELECTå’ŒFROMè¯­å¥æ˜¯å¿…é¡»çš„ï¼Œå…¶ä»–éƒ¨åˆ†æ˜¯å¯é€‰çš„ã€‚ select è¯­å¥ç¤ºä¾‹ï¼š 1select lastname,firstname,jobtitle from employees; ä½¿ç”¨æ˜Ÿå·(*)å¯èƒ½ä¼šè¿”å›žä¸ä½¿ç”¨çš„åˆ—çš„æ•°æ®ã€‚ å®ƒåœ¨MySQLæ•°æ®åº“æœåŠ¡å™¨å’Œåº”ç”¨ç¨‹åºä¹‹é—´äº§ç”Ÿä¸å¿…è¦çš„I/Oç£ç›˜å’Œç½‘ç»œæµé‡ã€‚ å¦‚æžœæ˜Žç¡®æŒ‡å®šåˆ—ï¼Œåˆ™ç»“æžœé›†æ›´å¯é¢„æµ‹å¹¶ä¸”æ›´æ˜“äºŽç®¡ç†ã€‚ ä½¿ç”¨æ˜Ÿå·(*)å¯èƒ½ä¼šå°†æ•æ„Ÿä¿¡æ¯æš´éœ²ç»™æœªç»æŽˆæƒçš„ç”¨æˆ·ã€‚ ï¼ˆ2ï¼‰select distinct è¯­å¥ ä»Žè¡¨ä¸­æŸ¥è¯¢æ•°æ®æ—¶ï¼Œå¯èƒ½ä¼šæ”¶åˆ°é‡å¤çš„è¡Œè®°å½•ã€‚ä¸ºäº†åˆ é™¤è¿™äº›é‡å¤è¡Œï¼Œå¯ä»¥åœ¨SELECTè¯­å¥ä¸­ä½¿ç”¨DISTINCTå­å¥ã€‚ 123select distinct columnsfrom table_namewhere where_conditions; ç¤ºä¾‹ï¼š ä½¿ç”¨DISTINCTå­å¥ä»Žemployeesè¡¨ä¸­é€‰æ‹©å‘˜å·¥çš„å”¯ä¸€å§“æ°(lastName)ï¼š 12345// 1.ä½¿ç”¨SELECTè¯­å¥ä»Žemployeesè¡¨ä¸­æŸ¥è¯¢å‘˜å·¥çš„å§“æ°(lastName),æœ‰å¥½äº›ç»“æžœæ˜¯é‡å¤çš„mysql&gt; select lastname from employees order by lastname;// 2.è¦åˆ é™¤é‡å¤çš„å§“æ°ï¼Œè¦å°†DISTINCTå­å¥æ·»åŠ åˆ°SELECTè¯­å¥ä¸­,å½“ä½¿ç”¨DISTINCTå­å¥æ—¶ï¼Œé‡å¤çš„å§“æ°(lastname)åœ¨ç»“æžœé›†ä¸­è¢«æ¶ˆé™¤ã€‚mysql&gt; select distinct lastname from employees order by lastname; distinctå’Œnullå€¼ï¼š å¦‚æžœåˆ—å…·æœ‰NULLå€¼ï¼Œå¹¶ä¸”å¯¹è¯¥åˆ—ä½¿ç”¨DISTINCTå­å¥ï¼ŒMySQLå°†ä¿ç•™ä¸€ä¸ªNULLå€¼ï¼Œå¹¶åˆ é™¤å…¶å®ƒçš„NULLå€¼ï¼Œå› ä¸ºDISTINCTå­å¥å°†æ‰€æœ‰NULLå€¼è§†ä¸ºç›¸åŒçš„å€¼ã€‚ åœ¨customersè¡¨ä¸­ï¼Œæœ‰å¾ˆå¤šè¡Œçš„å·ž(state)åˆ—æ˜¯NULLå€¼ã€‚ å½“ä½¿ç”¨DISTINCTå­å¥æ¥æŸ¥è¯¢å®¢æˆ·æ‰€åœ¨çš„å·žæ—¶ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°å”¯ä¸€çš„å·žå’ŒNULLå€¼ï¼Œå¦‚ä¸‹æŸ¥è¯¢æ‰€ç¤ºï¼š 12345678910111213141516171819202122232425mysql&gt; select distinct state from customers;+---------------+| state |+---------------+| NULL || NV || Victoria || CA || NY || PA || CT || MA || Osaka || BC || Qubec || Isle of Wight || NSW || NJ || Queensland || Co. Cork || Pretoria || NH || Tokyo |+---------------+19 rows in set distinctåœ¨å¤šåˆ—ä¸Šçš„ä½¿ç”¨ï¼š å¯ä»¥ä½¿ç”¨å…·æœ‰å¤šä¸ªåˆ—çš„DISTINCTå­å¥ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒMySQLä½¿ç”¨æ‰€æœ‰åˆ—çš„ç»„åˆæ¥ç¡®å®šç»“æžœé›†ä¸­è¡Œçš„å”¯ä¸€æ€§ã€‚ è¦ä»Žcustomersè¡¨ä¸­èŽ·å–åŸŽå¸‚(city)å’Œå·ž(state)çš„å”¯ä¸€ç»„åˆï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æŸ¥è¯¢ï¼š 1234select distinct state,city from customers where state is not null order by state,city; æ²¡æœ‰DISTINCTå­å¥ï¼Œå°†æŸ¥è¯¢èŽ·å¾—å·ž(state)å’ŒåŸŽå¸‚(city)çš„é‡å¤ç»„åˆå¦‚ä¸‹ï¼š distinctå­å¥ä¸Žgroup byå­å¥æ¯”è¾ƒ å¦‚æžœåœ¨SELECTè¯­å¥ä¸­ä½¿ç”¨GROUP BYå­å¥ï¼Œè€Œä¸ä½¿ç”¨èšåˆå‡½æ•°ï¼Œåˆ™GROUP BYå­å¥çš„è¡Œä¸ºä¸ŽDISTINCTå­å¥ç±»ä¼¼ã€‚ ä»¥ä¸‹è¯­å¥ä½¿ç”¨GROUP BYå­å¥æ¥é€‰æ‹©customersè¡¨ä¸­å®¢æˆ·çš„å”¯ä¸€stateåˆ—çš„å€¼ï¼š 1select state from customers group by state; å¯ä»¥é€šè¿‡ä½¿ç”¨DISTINCTå­å¥æ¥å®žçŽ°ç±»ä¼¼çš„ç»“æžœï¼š 1select distinct state from customers; ä¸€èˆ¬è€Œè¨€ï¼ŒDISTINCTå­å¥æ˜¯GROUP BYå­å¥çš„ç‰¹æ®Šæƒ…å†µã€‚ DISTINCTå­å¥å’ŒGROUP BYå­å¥ä¹‹é—´çš„åŒºåˆ«æ˜¯GROUP BYå­å¥å¯å¯¹ç»“æžœé›†è¿›è¡ŒæŽ’åºï¼Œè€ŒDISTINCTå­å¥ä¸è¿›è¡ŒæŽ’åºã€‚ å¦‚æžœå°†ORDER BYå­å¥æ·»åŠ åˆ°ä½¿ç”¨DISTINCTå­å¥çš„è¯­å¥ä¸­ï¼Œåˆ™ç»“æžœé›†å°†è¢«æŽ’åºï¼Œå¹¶ä¸”ä¸Žä½¿ç”¨GROUP BYå­å¥çš„è¯­å¥è¿”å›žçš„ç»“æžœé›†ç›¸åŒã€‚ 1select distinct state from customers order by state; distinctå’Œèšåˆå‡½æ•° å¯ä»¥ä½¿ç”¨å…·æœ‰èšåˆå‡½æ•°(ä¾‹å¦‚SUMï¼ŒAVGå’ŒCOUNT)çš„DISTINCTå­å¥ä¸­ï¼Œåœ¨MySQLå°†èšåˆå‡½æ•°åº”ç”¨äºŽç»“æžœé›†ä¹‹å‰åˆ é™¤é‡å¤çš„è¡Œã€‚ è¦è®¡ç®—ç¾Žå›½å®¢æˆ·çš„å”¯ä¸€stateåˆ—çš„å€¼ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æŸ¥è¯¢ï¼š 1234567mysql&gt; SELECT COUNT(DISTINCT state) FROM customers WHERE country = &apos;USA&apos;;+-----------------------+| COUNT(DISTINCT state) |+-----------------------+| 8 |+-----------------------+1 row in set distintä¸Žlimitå­å¥ å¦‚æžœè¦å°†DISTINCTå­å¥ä¸ŽLIMITå­å¥ä¸€èµ·ä½¿ç”¨ï¼ŒMySQLä¼šåœ¨æŸ¥æ‰¾LIMITå­å¥ä¸­æŒ‡å®šçš„å”¯ä¸€è¡Œæ•°æ—¶ç«‹å³åœæ­¢æœç´¢ã€‚ ä»¥ä¸‹æŸ¥è¯¢customersè¡¨ä¸­çš„å‰3ä¸ªéžç©º(NOT NULL)å”¯ä¸€stateåˆ—çš„å€¼ã€‚ 123456789mysql&gt; SELECT DISTINCT state FROM customers WHERE state IS NOT NULL LIMIT 3;+----------+| state |+----------+| NV || Victoria || CA |+----------+3 rows in set 2ã€è¿‡æ»¤æ•°æ® where and or in between like limit is null ï¼ˆ1ï¼‰where åªæƒ³ä»Žemployeesè¡¨ä¸­èŽ·å–é”€å”®ä»£è¡¨å‘˜å·¥ï¼Œå¯ä½¿ç”¨ä»¥ä¸‹æŸ¥è¯¢ï¼š 123select lastname,firstname,jobtitlefrom employeeswhere jobtitle=&apos;Sales Rep&apos;; å³ä½¿WHEREå­å¥å‡ºçŽ°åœ¨è¯­å¥çš„æœ«å°¾ï¼Œä½†MySQLä¼šé¦–å…ˆä½¿ç”¨WHEREå­å¥ä¸­çš„è¡¨è¾¾å¼æ¥é€‰æ‹©åŒ¹é…çš„è¡Œã€‚å®ƒé€‰æ‹©å…·æœ‰èŒä½åç§°ä¸ºé”€å”®ä»£è¡¨çš„è¡Œè®°å½•ã€‚ 1jobtitle = 'Sales Rep'; MySQLä»ŽSELECTå­å¥ä¸­çš„é€‰æ‹©åˆ—è¡¨ä¸­é€‰æ‹©åˆ—ã€‚ åœ¨åŠžå…¬å®¤ä»£ç (officeCode)ç­‰äºŽ1ä¸­æŸ¥æ‰¾æ‰€æœ‰é”€å”®ä»£è¡¨ï¼š 1select lastname,firstname,jobtitle from employees where jobtitle=&apos;Sales Rep&apos; and officeCode=1; å¯ç”¨äºŽåœ¨WHEREå­å¥ä¸­å½¢æˆè¿‡æ»¤è¡¨è¾¾å¼çš„æ¯”è¾ƒè¿ç®—ç¬¦ï¼š æŸ¥è¯¢ä½¿ç”¨ä¸ç­‰äºŽ(!=)è¿ç®—ç¬¦æ¥èŽ·å–ä¸æ˜¯é”€å”®ä»£è¡¨çš„å…¶å®ƒæ‰€æœ‰å‘˜å·¥ï¼š 1select lastname,firstname,jobtitle from employees where jobtitle&lt;&gt;&apos;Sales Rep&apos; ï¼ˆ2ï¼‰and ANDè¿ç®—ç¬¦æ˜¯ç»„åˆä¸¤ä¸ªæˆ–å¤šä¸ªå¸ƒå°”è¡¨è¾¾å¼çš„é€»è¾‘è¿ç®—ç¬¦ï¼Œåªæœ‰å½“ä¸¤ä¸ªè¡¨è¾¾å¼æ±‚å€¼ä¸ºtrueæ—¶æ‰è¿”å›žtrueã€‚å¦‚æžœä¸¤ä¸ªè¡¨è¾¾å¼ä¸­çš„ä¸€ä¸ªæ±‚å€¼ä¸ºfalseï¼Œåˆ™ANDè¿ç®—ç¬¦è¿”å›žfalseã€‚ 1WHERE boolean_expression_1 AND boolean_expression_2 å½“æ±‚å€¼å…·æœ‰ANDè¿ç®—ç¬¦çš„è¡¨è¾¾å¼æ—¶ï¼ŒMySQLä¼šè®¡ç®—è¡¨è¾¾å¼çš„å…¶ä½™éƒ¨åˆ†ï¼Œç›´åˆ°å¯ä»¥ç¡®å®šç»“æžœä¸ºæ­¢ã€‚è¯¥åŠŸèƒ½ç§°ä¸ºçŸ­è·¯æ±‚å€¼ã€‚ é€‰æ‹©å›½å®¶æ˜¯USAå’ŒCAçš„å®¢æˆ·ã€‚æˆ‘ä»¬åœ¨WHEREå­å¥ä¸­ä½¿ç”¨ANDè¿ç®—ç¬¦ï¼š 1SELECT customername, country, state FROM customers WHERE country = &apos;USA&apos; AND state = &apos;CA&apos;; ä½¿ç”¨ANDè¿ç®—ç¬¦ï¼Œå¯ä»¥ç»„åˆä¸¤ä¸ªä»¥ä¸Šçš„å¸ƒå°”è¡¨è¾¾å¼ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹æŸ¥è¯¢è¿”å›žä½äºŽç¾Žå›½åŠ å·žçš„å®¢æˆ·ï¼Œå¹¶ä¸”ä¿¡ç”¨é¢åº¦å¤§äºŽ100Kï¼š 12345678SELECT customername, country, state, creditlimitFROM customersWHERE country = &apos;USA&apos; AND state = &apos;CA&apos; AND creditlimit &gt; 100000; ï¼ˆ3ï¼‰or MySQL ORè¿ç®—ç¬¦ç»„åˆäº†ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šå¸ƒå°”è¡¨è¾¾å¼ã€‚å½“ä»»ä¸€æ¡ä»¶ä¸ºçœŸæ—¶ï¼Œè¿”å›žtrueã€‚ ä¸‹é¢è¯´æ˜Žäº†ORè¿ç®—ç¬¦çš„è¯­æ³•ã€‚ 1boolean_expression_1 OR boolean_expression_2 boolean_expression_1å’Œboolean_expression_2æ˜¯å¸ƒå°”è¡¨è¾¾å¼ï¼Œå®ƒå¯èƒ½è¿”å›žçš„ç»“æžœæ˜¯ï¼štrueï¼Œfalseæˆ–NULLã€‚ MySQLä½¿ç”¨ORè¿ç®—ç¬¦è¿›è¡ŒçŸ­è·¯è¯„ä¼°(æ±‚å€¼è®¡ç®—)ã€‚ æ¢å¥è¯è¯´ï¼Œå½“MySQLå¯ä»¥ç¡®å®šç»“æžœæ—¶ï¼ŒMySQLä¼šåœæ­¢è¯„ä¼°(æ±‚å€¼è®¡ç®—)è¯­å¥çš„å…¶ä½™éƒ¨åˆ†ã€‚ å½“æ‚¨åœ¨è¯­å¥ä¸­ä½¿ç”¨å¤šä¸ªé€»è¾‘è¿ç®—ç¬¦æ—¶ï¼ŒMySQLä¼šåœ¨ANDè¿ç®—ç¬¦ä¹‹åŽå†å¯¹ORè¿ç®—ç¬¦è¿›è¡Œæ±‚å€¼ã€‚ è¿™ç§°ä¸ºè¿ç®—ç¬¦ä¼˜å…ˆçº§ã€‚è¿ç®—ç¬¦ä¼˜å…ˆçº§å†³å®šè¿ç®—ç¬¦çš„æ±‚å€¼é¡ºåºã€‚ MySQLé¦–å…ˆå¯¹ä¼˜å…ˆçº§è¾ƒé«˜çš„è¿ç®—ç¬¦è¿›è¡Œæ±‚å€¼ã€‚ 1234567mysql&gt; SELECT true OR false AND false;+-------------------------+| true OR false AND false |+-------------------------+| 1 |+-------------------------+1 row in set é¦–å…ˆï¼ŒMySQLå¯¹ANDè¿ç®—ç¬¦æ±‚å€¼ï¼Œå› æ­¤ï¼Œfalse AND falseè¿”å›žfalseã€‚ å…¶æ¬¡ï¼ŒMySQLå¯¹ORè¿ç®—ç¬¦æ±‚å€¼ï¼Œæ ¹æ®è¿”å›žçš„falseå€¼å†æ‰§è¡ŒANDè¿ç®—ï¼Œå› æ­¤true OR falseè¿”å›žtrueã€‚ è¦æ›´æ”¹è¯„ä¼°/æ±‚å€¼çš„é¡ºåºï¼Œè¯·ä½¿ç”¨æ‹¬å·ï¼Œä¾‹å¦‚ï¼š 1SELECT (true OR false) AND false; è¦èŽ·å¾—ç¾Žå›½(USA)æˆ–è€…æ³•å›½(France)çš„å®¢æˆ·ï¼Œè¯·åœ¨WHEREå­å¥ä¸­ä½¿ç”¨ORè¿ç®—ç¬¦ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1select customername,country from customers where country=&apos;USA&apos; or country=&apos;France&apos;; ä»¥ä¸‹å£°æ˜Žè¿”å›žä½äºŽç¾Žå›½(USA)æˆ–è€…æ³•å›½(France)ï¼Œå¹¶ä¸”ä¿¡ç”¨é¢åº¦å¤§äºŽ10000çš„å®¢æˆ·ï¼š 1select customername,country,creditLimit from customers where (country=&apos;USA&apos; or country=&apos;France&apos;) and creditLimit&gt;10000; https://www.yiibai.com/mysql/or.html]]></content>
      <categories>
        <category>work_summary</category>
      </categories>
      <tags>
        <tag>node.js</tag>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[work-summary-2019-4-8.md]]></title>
    <url>%2F2019%2F04%2F22%2Fwork-summary-2019-4-8-md%2F</url>
    <content type="text"><![CDATA[2019-4-8ç¬”è®° ä¸€ã€ä¿®æ”¹mysqlé…ç½® 1ã€å­˜å‚¨å›¾åƒå’ŒéŸ³é¢‘æ–‡ä»¶ source: https://blog.csdn.net/haluoluo211/article/details/52080325 å•†å“å›¾ç‰‡ï¼Œç”¨æˆ·ä¸Šä¼ çš„å¤´åƒï¼Œå…¶ä»–æ–¹é¢çš„å›¾ç‰‡ã€‚ç›®å‰ä¸šç•Œå­˜å‚¨å›¾ç‰‡æœ‰ä¸¤ç§åšæ³•ï¼š ï¼ˆ1ï¼‰æŠŠå›¾ç‰‡ç›´æŽ¥ä»¥äºŒè¿›åˆ¶å½¢å¼å­˜å‚¨åœ¨æ•°æ®åº“ä¸­: ä¸€èˆ¬æ•°æ®åº“æä¾›ä¸€ä¸ªäºŒè¿›åˆ¶å­—æ®µæ¥å­˜å‚¨äºŒè¿›åˆ¶æ•°æ®ã€‚æ¯”å¦‚mysqlä¸­æœ‰ä¸ªblobå­—æ®µã€‚oracleæ•°æ®åº“ä¸­æ˜¯blobæˆ–bfileç±»åž‹ã€‚ å°†è¯»å–åˆ°çš„å›¾ç‰‡ç”¨phpç¨‹åºè½¬åŒ–æˆäºŒè¿›åˆ¶å½¢å¼ã€‚å†ç»“åˆinsert into è¯­å¥æ’å…¥æ•°æ®è¡¨ä¸­çš„blobç±»åž‹å­—æ®µä¸­åŽ»ï¼›ä»Žæ•°æ®åº“å–å‡ºå›¾ç‰‡å±•ç¤ºçš„æ—¶å€™ï¼Œåˆ™æ˜¯ç›´æŽ¥å‘é€å›¾ç‰‡å†…å®¹ã€‚ 123$row=mysql_fetch_object($result); Header( "Content-type: image/gif");echo $row-&gt;this_image; å®žçŽ°ä»£ç å¦‚ä¸‹ï¼š 123456$PicturePath = â€˜/tmp/xxxjgjgj.jpgâ€™;//å‡è®¾è¿™æ˜¯ä¸Šä¼ çš„å›¾ç‰‡ï¼Œphpæ”¾åœ¨ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶å¤¹ã€‚è„šæœ¬æ‰§è¡Œå®Œæ¯•åŽè‡ªåŠ¨åˆ é™¤äº†ã€‚$imgStream = fread(fopen($PicturePath, "r");$blob_img = fread(fopen($imgStream, "r"), filesize($PicturePath));$sql =â€ INSERT INTO Images (this_image) VALUES ($blob_img)";//æ³¨ï¼šthis_imageå°±æ˜¯æ•°æ®è¡¨ä¸­ä¸€ä¸ªblobå­—æ®µç±»åž‹çš„å­—æ®µ å–å‡ºå±•ç¤ºå›¾ç‰‡ä»£ç ï¼š 1234$result=mysql_query("SELECT * FROM Images WHERE PicNum=$PicNum") or die("Cant perform Query"); $row=mysql_fetch_object($result); Header( "Content-type: image/gif");echo $row-&gt; this_image; æ€»ç»“ï¼šå¤„ç†ä»£ç æ„Ÿè§‰è¿˜çœŸæ¯”è¾ƒéº»çƒ¦ã€‚å…¶å®žï¼Œæˆ‘ä»Žæ¥æ²¡ç”¨è¿‡åœ¨æ•°æ®åº“ä¸­ä»¥äºŒè¿›åˆ¶å­˜å‚¨å›¾ç‰‡çš„åšæ³•ã€‚æˆ‘ä»¬ç”¨å¾—æ›´å¤šçš„æ˜¯å­˜å‚¨å›¾ç‰‡çš„è·¯å¾„ï¼Œå®žé™…å›¾ç‰‡æ˜¯åœ¨ç£ç›˜ä¸Šä¿å­˜çš„(å›¾ç‰‡äºŒè¿›åˆ¶æ”¾åˆ°æ•°æ®åº“,æŠŠæ•°æ®åº“çš„è´Ÿæ‹…å¼„é‡äº†)ã€‚ äº’è”ç½‘çŽ¯å¢ƒä¸­å¤§è®¿é—®é‡ï¼Œæ•°æ®åº“é€Ÿåº¦å’Œæ€§èƒ½æ–¹é¢å¾ˆé‡è¦ã€‚ä¸€èˆ¬åœ¨æ•°æ®åº“å­˜å‚¨å›¾ç‰‡çš„åšæ³•æ¯”è¾ƒå°‘ï¼Œæ›´å¤šçš„æ˜¯å°†å›¾ç‰‡è·¯å¾„å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œå±•ç¤ºå›¾ç‰‡çš„æ—¶å€™åªéœ€è¦è¿žæŽ¥ç£ç›˜è·¯å¾„æŠŠå›¾ç‰‡è½½å…¥è¿›æ¥å³å¯ã€‚å› ä¸ºå›¾ç‰‡æ˜¯å±žäºŽå¤§å­—æ®µã€‚ä¸€å¼ å›¾ç‰‡å¯èƒ½1måˆ°å‡ mã€‚ æœ‰ä¸ªåŽŸåˆ™ï¼šå›¾ç‰‡å°½é‡ä¸è¦å­˜å‚¨åœ¨æ•°æ®åº“ä¸­(æ˜¯æŒ‡ä¸è¦äºŒè¿›åˆ¶å½¢å¼ä¿å­˜åˆ°å­—æ®µï¼Œè€Œåªä¿å­˜å›¾ç‰‡çš„è·¯å¾„)ã€‚è¿™æ ·çš„å¤§å­—æ®µæ•°æ®ä¼šåŠ é‡æ•°æ®åº“çš„è´Ÿæ‹…ï¼Œæ‹–æ…¢æ•°æ®åº“ï¼Œåœ¨å¤§å¹¶å‘è®¿é—®çš„æƒ…å†µä¸‹å¾ˆé‡è¦ã€‚è¿™æ˜¯ä¸€ä¸ªç»éªŒã€‚åŽ»çœ‹çœ‹dbaå¯¹æ•°æ®åº“æ€§èƒ½è°ƒä¼˜æ–¹é¢çš„åˆ†æžéƒ½èƒ½å¾—åˆ°è¿™ä¸ªç­”æ¡ˆçš„ï¼šå°±æ˜¯å›¾ç‰‡ä¸è¦å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ã€‚ å°±åƒè¿™ä¸ªè§„åˆ™ä¸€æ ·ï¼šæ–‡ç« åˆ†ä¸ºæ ‡é¢˜ã€ä½œè€…ã€æ·»åŠ æ—¶é—´ã€æ›´æ–°æ—¶é—´ã€æ–‡ç« å†…å®¹ã€æ–‡ç« å…³é”®å­—ã€‚ æ–‡ç« å†…å®¹ä¸€èˆ¬æ˜¯æ¯”è¾ƒé•¿çš„ã€‚ç»å¸¸ä½¿ç”¨textå­—æ®µåŽ»å­˜å‚¨ã€‚æ–‡ç« çš„å†…å®¹å°±å±žäºŽå¤§å­—æ®µã€‚ä¸€èˆ¬æ–‡ç« å†…å®¹å¯ä»¥æ‹†åˆ†åˆ°å•ç‹¬ä¸€ä¸ªè¡¨ä¸­åŽ»ã€‚ä¸è¦ä¸Žæ–‡ç« ä¿¡æ¯å­˜å‚¨åœ¨ä¸€å¼ è¡¨é‡Œé¢ã€‚ æˆ‘ç†è§£çš„åŽŸç†æ˜¯ï¼šmysqlä¸­ä¸€å¼ è¡¨çš„æ•°æ®æ˜¯å…¨éƒ¨åœ¨ä¸€ä¸ªæ•°æ®æ–‡ä»¶ä¸­çš„ã€‚å¦‚æžœå¤§å­—æ®µçš„æ•°æ®ä¹Ÿå­˜å‚¨åœ¨é‡Œé¢ã€‚ç¨‹åºå±•ç¤ºåˆ—è¡¨ï¼Œæ¯”å¦‚æ–‡ç« åˆ—è¡¨ã€‚è¿™ä¸ªæ—¶å€™æ ¹æœ¬ä¸éœ€è¦å±•ç¤ºæ–‡ç« å†…å®¹çš„ã€‚ä½†æ˜¯ä»ç„¶ä¼šå½±å“é€Ÿåº¦ï¼Œæ•°æ®åº“æŸ¥æ‰¾æ•°æ®å…¶å®žå°±æ˜¯æ‰«æé‚£ä¸ªæ•°æ®æ–‡ä»¶ï¼Œæ–‡ä»¶å®¹é‡è¶Šå°ï¼Œé€Ÿåº¦å°±ä¼šè¶Šå¿«(ä¸ºä»€ä¹ˆå•è¡¨çš„å®¹é‡åœ¨1g-2gçš„æ—¶å€™åŸºæœ¬ä¸Šè¦åˆ†è¡¨äº†)ã€‚æ‹†åˆ†å‡ºåŽ»åˆ°ä¸€å¼ å•ç‹¬çš„è¡¨ï¼Œå°±æ˜¯å•ç‹¬çš„æ–‡ä»¶äº†ã€‚æˆ‘è§‰å¾—ï¼Œä¸¾ä¸€åä¸‰ï¼Œç›¸äº’ç‹¬ç«‹ï¼Œåˆ†ç¦»çš„æ€æƒ³ä¸ä»…åœ¨ç³»ç»Ÿå¼€å‘ä¸­ç”¨åˆ°ï¼Œåœ¨çŽ°å®žç”Ÿæ´»ä¸­ç»å¸¸å­˜åœ¨çš„ã€‚ç›¸äº’æ··åˆï¼Œå°±ä¼šé€ æˆç›¸äº’å½±å“ã€‚å°å·§ï¼Œç®€æ´æ˜¯ä¸€ç§æ€æƒ³ã€‚ http://developer.51cto.com/art/201211/364472.htm ä½œè€…å»ºè®®ï¼Œä¸‰ç§ä¸œè¥¿æ°¸è¿œä¸è¦æ”¾åˆ°æ•°æ®åº“é‡Œï¼šå›¾ç‰‡ï¼Œæ–‡ä»¶ï¼ŒäºŒè¿›åˆ¶æ•°æ®ã€‚ä½œè€…çš„ç†ç”±æ˜¯ï¼Œ å¯¹æ•°æ®åº“çš„è¯»/å†™çš„é€Ÿåº¦æ°¸è¿œéƒ½èµ¶ä¸ä¸Šæ–‡ä»¶ç³»ç»Ÿå¤„ç†çš„é€Ÿåº¦ï¼› æ•°æ®åº“å¤‡ä»½å˜çš„å·¨å¤§ï¼Œè¶Šæ¥è¶Šè€—æ—¶é—´ï¼› å¯¹æ–‡ä»¶çš„è®¿é—®éœ€è¦ç©¿è¶Šä½ çš„åº”ç”¨å±‚å’Œæ•°æ®åº“å±‚ã€‚ æŠŠå›¾ç‰‡ç¼©ç•¥å›¾å­˜åˆ°æ•°æ®åº“é‡Œï¼Ÿå¾ˆå¥½ï¼Œé‚£ä½ å°±ä¸èƒ½ä½¿ç”¨nginxæˆ–å…¶å®ƒç±»åž‹çš„è½»é‡çº§æœåŠ¡å™¨æ¥å¤„ç†å®ƒä»¬äº†ã€‚ ç»™è‡ªå·±è¡Œä¸ªæ–¹ä¾¿å§ï¼Œåœ¨æ•°æ®åº“é‡Œåªç®€å•çš„å­˜æ”¾ä¸€ä¸ªç£ç›˜ä¸Šä½ çš„æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„ï¼Œæˆ–è€…ä½¿ç”¨S3ï¼ˆå¤‡æ³¨ï¼šäºšé©¬é€Šäº‘æœåŠ¡ï¼‰æˆ–CDNä¹‹ç±»çš„æœåŠ¡ã€‚ ï¼ˆ2ï¼‰å›¾ç‰‡å­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼Œæ•°æ®åº“å­—æ®µä¸­ä¿å­˜çš„æ˜¯å›¾ç‰‡çš„è·¯å¾„ã€‚ ============================================================================== å…³äºŽmysqlä¸­çš„blobç±»åž‹ï¼š bolbåƒintåž‹é‚£æ ·ï¼Œåˆ†ä¸ºblobã€MEDIUMBLOBã€LONGBLOBã€‚å…¶å®žå°±æ˜¯ä»Žå°åˆ°å¤§ã€‚blob å®¹é‡ä¸º64KB ï¼ŒMEDIUMBLOB å®¹é‡ä¸º16Mï¼ŒLONGBLOB å®¹é‡ä¸º4Gã€‚ è¯´å®žè¯ï¼Œå›¾ç‰‡ç”¨è¿™æ ·å­å­˜å‚¨ç”¨å¾—è¿˜çœŸå°‘ã€‚ä½¿ç”¨phpå‡½æ•°serializeè¿›è¡Œåºåˆ—åŒ–çš„å€¼ï¼Œæˆ‘çœ‹åˆ°æœ‰äººå­˜å…¥è¿™ä¸ªå­—æ®µä¸­åŽ»ã€‚ mysqlä¸­blobå­—æ®µå­˜å‚¨å›¾ç‰‡æœ‰ä¸ªé€šä¿¡å¤§å°çš„è®¾ç½®ï¼š å›¾ç‰‡è¦ä¼ è¾“ç»™mysqlå­˜å‚¨èµ·æ¥ï¼Œé‚£ä¹ˆéœ€è¦æ¶‰åŠåˆ°æ•°æ®é€šä¿¡ã€‚mysqlä¸­æœ‰ä¸ªé…ç½®æ˜¯é™åˆ¶é€šä¿¡æ•°æ®å¤§å°çš„ã€‚my.confé…ç½®æ–‡ä»¶ä¸­çš„max_allowed_packetï¼Œmysqlé»˜è®¤çš„å€¼æ˜¯1Mã€‚ å¥½å¤šå›¾ç‰‡å°¤å…¶æ˜¯åŽŸå§‹å›¾å¯èƒ½ä¸æ­¢1mã€‚ä¼ è¾“çš„æ•°æ®(ä¹Ÿå°±æ˜¯å›¾ç‰‡)è¶…è¿‡è¿™ä¸ªè®¾ç½®å¤§å°ã€‚ç»“æžœå°±ä¼šå‡ºé”™ï¼Œè¿™æ ·æ˜Žæ˜¾å ç”¨ä¸Žmysqläº¤äº’çš„é€šä¿¡æ—¶é—´å˜›ã€‚å»¶é•¿å“åº”æ—¶é•¿äº†ã€‚ ç›´æŽ¥ä¸¢ä¸ªå›¾ç‰‡è·¯å¾„â€images/xxxxâ€ç»™mysqlã€‚æ²¡è¿™ä¹ˆè€—è´¹èµ„æºã€‚å…¶å®žæ‰€è°“çš„æ€§èƒ½ï¼Œæœ€å…³é”®æ˜¯æ•°æ®åº“æ€§èƒ½ã€‚å› ä¸ºéšç€æ•°æ®åº“æ•°æ®é‡å¢žå¤§ï¼Œå¤§éƒ¨åˆ†æ—¶é—´è€—è´¹æ˜¯åœ¨phpï¼Œjavaç­‰è¯­è¨€ç­‰å¾…æ•°æ®åº“è¿”å›žæ•°æ®çš„è¿‡ç¨‹ä¸­è€—è´¹æ—¶é—´ã€‚ ç½‘ç«™è®¿é—®é‡å¤§äº†åŽï¼Œå…·ä½“çš„è¯­è¨€ä¸æ˜¯ç“¶é¢ˆï¼Œç“¶é¢ˆéƒ½åœ¨æ•°æ®åº“ã€‚ç”¨cï¼Œphpï¼Œjava,netéƒ½èƒ½æ“ä½œmysqlæ•°æ®åº“èŽ·å–æ•°æ®ã€‚è¯­è¨€ä¹‹é—´å¯èƒ½å­˜åœ¨é€Ÿåº¦æ‰§è¡Œå·®å¼‚ï¼Œä½†æ˜¯å…¶å®žè¿™ç§å·®åˆ«å·²ç»å¾ˆå°äº†ã€‚è‡³å°‘ç»™äºˆç”¨æˆ·æ„Ÿè§‰ä¸åˆ°æ˜Žæ˜¾ã€‚æ‰§è¡Œç›¸å·®0.0001ç§’ç”¨æˆ·æ„Ÿè§‰å¹¶æ²¡æœ‰æ˜Žæ˜¾çš„åŒºåˆ«ã€‚å¯èƒ½è¯´ï¼Œå¤§å¹¶å‘(å¾ˆå¤šç”¨æˆ·åŒæ—¶è®¿é—®)çš„æ—¶å€™ï¼Œå°±ä¼šä½“çŽ°åˆ°å·®åˆ«äº†ã€‚å…¶å®žæˆ‘è§‰å¾—ï¼Œå¤§å¹¶å‘è®¿é—®æ˜¯æ•°æ®åº“ç“¶é¢ˆã€‚ç­‰å¾…æ•°æ®åº“ç»™äºˆæ•°æ®ã€‚æ²¡è¾¾åˆ°ä¸€å®šçº§åˆ«å®žåœ¨ä½“çŽ°ä¸äº†å·®åˆ«ã€‚æ•°æ®åº“æ•°æ®é‡è¾¾åˆ°ä¸€å®šçº§åˆ«ã€‚è¯­è¨€ç›¸å·®0.001sä¼šç»™äºˆç”¨æˆ·ä½“éªŒä¸Šçš„å·®åˆ«ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆphpå¾ˆé€‚åˆåšwebå¼€å‘äº†ã€‚è§£æžé¡µé¢é€Ÿåº¦å¿«(è§£é‡Šåž‹è¯­è¨€ï¼Œä¸éœ€è¦ç¼–è¯‘)ã€‚å¯ä»¥ç”¨javaæ¥ä¸Žæ•°æ®åº“æ‰“äº¤é“èŽ·å–æ•°æ®ã€‚phpä¸ç›´æŽ¥æ“ä½œæ•°æ®åº“ï¼Œè€Œæ˜¯è°ƒç”¨javaæä¾›çš„æ•°æ®æŽ¥å£ï¼ŒèŽ·å–æ•°æ®ï¼Œé©¬ä¸Šå±•ç¤ºåœ¨é¡µé¢ä¸­ã€‚è¿™æ˜¯åˆ©ç”¨äº†phpçš„é¡µé¢æ‰§è¡Œé€Ÿåº¦å¿«çš„ä¸€ä¸ªä¼˜åŠ¿ã€‚ å›¾ç‰‡ä»¥äºŒè¿›åˆ¶å½¢å¼å­˜å‚¨åœ¨æ•°æ®åº“ï¼Œæœ‰ä¸€ä¸ªå¥½å¤„ï¼šå¤‡ä»½çš„æ—¶å€™æ–¹ä¾¿ã€‚ç›´æŽ¥å¤‡ä»½æ•°æ®åº“ï¼Œå›¾ç‰‡ä¹Ÿè·Ÿç€å¤‡ä»½ã€‚æ¢å¥è¯è¯´ï¼Œè¿ç§»çŽ¯å¢ƒçš„æ—¶å€™æ˜¯æ–¹ä¾¿ã€‚è€Œå›¾ç‰‡æ”¾åœ¨ç£ç›˜ä¸Šçš„è¯ï¼Œæ•°æ®åº“ä¸­å­˜å‚¨çš„åªæ˜¯å›¾ç‰‡è·¯å¾„ã€‚å¤‡ä»½æ•°æ®åº“åŽã€‚ç£ç›˜ä¸Šçš„å›¾ç‰‡ä¹Ÿè¦è·Ÿç€å¤‡ä»½æ‰è¡Œã€‚ ä¸è¿‡æˆ‘è§‰å¾—ï¼Œå¤‡ä»½è¿™ä¸ªå¥½å¤„ä¸æ˜¯å¾ˆæ˜Žæ˜¾ã€‚å›¾ç‰‡åœ¨ç£ç›˜ä¸Šï¼Œå¤‡ä»½ç£ç›˜ä¹Ÿæ²¡å¾ˆå¤§çš„äº‹æƒ…ã€‚æ‰“åŒ…åŽ‹ç¼©ä¹Ÿå¯ä»¥äº†ã€‚äº’è”ç½‘çŽ¯å¢ƒæ¯•ç«Ÿä¸Žä¼ ç»Ÿçš„è½¯ä»¶å¼€å‘ä¸åŒï¼Œwebå¼€å‘æ¯”è¾ƒå…³æ³¨ç½‘ç«™é€Ÿåº¦ã€‚ä¹Ÿå°±æ˜¯æ•°æ®åº“çš„é€Ÿåº¦ã€‚å°±åƒäº’è”ç½‘å¼€å‘ä¸­ï¼Œæœ‰æ—¶å€™ä¸ºäº†é€Ÿåº¦ï¼Œç”¨ç©ºé—´æ¢æ—¶é—´çš„åšæ³•æ¯”è¾ƒæ™®éï¼Œæ‰€ä»¥å¾€å¾€åœ¨è®¾è®¡æ•°æ®åº“çš„æ—¶å€™å¹¶ä¸ä¸€å®šéµå¾ªä¼ ç»Ÿæ•°æ®åº“è®¾è®¡ä¸‰å¤§èŒƒå¼ã€‚ æ•°æ®åº“ä¸­ä¿å­˜çš„æ˜¯å›¾ç‰‡è·¯å¾„çš„è¯ï¼Œåœ¨webå¼€å‘çŽ¯å¢ƒä¸‹ï¼Œå…¶å®žæœ‰ä¸ªæ›´å¥½å¤„ï¼Œå°±æ˜¯cdnåŠ é€Ÿã€‚å°±æ˜¯ä¸‹é¢è¦è¿›è¡Œæ€»ç»“çš„åœ°æ–¹ã€‚ ============================================================================== æ•°æ®åº“ä¸­ä¿å­˜å›¾ç‰‡è·¯å¾„ï¼š ä¸€èˆ¬æ˜¯è¿™æ ·çš„ï¼š æŒ‰ç…§å¹´æœˆæ—¥ç”Ÿæˆè·¯å¾„ã€‚å…·ä½“æ˜¯æŒ‰ç…§å¹´æœˆæ—¥è¿˜æ˜¯æŒ‰ç…§å¹´æœˆåŽ»ç”Ÿæˆè·¯å¾„ï¼Œæ ¹æ®è‡ªå·±éœ€è¦(ä¸ä¸€å®šæ˜¯æŒ‰ç…§æ—¥æœŸåŽ»ç”Ÿæˆ)ã€‚ç†è§£ä¸ºä»€ä¹ˆè¦åˆ†æ•£åˆ°å¤šä¸ªæ–‡ä»¶å¤¹ä¸­åŽ»æ‰æ˜¯å…³é”®ï¼Œæ¶‰åŠåˆ°ä¸€ä¸ªåŽŸç†å°±æ˜Žç™½äº†ï¼š æ“ä½œç³»ç»Ÿå¯¹å•ä¸ªç›®å½•çš„æ–‡ä»¶æ•°é‡æ˜¯æœ‰é™åˆ¶çš„ã€‚å½“æ–‡ä»¶æ•°é‡å¾ˆå¤šçš„æ—¶å€™ã€‚ä»Žç›®å½•ä¸­èŽ·å–æ–‡ä»¶çš„é€Ÿåº¦å°±ä¼šè¶Šæ¥è¶Šæ…¢ã€‚æ‰€ä»¥ä¸ºäº†ä¿æŒé€Ÿåº¦ï¼Œæ‰è¦æŒ‰ç…§å›ºå®šè§„åˆ™åŽ»åˆ†æ•£åˆ°å¤šä¸ªç›®å½•ä¸­åŽ»ã€‚ å›¾ç‰‡åˆ†æ•£åˆ°ç£ç›˜è·¯å¾„ä¸­åŽ»ã€‚æ•°æ®åº“å­—æ®µä¸­ä¿å­˜çš„æ˜¯ç±»ä¼¼äºŽè¿™æ ·å­çš„â€images/2012/09/25/ 1343287394783.jpgâ€ åŽŸæ¥ä¸Šä¼ çš„å›¾ç‰‡æ–‡ä»¶åç§°ä¼šé‡æ–°å‘½åä¿å­˜ï¼Œæ¯”å¦‚æŒ‰ç…§æ—¶é—´æˆ³æ¥ç”Ÿæˆï¼Œ1343287394783. jpgã€‚è¿™æ ·å­æ˜¯ä¸ºäº†é¿å…æ–‡ä»¶åé‡å¤ï¼Œå¤šä¸ªäººå¾€åŒä¸€ä¸ªç›®å½•ä¸Šä¼ å›¾ç‰‡çš„æ—¶å€™ä¼šå‡ºçŽ°ã€‚åæ­£ç”¨ä»€ä¹ˆæ ·çš„è§„åˆ™å‘½åå›¾ç‰‡ï¼Œåªè¦åšåˆ°å›¾ç‰‡åç§°çš„å”¯ä¸€æ€§å³å¯ã€‚ æ¯”å¦‚ç½‘ç«™çš„å¹¶å‘è®¿é—®é‡å¤§ï¼Œç›®å½•çš„ç”Ÿæˆåˆ†å¾—æœˆç»†è¶Šå¥½ã€‚æ¯”å¦‚ç²¾ç¡®åˆ°å°æ—¶ï¼Œä¸€ä¸ªå°æ—¶éƒ½å¯ä»¥æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ã€‚åŒæ—¶0.001ç§’æœ‰ä¸¤ä¸ªç”¨æˆ·åŒæ—¶åœ¨ä¸Šä¼ å›¾ç‰‡(å› ä¸ºé‚£ä¹ˆå°±ä¼šå¾€åŒä¸€ä¸ªå°æ—¶æ–‡ä»¶å¤¹é‡Œé¢å­˜å›¾ç‰‡)ã€‚å› ä¸ºæ—¶é—´æˆ³æ˜¯ç²¾ç¡®åˆ°ç§’çš„ã€‚ä¸ºäº†åšåˆ°å›¾ç‰‡åç§°å”¯ä¸€æ€§è€Œä¸è‡³äºŽè¦†ç›–ï¼Œç”Ÿæˆå¯ä»¥åœ¨åœ¨æ—¶é—´æˆ³åŽé¢ç»§ç»­åŠ æ¯«ç§’å¾®ç§’ç­‰ã€‚æ€»ç»“çš„è§„å¾‹æ˜¯ï¼Œå¹¶å‘è®¿é—®é‡è¶Šå¤§ã€‚å°±è¶Šç²¾ç¡®å°±å¥½äº†ã€‚ æœ‰ä¸ªæ–¹é¢æ€»ç»“ä¸€ä¸‹ï¼šä¸ºä»€ä¹ˆä¿å­˜çš„ç£ç›˜è·¯å¾„ï¼Œæ˜¯â€images/2012/09/25/1343287394783.jpgâ€ï¼Œè€Œä¸æ˜¯â€ /images/2012/09/25/ 1343287394783.jpgâ€(æœ€å‰é¢å¸¦æœ‰æ–œæ )ï¼šè¿žé‚£ä¸ªæ–œæ éƒ½ä¸è¦ã€‚è¿™é‡Œä¹Ÿæ˜¯åšåˆ°æ–¹ä¾¿ä»¥åŽç³»ç»Ÿæ‰©å±•ã€‚ åœ¨é¡µé¢ä¸­éœ€è¦å–å‡ºå›¾ç‰‡è·¯å¾„å±•ç¤ºå›¾ç‰‡çš„æ—¶å€™ï¼š å¦‚æžœæ˜¯ç›¸å¯¹è·¯å¾„ï¼Œåˆ™å¯ä»¥ä½¿ç”¨â€./â€+â€images/2012/09/25/1343287394783.jpgâ€è¿›è¡Œç»„è£…ã€‚ å¦‚æžœéœ€è¦å•ç‹¬çš„åŸŸå(æ¯”å¦‚åšcdnåŠ é€Ÿçš„æ—¶å€™)åŸŸåï¼Œimg1.xxx.com,img2.xxx.comè¿™æ ·çš„åŸŸåï¼Œç›´æŽ¥ç»„è£… â€œhttp://img1.xxx.com/â€+â€images/2012/09/25/1343287394783.jpgâ€ å½“ç„¶æ•°æ®åº“å¯ä»¥åœ¨å‰é¢åŠ æ–œæ /ä¿å­˜èµ·æ¥,/images/2012/09/25/ 1343287394783.jpgï¼Œä½†ä¸æ–¹ä¾¿ç»Ÿä¸€ã€‚æ¯”å¦‚ç›¸å¯¹è·¯å¾„è½½å…¥å›¾ç‰‡çš„æ—¶å€™ï¼Œåˆ™æ˜¯â€.â€+â€ /images/2012/09/25/ 1343287394783.jpgâ€ å¯èƒ½æˆ‘è¿˜æ²¡ä½“ä¼šåˆ°åå¤„ï¼Œä»¥åŽä¼šé‡åˆ°é—®é¢˜çš„ã€‚ä¸è¿‡ï¼Œéµå¾ªæƒ¯ä¾‹ä¸åŠ æ–œæ â€ images/2012/09/25/ 1343287394783.jpgâ€å°±å¯¹äº†ã€‚ æ¶‰åŠåˆ°ä¸€ä¸ªæ–°é—®é¢˜ï¼šä¸ºä»€ä¹ˆå¤§éƒ¨åˆ†ç³»ç»Ÿéƒ½ä¸ä¼šåŸŸåä¿å­˜è¿›åŽ»ï¼Œåƒè¿™æ ·å­http://www.xxx.com/images/2012/09/25/1343287394783.jpgä¿å­˜åˆ°æ•°æ®åº“ä¸­ã€‚ äº†è§£çš„çŸ¥è¯†è¶Šå¤šï¼Œè¶Šæœ‰åˆ©äºŽæˆ‘ä»¬åšå†³å®šã€‚å¯èƒ½å°±æ˜¯ä¸€ä¸ªâ€œæ„Ÿè§‰åŒºåˆ«ä¸æ˜¯å¾ˆå¤§â€çš„å½±å“ä¸‹ï¼ŒåŽ»åšä¸€ä¸ªå†³å®šï¼Œåè€Œå¯¹åŽé¢æ˜¯æ¯”è¾ƒå¤§çš„å½±å“çš„ã€‚è‡³å°‘æ˜¯å¢žåŠ è‡ªå·±çš„å·¥ä½œé‡äº†ã€‚ å…¶å®žæŠŠåŸŸåä¿å­˜è¿›åŽ»ï¼Œä¹Ÿä¸æ˜¯ä»€ä¹ˆæ»”å¤©å¤§ç½ªçš„äº‹æƒ…ã€‚ä½†å‡¡æ˜¯ç»éªŒä¸°å¯Œçš„å¼€å‘äººå‘˜éƒ½ä¸ä¼šè¿™æ ·å­åšã€‚è¿™æ˜¯ä¸€ä¸ªç»éªŒç§¯ç´¯å‡ºæ¥çš„ã€‚éœ€è¦äº†è§£cdnçŸ¥è¯†ï¼Œä»€ä¹ˆæƒ…å†µä¸‹ä¼šç”¨åˆ°cdnçŸ¥è¯†ã€‚ è™½ç„¶æ˜¯åšå¼€å‘äººå‘˜ï¼Œä¸éœ€è¦å…³æ³¨è¿ç»´å’ŒæœåŠ¡å™¨ä¹‹ç±»çš„çŸ¥è¯†ã€‚ä¸è¿‡äº†è§£ä¸€äº›å°±æœ‰åˆ©äºŽç†è§£äº†ã€‚ è¿™é‡Œæ¶‰åŠåˆ°cdnåŠ é€Ÿã€‚ ============================================================================== å…³äºŽcdnåŽŸç†(å°±æ˜¯å†…å®¹åˆ†å‘ç½‘ç»œ)ï¼š cdnï¼Œæˆ‘ç†è§£å…¶æœ¬è´¨å°±æ˜¯ä¸ºäº†è§£å†³è·ç¦»è¿œäº§ç”Ÿçš„é€Ÿåº¦é—®é¢˜ï¼Œä½¿ç”¨å°±è¿‘çš„æœåŠ¡ã€‚ ä»Žä¸­å›½è¯·æ±‚ç¾Žå›½ä¸€å°æœåŠ¡å™¨ä¸Šçš„å›¾ç‰‡ã€‚ä¸€èˆ¬æ¯”è¾ƒæ…¢ï¼Œå› ä¸ºè·ç¦»è¿™ä¹ˆè¿œï¼Œç½‘ç»œä¼ è¾“æ˜¯å­˜åœ¨æŸè€—çš„ï¼Œè·ç¦»è¶Šè¿œï¼Œä¼ è¾“çš„æ—¶é—´å°±è¶Šé•¿ã€‚ä¸€èˆ¬ä¼šçœ‹åˆ°æµè§ˆå™¨å·¦ä¸‹è§’æ˜¾ç¤ºï¼šâ€œå·²å“åº”,æ­£åœ¨ä¼ è¾“æ•°æ®â€¦â€ã€‚è¿™ä¸æ˜¯æœåŠ¡å™¨æœ¬èº«é—®é¢˜äº†ã€‚å®žé™…ä¸ŠæœåŠ¡å™¨æ—©å°±å“åº”è¯·æ±‚ï¼ŒæŠŠæ•°æ®å‘ç»™å®¢æˆ·ç«¯ï¼Œä½†æ˜¯ç½‘ç»œé—®é¢˜ï¼Œå°±ä¸€ç›´åœ¨ä¼ è¾“ï¼Œæ²¡ä¼ å®Œäº†ã€‚ åœ¨ä¸­å›½ï¼Œæ˜¯å—åŒ—è·ç¦»è¿œçš„é—®é¢˜ã€‚å—åŒ—è¿˜ä¼šæ¶‰åŠåˆ°è·¨ç½‘ï¼Œå—æ–¹ç”¨æˆ·ä½¿ç”¨ç”µä¿¡å±…å¤šï¼ŒåŒ—æ–¹ç”¨æˆ·ç½‘é€šå±…å¤šã€‚ä¸¤ä¸ªçº¿è·¯éœ€è¦è·¨è¶Šï¼Œä¼šæœ‰æ—¶é—´å»¶è¿Ÿã€‚åŒ—äº¬åˆ°å¹¿å·žçš„è·ç¦»ï¼Œå¦‚æžœç›´æŽ¥è¯·æ±‚ã€‚ cdnåŠ é€Ÿå°±æ˜¯é€‚åº”è¿™ä¸ªéœ€æ±‚äº§ç”Ÿçš„ï¼šçŽ°åœ¨ä¸è¯·æ±‚ç¾Žå›½çš„æœåŠ¡å™¨ã€‚ç›´æŽ¥åœ¨ä¸­å›½å®‰æ”¾èŠ‚ç‚¹(èŠ‚ç‚¹æ˜¯æ¯”è¾ƒç¬¼ç»Ÿçš„è¯è¯­ï¼Œå¯ä»¥ç†è§£æˆä¸€å°æœåŠ¡å™¨ï¼Œä¹Ÿå¯ä»¥ç†è§£æˆä¸€ä¸ªæœºæˆ¿ï¼Œå°±æ˜¯ä¸€ä¸ªç‚¹å˜›)ï¼Œè¯·æ±‚è·ç¦»è¿‘çš„èŠ‚ç‚¹ã€‚è¿™æ ·å­å°±ä¸éœ€è¦é‚£ä¹ˆè¿œçš„è·ç¦»äº†ã€‚ åœ¨é•¿æ²™çš„ç½‘ç«™ï¼Œå›¢è´­ä»¥åŸŽå¸‚åˆ†ç«™çš„å½¢å¼ã€‚åŒ—äº¬å’Œé•¿æ²™ç”¨çš„æ˜¯åŒä¸€å¥—ç¨‹åºã€‚æœåŠ¡å™¨åœ¨é•¿æ²™ã€‚åŒ—äº¬ç”¨æˆ·è®¿é—®åŒ—äº¬ç«™çš„æ—¶å€™,å®žé™…ä¸Šéœ€è¦è¿œè·ç¦»è®¿é—®é•¿æ²™çš„æœåŠ¡å™¨ã€‚é€Ÿåº¦æ€Žä¹ˆéƒ½å¿«ä¸èµ·æ¥ã€‚è·ŸæœåŠ¡å™¨æ€§èƒ½å®Œå…¨æ²¡å…³ç³»ã€‚å½“æ—¶ä¸æ‡‚è¿™äº›ã€‚ä¸æ¸…æ¥šæ€Žä¹ˆæŠ˜è…¾ã€‚çœ‹é‚£æœ¬ã€Šå‰ç«¯ä¼˜åŒ–æŠ€å·§ã€‹ï¼Œæƒ³åŠžæ³•åŽ»åšjsä»£ç åŽ‹ç¼©ï¼Œæµè§ˆå™¨ç¼“å­˜ä¹‹ç±»çš„ã€‚å®žé™…ä¸ŠçžŽæŠ˜è…¾ã€‚ä¸æ˜¯è¯´è¿™äº›å‰ç«¯ä¼˜åŒ–ä¸é‡è¦ï¼Œå“²å­¦ä¸Šæœ‰ä¸»æ¬¡çŸ›ç›¾ä¹‹åˆ†ï¼Œç“¶é¢ˆåœ¨å“ªé‡Œå°±åŽ»çªç ´å“ªé‡Œã€‚æ²¡è§£å†³ä¸»è¦çŸ›ç›¾ï¼Œé—®é¢˜å¹¶ä¸ä¼šè¿Žåˆƒè€Œè§£ã€‚å½“æ—¶ä¹Ÿä¸æ˜¯æ•°æ®åº“ç“¶é¢ˆã€‚å¦‚æžœåŽ»ä¼˜åŒ–æ•°æ®åº“ã€‚ä¹Ÿä¸ä¼šæ˜Žæ˜¾æ”¹å–„ã€‚å°±é‚£ç‚¹æ•°æ®é‡ã€‚æ ¹æœ¬å°±è¾¾ä¸åˆ°ç“¶é¢ˆã€‚å“ªé‡Œè°ˆå¾—ä¸Šä¸»è¦çŸ›ç›¾ã€‚éšç€åŽæ¥åŽ»å…¶ä»–å…¬å¸å·¥ä½œï¼ŒæŽ¥è§¦ä¸€äº›ä¸œè¥¿ï¼Œç±»ä¼¼ä¸æ‰¾ç“¶é¢ˆçš„ä¼˜åŒ–ä¾‹å­å‘ç”Ÿåœ¨èº«è¾¹å¥½å‡ æ¬¡äº†ï¼Œå…ˆæ²¡æ‰¾åˆ°ç“¶é¢ˆå°±çžŽåŽ»ä¼˜åŒ–ã€‚æˆ‘çš„åŒäº‹å¯èƒ½æ˜¯æŠ±ç€å¤šå¤šç›Šå–„çš„å¿ƒæ€åŽ»åšçš„ï¼Œä½†ä¸»è¦çŸ›ç›¾(æŠ€æœ¯ä¸Šè¯´æ˜¯ç“¶é¢ˆ)æ²¡æ‰¾åˆ°ï¼Œä¹Ÿæ²¡æ”¹å–„ã€‚ å½“æ—¶å¦‚æžœæ²¡æƒ³åˆ°æ˜¯è·ç¦»é—®é¢˜ã€‚ä¹Ÿå°±ä¸ä¼šæƒ³åˆ°cdnï¼Œå½“æ—¶å…¶å®žæˆ‘æ ¹æœ¬ä¸çŸ¥é“cdnæœåŠ¡ã€‚æˆ‘åªçŸ¥é“ï¼Œgoogleè¿™äº›ç½‘ç«™è‚¯å®šæœ‰åœ¨ä¸­å›½éƒ¨ç½²çš„æœåŠ¡å™¨ï¼Œè¦ä¸ç„¶ï¼Œä¸­å›½ç”¨æˆ·è¿˜åŽ»è®¿é—®ç¾Žå›½çš„æœåŠ¡å™¨ï¼Œé‚£å†å¥½çš„æœåŠ¡å™¨éƒ½ä¼šé€Ÿåº¦æ…¢çš„ã€‚ ç”±äºŽè‡ªå·±æ­å»ºcdnçŽ¯å¢ƒå’Œæœºæˆ¿çš„èµ„é‡‘æ¯”è¾ƒå¤§ï¼ˆéœ€è¦å¤§é‡çš„æœåŠ¡å™¨ï¼‰ï¼Œä¹Ÿéœ€è¦äººåŠ›ç»´æŠ¤ã€‚åæ­£ä¸€èˆ¬çš„å…¬å¸å¼„ä¸èµ·ï¼Œå…¶å®žæ ¹æœ¬ä¸åˆ’ç®—ã€‚æ·˜å®ä»¥å‰ç”¨å•†ç”¨çš„cdnæœåŠ¡ï¼ŒåŽæ¥å•†ç”¨çš„æ‰›ä¸ä½äº†ï¼Œå°±æ­å»ºäº†è‡ªå·±çš„cdnç½‘ã€‚æˆ‘ä¸çŸ¥é“æ–°æµªæœ‰æ²¡æœ‰è‡ªå·±æ­å»ºï¼Œä½†å…¶å®žæˆ‘è§‰å¾—è·Ÿæ·˜å®çš„ç‰¹ç‚¹æœ‰å…³ï¼Œåº—é“ºå¾ˆå¤šï¼Œæ— è®ºæ˜¯å•†å“è¿˜æ˜¯äº¤æ˜“è®°å½•æ€»è®¡èµ·æ¥å•†å“å¾ˆå¤šçš„å›¾ç‰‡ï¼Œå›¾ç‰‡éƒ½æ˜¯é™æ€çš„éƒ¨åˆ†ï¼Œcdnæœ¬æ¥å°±æ˜¯ç”¨æ¥åšé™æ€çš„(å›¾ç‰‡ï¼Œcssï¼Œjsç­‰)è¯·æ±‚åˆ†å‘ç”¨çš„ã€‚ æˆ‘ä¹‹å‰åœ¨ç½‘ä¸Šçœ‹åˆ°ä¸€å¥è¯ï¼Œcdnç½‘ç»œä¸æ˜¯ä¸€èˆ¬çš„å…¬å¸çŽ©å¾—èµ·çš„ã€‚ä¸€èˆ¬çš„å…¬å¸è‡ªå·±æ­å»ºcdnç½‘ç»œæˆæœ¬é«˜ï¼Œæ‰€ä»¥å°±æœ‰å•†ä¸šçš„cdnæä¾›ä»˜è´¹ç§Ÿç”¨æœåŠ¡ï¼Œè¿™æ˜¯ä¸€é¡¹å¾ˆæˆç†Ÿçš„ä¸šåŠ¡ï¼Œå¾ˆå¤šè¿™æ ·çš„å…¬å¸ï¼Œå¤§éƒ¨åˆ†å…¨å›½æ€§çš„äº’è”ç½‘å…¬å¸éƒ½ä¼šä½¿ç”¨åˆ°cdnã€‚ æ€»ç»“ï¼šcdnæœåŠ¡ã€‚å¯¹äºŽé™æ€å†…å®¹æ˜¯éžå¸¸é€‚åˆçš„ã€‚æ‰€ä»¥åƒå•†å“å›¾ç‰‡ï¼Œéšç€è®¿é—®é‡å¤§äº†åŽï¼Œç§Ÿç”¨cdnæœåŠ¡ï¼Œåªéœ€è¦æŠŠå›¾ç‰‡ä¸Šä¼ åˆ°ä»–ä»¬çš„æœåŠ¡å™¨ä¸ŠåŽ»ã€‚ ä¾‹å­ï¼šåŒ—äº¬è®¿é—®é•¿æ²™æœåŠ¡å™¨ï¼Œè·ç¦»å¤ªè¿œã€‚æˆ‘å®Œå…¨å¯ä»¥æŠŠå•†å“å›¾ç‰‡ï¼Œæ”¾åˆ°åŒ—äº¬çš„äº‘æœåŠ¡ï¼ˆæˆ‘è§‰å¾—çŽ°åœ¨æä¾›ç»™ç½‘ç«™ä½¿ç”¨çš„äº‘å­˜å‚¨å…¶å®žå°±æ˜¯cdnï¼Œç»™ç½‘ç«™æä¾›åˆ†æµå’Œå°±è¿‘è®¿é—®ï¼‰ä¸ŠåŽ»ã€‚è¿™æ ·å­åŒ—äº¬ç”¨æˆ·è®¿é—®çš„æ—¶å€™ï¼Œå®žé™…ä¸Šå›¾ç‰‡å°±æ˜¯å°±è¿‘èŽ·å–ã€‚ä¸éœ€è¦å¾ˆé•¿è·ç¦»çš„ä¼ è¾“ã€‚ è‡ªå·±ç”¨ä¸€ä¸ªåŸŸåimg.xxx.comæ¥è½½å…¥å›¾ç‰‡ã€‚è¿™ä¸ªåŸŸåè§£æžåˆ°åŒ—äº¬çš„äº‘æœåŠ¡ä¸ŠåŽ»ã€‚ åšæ³•:æ•°æ®åº“ä¸­ä¿å­˜çš„æ˜¯â€ images/2012/09/25/1343287394783.jpgâ€,è¿™äº›å›¾ç‰‡å®žé™…ä¸Šä¸å­˜å‚¨åœ¨webæœåŠ¡å™¨ä¸Šã€‚ä¸Šä¼ åˆ°åŒ—äº¬çš„cdnæœåŠ¡å™¨ä¸ŠåŽ»ã€‚ä»Žæ•°æ®åº“å–å‡ºæ¥ï¼Œç›´æŽ¥â€img.xxx.com/â€+â€ images/2012/09/25/1343287394783.jpgâ€å¦‚æžœè¿˜æœ‰å¤šä¸ªï¼Œå°±å‘½åimg1.xx.comã€img2.xx.com åƒæ·˜å®ï¼Œå‡¡å®¢ï¼Œäºšé©¬é€Šè¿™äº›ç”µå­å•†åŠ¡ç½‘ç«™ï¼Œæˆ‘ä»¬çœ‹åˆ°è¯·æ±‚çš„æ—¶å€™ï¼Œä¸‹é¢å¾€å¾€ä¼šæœ‰ï¼š img1.xxx.cdn.com img2.xxx.cdn.com å…¶å®žä»–ä»¬ä¿å­˜åœ¨æ•°æ®åº“ä¸­çš„æ˜¯ç›¸å¯¹è·¯å¾„ã€‚æœ‰äº›æ˜¯ä¸éœ€è¦åœ¨æ•°æ®åº“ä¿å­˜çš„ï¼Œç¼©ç•¥å›¾å¯ä»¥å®žæ—¶è®¿é—®çš„æ—¶å€™ç”¨ç¨‹åºç”Ÿæˆ(èŠ‚çœå¾ˆå¤šå­˜å‚¨ç©ºé—´)ã€‚ å®žé™…ä¸Šï¼ŒæŠŠåŸŸåä¿å­˜åœ¨æ•°æ®åº“ä¸­ï¼Œéžå¸¸ä¸åˆ©äºŽç³»ç»Ÿè¿ç§»ã€‚ä¸€æ—¦æ¢ä¸ªåŸŸåçš„è¯ï¼ŒåŽŸæ¥ä¿å­˜åœ¨æ•°æ®åº“ä¸­çš„æ˜¯â€œwww.abc.om/images/xxxxxxâ€œ,å› ä¸ºè·¯å¾„éƒ½åœ¨æ•°æ®åº“ä¸­å†™æ­»äº†ã€‚ä¸‹å›žæ¢ä¸ªåŸŸåå°±ç”¨ä¸äº†äº†ã€‚é‚£ä¸ªæ—¶å€™è‡ªå·±åŽ»å†™sqlè¯­å¥æ‰¹é‡æ›´æ–°å­—æ®µå§ã€‚ ============================================================================== æ·˜å®çš„å›¾ç‰‡å­˜å‚¨ï¼š æ·˜å®ä»¥å‰ä½¿ç”¨äº†å•†ç”¨çš„å­˜å‚¨ã€‚ä½†æ˜¯æ²¡æ³•æ»¡è¶³éœ€æ±‚ã€‚æ®è¯´ï¼Œåˆ°2010å¹´ï¼Œæ·˜å®ç½‘åŽç«¯ä¿å­˜ç€286äº¿å¼ å›¾ç‰‡ã€‚å•†ç”¨çš„ç³»ç»Ÿç³»ç»Ÿæ²¡æ³•æ»¡è¶³éœ€æ±‚çš„æ—¶å€™ã€‚ä»–ä»¬å°±è‡ªå·±å¼€å‘äº†ä¸€ä¸ªtfsã€‚å¤§è§„æ¨¡çš„å°æ–‡ä»¶åœ¨ç£ç›˜ä¸Šè¯»å–ï¼Œéœ€è¦ç£ç›˜ç£å¤´é¢‘ç¹çš„å¯»é“å’Œæ¢é“ã€‚å¤§å¹¶å‘æƒ…å†µä¸‹å’Œå¤§é‡çš„æ“ä½œç¡®å®žå¾ˆéº»çƒ¦ã€‚å…¶å®žå€Ÿé‰´äº†å½“æ—¶googleå…¬å¸ƒçš„gfsè®¾è®¡è®ºæ–‡ã€‚googleæœ‰ç›¸å†ŒæœåŠ¡ã€‚ä¸ºæ¯ä¸ªç”¨æˆ·æä¾›ä¸Šä¼ å›¾ç‰‡å­˜å‚¨ã€‚ ä¼°è®¡ï¼Œgoogleæ˜¯çŽ‡å…ˆå®žçŽ°è¿™ç§å°æ–‡ä»¶ç½‘ç»œå­˜å‚¨ç³»ç»Ÿçš„ã€‚ æœ‰ä¸ªè§‚ç‚¹æ¯”è¾ƒå¥½ï¼šå¯¹äºŽè€æ¿ä»¬è€Œè¨€ï¼Œå¾€å¾€è§‰å¾—ï¼Œç”¨é’±èƒ½è§£å†³çš„éƒ½ä¸ç®—é—®é¢˜ã€‚ä½†é—®é¢˜åœ¨äºŽï¼Œä½ é‡åˆ°çš„é—®é¢˜ï¼Œåˆ«äººéƒ½æ²¡é‡åˆ°è¿‡ã€‚é‚£è¿™ä¸ªæ—¶å€™ä½ å°±æ²¡æœ‰ç»éªŒå¯ä»¥å‚è€ƒæˆ–è€…ç›´æŽ¥æ‹¿æ¥ä½¿ç”¨ã€‚åªæœ‰è‡ªå·±å‚è€ƒä¸€äº›æ€è·¯åŽ»åˆ›é€ æŠ€æœ¯äº†ã€‚ å…³äºŽå›¾ç‰‡è¿›è¡Œäº‘å­˜å‚¨(cdnåŠ é€Ÿ)ï¼š æ›¾ç»çœ‹è¿‡è¿™ä¸ªï¼Œè¿™ä¸ªæ˜¯æ¯”è¾ƒé€‚åˆåˆ›ä¸šå…¬å¸çš„ã€‚ä»·æ ¼ç›¸å¯¹ä¾¿å®œ https://www.upyun.com/ ä»‹ç»æåˆ°ï¼Œæˆ‘ä»¬åœ¨å…¨å›½å„åœ°éƒ¨ç½²äº†55ä¸ªCDNèŠ‚ç‚¹ï¼Œ500å¤šå°æœåŠ¡å™¨ï¼Œç”µä¿¡ï¼Œè”é€šï¼Œç§»åŠ¨å’Œæ•™è‚²ç½‘çš„4çº¿å¸¦å®½ã€‚ å…¶å®žï¼ŒçŽ°åœ¨çš„äº‘å­˜å‚¨æœ¬è´¨å°±æ˜¯ä¸€ä¸ªcdnæœåŠ¡å•†ã€‚ä½ æŠŠé™æ€çš„å›¾ç‰‡ä¸Šä¼ åˆ°ä»–æä¾›çš„æœåŠ¡å™¨ä¸ŠåŽ»(ftpæ–¹å¼ä¸Šä¼ æˆ–è€…apiå½¢å¼ç¼–å†™ç¨‹åºä¸Šä¼ )ã€‚ä»–ä¸ºä½ åšå°±è¿‘èŠ‚ç‚¹è®¿é—®ã€‚ è®¡è´¹æ–¹å¼ï¼šæŒ‰ç…§æµé‡ä»˜è´¹ï¼Œ99å…ƒè´­ä¹°100gã€‚æ€Žä¹ˆç®—æµé‡ã€‚æ¯æ¬¡è®¿é—®æ–‡ä»¶çš„å¤§å°ç´¯åŠ ï¼Œæ¯”å¦‚ä¸€ä¸ª1mçš„æ–‡ä»¶ï¼Œè®¿é—®ä¸€æ¬¡æµé‡å°±åŠ 1mã€‚ æˆ‘ä¸ªäººç†è§£ï¼Œå¯¹äºŽå›¾ç‰‡çš„é‡ä¸å¤§çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨è¿™ç§äº‘æœåŠ¡ï¼Œå¥½å¤„ä¸æ˜¯èŠ‚çœå­˜å‚¨ç©ºé—´ã€‚ä½ è‡ªå·±çš„æœåŠ¡å™¨100gçš„ç©ºé—´å¯èƒ½åˆ›ä¸šåž‹å…¬å¸éƒ½æ²¡ç”¨å®Œï¼Œä¸æ˜¯ä»€ä¹ˆå­˜å‚¨ç©ºé—´ä¸å¤Ÿç”¨åŽ»ç”¨äº‘å­˜å‚¨ã€‚ä»¥å‰å¯¹cdnæ¯”è¾ƒæ¨¡ç³Šï¼Œè¿™ä¹ˆç†è§£ï¼Œæˆ–è€…ä»¥ä¸ºæ˜¯åˆ†æ•£ç½‘ç«™webæœåŠ¡å™¨æµåŽ‹åŠ›ï¼ŒæœåŠ¡å™¨åˆ†æµã€‚è¿™äº›å¥½å¤„æ˜¯æœ‰çš„ã€‚ä½†æ˜¯ï¼Œåªè¦ç†è§£äº†cdnäº§ç”Ÿçš„èƒŒæ™¯å’Œè§£å†³çš„å…³é”®é—®é¢˜åŽï¼Œå°±ä¼šæ˜Žç™½äº‘å­˜å‚¨å…³é”®å¥½å¤„åœ¨äºŽï¼šç»™ç”¨æˆ·å°±è¿‘èŠ‚ç‚¹è®¿é—®ï¼ŒåŠ é€Ÿã€‚ æˆ‘è§‰å¾—ï¼Œå¦‚æžœä¸æ˜¯å‡ºäºŽè¿™ä¸ªè€ƒè™‘ï¼Œæˆ–è€…è¾¾ä¸åˆ°è¿™æ ·çš„ç›®çš„ã€‚ç”¨å…¶ä»–æ–¹æ¡ˆä¹Ÿå®Œå…¨å¯ä»¥æ›¿ä»£ã€‚ä½•å¿…ä½¿ç”¨äº‘å­˜å‚¨å‘¢ï¼Ÿå°±æ˜¯ä½ æ— éžæœ‰å®žåŠ›åšåˆ°å…¨å›½å¤šä¸ªèŠ‚ç‚¹åŽ»éƒ¨ç½²æœåŠ¡ï¼Œæ‰éœ€è¦ç§Ÿç”¨cdnæ¥å¸®ä½ ï¼Œæ¯•ç«Ÿä»–ä»¬æ˜¯è§„æ¨¡äº§ç”Ÿçš„æ•ˆç›Šï¼Œä¸“æ³¨äºŽè§£å†³è¿™ä¸ªé¢†åŸŸã€‚è¿˜æœ‰ï¼šè…¾è®¯äº‘ã€é˜¿é‡Œäº‘ äºŒã€Node.jsä½œGateway æ·±å…¥ç ”ç©¶ä¸‹nodeä¹Ÿæ˜¯åˆ°äº†c/c++å¦‚ä½•æž„å»ºé«˜æ€§èƒ½çš„åº•å±‚apiï¼Œè¿™ä¸ªè¿‡ç¨‹å…¶å®žæ”¶èŽ·ä¹Ÿéžå¸¸å¤§ï¼Œè€Œä¸”è¿™äº›ä¸œè¥¿ä¸éšè¯­è¨€çš„å˜è¿è€Œæ²¡æœ‰ç”¨ï¼Œè¯´åˆ°åº•è¯­è¨€åªæ˜¯å·¥å…·ï¼Œä¸ç”¨çº ç»“å¤ªå¤šã€‚ è¯­è¨€åªæ˜¯ä¸ªå·¥å…·, é‡è¦çš„æ˜¯æ–¹æ³•å’Œæ€æƒ³, å‰ç«¯ä¹Ÿå¥½, åŽç«¯ä¹Ÿç½¢ã€‚ Node.jsåªæ˜¯ä¸€ä¸ªâ€œè¿è¡ŒçŽ¯å¢ƒâ€ï¼Œæœ¬èº«æä¾›å¾ˆå¤šåŠŸèƒ½ï¼Œåœ¨è¿™äº›åŠŸèƒ½åŸºç¡€ä¸Šå¯ä»¥åšå¤šç§åº”ç”¨å¼€å‘ã€‚Node.jsæ‰€ç›´æŽ¥ä½¿ç”¨çš„å¼€å‘è¯­è¨€æ˜¯JavaScript(ECMAScript)å’ŒC/C++ï¼Œä»–ä»¬éƒ½ä¸æ˜¯ä¾èµ–Node.jsè€Œå­˜åœ¨çš„ï¼Œè¿™äº›è¯­è¨€é¦–å…ˆæ˜¯å›¾çµå®Œå¤‡çš„ï¼Œå…¶æ¬¡æœ¬èº«å…·å¤‡ä¼—å¤šç‰¹æ€§ï¼Œå¯ä»¥è¢«ç”¨æ¥åšå¤šç§åº”ç”¨å¼€å‘ã€‚ å‰ç«¯å’ŒåŽç«¯æ˜¯è½¯ä»¶å·¥ç¨‹ä¸­çš„ä¸€å¯¹æ¦‚å¿µï¼Œæ˜¯ç”¨æ¥å¯¹åº”ç”¨ç¨‹åºè¿›è¡Œåˆ†å±‚çš„ï¼Œè½¯ä»¶æˆ–ç¡¬ä»¶çš„è¡¨ç¤ºéƒ¨åˆ†è¢«ç§°ä½œå‰ç«¯ï¼Œæ•°æ®è®¿é—®çš„éƒ¨åˆ†è¢«ç§°ä¸ºåŽç«¯ã€‚è€Œè½¯ä»¶å·¥å·¥ç¨‹ä¸Šå¯¹è½¯ä»¶ç³»ç»Ÿçš„åˆ†å±‚æ–¹æ³•å¹¶ä¸åªæœ‰è¿™ä¸€ç§ã€‚ ä»Žå“²å­¦ä¸Šæ¥è®²ï¼Œâ€œNode.jsâ€å’Œâ€œJavaScriptè¯­è¨€â€å’Œâ€œåŽç«¯â€ä¹‹é—´ä¸å­˜åœ¨è”ç³»ã€‚ å¦‚ä¸‹è¯´æ³•åœ¨é€»è¾‘å­¦ä¸Šéƒ½æ˜¯é”™è¯¯çš„ï¼š â€œJavaScriptå¯ä»¥ç”¨æ¥å†™å‰ç«¯ç¨‹åºï¼Œæ‰€ä»¥ç”¨JavaScriptçš„éƒ½æ˜¯å‰ç«¯å·¥ç¨‹å¸ˆâ€ â€œNode.jså¯ä»¥ç”¨æ¥è¿è¡ŒåŽç«¯ç¨‹åºï¼Œæ‰€ä»¥ç”¨Node.jsçš„éƒ½æ˜¯åŽç«¯å·¥ç¨‹å¸ˆâ€ â€œNode.jså·¥ç¨‹å¸ˆæ™®éä¼šå†™JavaScriptï¼Œè€ŒJavaScriptå¯ä»¥ç”¨æ¥å†™å‰ç«¯ç¨‹åºï¼Œæ‰€ä»¥ç”¨Node.jsçš„éƒ½æ˜¯å‰ç«¯å·¥ç¨‹å¸ˆâ€ â€œå‰ç«¯å·¥ç¨‹å¸ˆæ™®éä¼šå†™JavaScriptï¼ŒJavaScriptå¯ä»¥ç”¨äºŽåšNode.jsåº”ç”¨å¼€å‘ï¼Œè€ŒNode.jså¯ä»¥ç”¨æ¥è¿è¡ŒåŽç«¯ç¨‹åºï¼Œæ‰€ä»¥å‰ç«¯å·¥ç¨‹å¸ˆéƒ½æ˜¯åŽç«¯å·¥ç¨‹å¸ˆâ€ â€¦â€¦ è½¯ä»¶å¼€å‘é€šå¸¸å¯¹é€»è¾‘æ€§è¦æ±‚éžå¸¸é«˜ï¼Œå¦‚æžœä¸€ä¸ªè½¯ä»¶å¼€å‘å·¥ç¨‹å¸ˆè¿žä¸Šè¿°é€»è¾‘éƒ½æžä¸æ‡‚çš„è¯ï¼Œé‚£ä¹ˆæ˜¯ä¸€ä»¶å¤šä¹ˆå¯æ‚²çš„äº‹æƒ…ã€‚ ä»Žâ€œå‰ç«¯ä¸ŽåŽç«¯â€åˆ†å±‚æ€æƒ³çš„è§’åº¦æ¥è¯´ï¼Œå‰ç«¯å¼€å‘éœ€è¦å¤§é‡å‰ç«¯ç‹¬æœ‰çš„ç¨‹åºè®¾è®¡æ€æƒ³ï¼ŒåŽç«¯å¼€å‘ä¹Ÿéœ€è¦å¤§é‡åŽç«¯ç‹¬æœ‰çš„ç¨‹åºè®¾è®¡æ€æƒ³ï¼Œä½ æ˜¯â€œå‰ç«¯å·¥ç¨‹å¸ˆâ€æˆ–â€œåŽç«¯å·¥ç¨‹å¸ˆâ€å°±çœ‹ä½ æŽŒæ¡å“ªäº›æ€æƒ³ï¼Œå¦‚æžœä½ ä¸¤è€…éƒ½æŽŒæ¡ï¼Œé‚£ä¹ˆä½ å°±æ—¢æ˜¯â€œå‰ç«¯å·¥ç¨‹å¸ˆâ€åˆæ˜¯â€œåŽç«¯å·¥ç¨‹å¸ˆâ€ï¼Œæˆ–è€…è¯´æ˜¯â€œå…¨æ ˆå·¥ç¨‹å¸ˆâ€ã€‚ Node.js æ˜¯ä¸ªè¿è¡ŒçŽ¯å¢ƒè€Œä¸æ˜¯è¯­è¨€ï¼Œä½†æ˜¯çŽ°åœ¨çš„å¤§çŽ¯å¢ƒæ”¾åœ¨é‚£ï¼Œæ ¹æœ¬ä¸ç”¨çº ç»“è¿™äº›ï¼Œè¯´å¥æ›´é’»ç‰›è§’å°–çš„è¯ï¼Œæ€Žä¹ˆè§£é‡Š fs ä¸Ž bufferï¼Œæ‰€ä»¥è¯´ Node.js æ˜¯ä¸ªè¿è¡ŒçŽ¯å¢ƒä¹Ÿä¸å‡†ç¡®ï¼Œæ‰€ä»¥ä¸å†çº ç»“ã€‚ JDæœ¬èº«æ˜¯ä¸€ç§å¾ˆé‡è¦çš„å£°æ˜Žï¼Œæ‹›è˜è€…èƒ½å¤Ÿå‡­å€ŸJDåœ¨æŠ•ç®€åŽ†å‰å°±èƒ½åˆ¤æ–­è‡ªå·±æ˜¯å¦ç¬¦åˆèŒä½è¦æ±‚ï¼Œä»Žè€Œé¿å…åœ¨é¢è¯•ä¸­æµªè´¹æ—¶é—´ã€‚åªèƒ½è¯´æœ‰äº›å…¬å¸åœ¨æ‹›è˜çš„æ—¶å€™ä¸å¤Ÿä¸“ä¸šå’Œç”¨å¿ƒï¼Œæœ€ç»ˆç»“æžœæ˜¯æµªè´¹äº†é¢è¯•è€…å’Œè‡ªå·±çš„æ—¶é—´ä¸Žç²¾åŠ›ï¼Œç”šè‡³æ‹›åˆ°çš„å‘˜å·¥å…¶å®žæ ¹æœ¬åœ¨åšä¸ŽJDä¸Šä¸åŒçš„å·¥ä½œã€‚ ============================================================================== 1ã€ä½¿ç”¨ Node.js æ­å»ºä¸€ä¸ª API ç½‘å…³ ä¸ºä»€ä¹ˆè¦ç”¨Node.jsä½œä¸ºä¸­é—´å±‚ å°è£…åº”ç”¨å†…éƒ¨ç»“æž„ã€‚ç›¸æ¯”èµ·æ¥è°ƒç”¨æŒ‡å®šçš„æœåŠ¡ï¼Œå®¢æˆ·ç«¯ç›´æŽ¥è·Ÿgatwayäº¤äº’æ›´ç®€å•ç‚¹ã€‚API Gatewayæä¾›ç»™æ¯ä¸€ä¸ªå®¢æˆ·ç«¯ä¸€ä¸ªç‰¹å®šAPIï¼Œè¿™æ ·å‡å°‘äº†å®¢æˆ·ç«¯ä¸ŽæœåŠ¡å™¨ç«¯çš„é€šä¿¡æ¬¡æ•°ï¼Œä¹Ÿç®€åŒ–äº†å®¢æˆ·ç«¯ä»£ç ï¼› ä¸ç”¨åœ¨æ‰€æœ‰çš„æœåŠ¡ä¸­é‡æ–°å®žçŽ°ç›¸åŒçš„äº‹æƒ…ï¼› å¯ä»¥é€šè¿‡è·¯ç”±å¤„ç†ç‰ˆæœ¬æˆ–åŽç«¯æŽ¥å£ï¼Œè€Œå…¬å¼€çš„æŽ¥å£å¯ä»¥ä¿æŒä¸å˜ï¼› åˆ†è§£æ•´ä½“åº”ç”¨ï¼› å°†å…±äº«é€»è¾‘ï¼ˆå¦‚èº«ä»½éªŒè¯ï¼‰æ·»åŠ åˆ°ç½‘å…³APIï¼Œå¯ä»¥å°†æœåŠ¡çš„ä½“ç§¯å˜å°ï¼Œé›†ä¸­ç®¡ç†ï¼› è§£å†³å®¢æˆ·ç«¯æ‰€éœ€è¦çš„æ•°æ®çš„èšåˆçº§åˆ«ä¸åŒï¼Œæ¯”å¦‚å¯¹åœ¨å„ç§å¾®æœåŠ¡ä¸­äº§ç”Ÿçš„éžè§„èŒƒåŒ–æ•°æ®å®žä½“çš„é—®é¢˜ï¼› åœ¨ API ç½‘å…³ä¸­è¿›è¡Œæ•°æ®æ ¼å¼çš„è½¬æ¢ï¼Œè€Œä¸æ˜¯åœ¨æ‰€æœ‰çš„å¾®æœåŠ¡å™¨ä¸­åˆ†åˆ«è¿›è¡Œå®žçŽ°ï¼› å¤„ç†å®¢æˆ·ç«¯å’Œå¾®æœåŠ¡å™¨ä¹‹é—´çš„åè®®è½¬æ¢ï¼› åœ¨ API ç½‘å…³ä¸­å®žçŽ°é€ŸçŽ‡é™åˆ¶ï¼Œç¼“å­˜ä»¥åŠå„ç§å¯é æ€§åŠŸèƒ½. å®¢æˆ·ç«¯ç›´æŽ¥ä¸ŽæœåŠ¡å™¨ç«¯é€šä¿¡çš„æ–¹å¼å¾ˆå°‘åœ¨å®žé™…ä¸­ä½¿ç”¨ï¼Œé€šå¸¸æ¥è¯´ï¼Œä¸€ä¸ªæ›´å¥½çš„è§£å†³åŠžæ³•æ˜¯é‡‡ç”¨API Gatewayçš„æ–¹å¼ã€‚API Gatewayæ˜¯ä¸€ä¸ªæœåŠ¡å™¨ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯è¿›å…¥ç³»ç»Ÿçš„å”¯ä¸€èŠ‚ç‚¹ã€‚è¿™è·Ÿé¢å‘å¯¹è±¡è®¾è®¡æ¨¡å¼ä¸­çš„Facetæ¨¡å¼å¾ˆåƒã€‚API Gatewayå°è£…å†…éƒ¨ç³»ç»Ÿçš„æž¶æž„ï¼Œå¹¶ä¸”æä¾›APIç»™å„ä¸ªå®¢æˆ·ç«¯ã€‚å®ƒè¿˜å¯èƒ½æœ‰å…¶ä»–åŠŸèƒ½ï¼Œå¦‚æŽˆæƒã€ç›‘æŽ§ã€è´Ÿè½½å‡è¡¡ã€ç¼“å­˜ã€è¯·æ±‚åˆ†ç‰‡å’Œç®¡ç†ã€é™æ€å“åº”å¤„ç†ç­‰ã€‚ ä¸‹å›¾å±•ç¤ºäº†ä¸€ä¸ªé€‚åº”å½“å‰æž¶æž„çš„API Gatewayã€‚ API Gatewayè´Ÿè´£è¯·æ±‚è½¬å‘ã€åˆæˆå’Œåè®®è½¬æ¢ã€‚æ‰€æœ‰æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚éƒ½è¦å…ˆç»è¿‡API Gatewayï¼Œç„¶åŽè·¯ç”±è¿™äº›è¯·æ±‚åˆ°å¯¹åº”çš„å¾®æœåŠ¡ã€‚API Gatewayå°†ç»å¸¸é€šè¿‡è°ƒç”¨å¤šä¸ªå¾®æœåŠ¡æ¥å¤„ç†ä¸€ä¸ªè¯·æ±‚ä»¥åŠèšåˆå¤šä¸ªæœåŠ¡çš„ç»“æžœã€‚å®ƒå¯ä»¥åœ¨webåè®®ä¸Žå†…éƒ¨ä½¿ç”¨çš„éžWebå‹å¥½åž‹åè®®é—´è¿›è¡Œè½¬æ¢ï¼Œå¦‚ HTTPåè®®ã€WebSocketåè®®ã€‚ API Gatewayå¯ä»¥æä¾›ç»™å®¢æˆ·ç«¯ä¸€ä¸ªå®šåˆ¶åŒ–çš„APIã€‚å®ƒæš´éœ²ä¸€ä¸ªç²—ç²’åº¦APIç»™ç§»åŠ¨å®¢æˆ·ç«¯ã€‚ä»¥äº§å“æœ€ç»ˆé¡µè¿™ä¸ªä½¿ç”¨åœºæ™¯ä¸ºä¾‹ã€‚API Gatewayæä¾›ä¸€ä¸ªæœåŠ¡æä¾›ç‚¹ï¼ˆ/productdetails?productid=xxxï¼‰ä½¿å¾—ç§»åŠ¨å®¢æˆ·ç«¯å¯ä»¥åœ¨ä¸€ä¸ªè¯·æ±‚ä¸­æ£€ç´¢åˆ°äº§å“æœ€ç»ˆé¡µçš„å…¨ éƒ¨æ•°æ®ã€‚API Gatewayé€šè¿‡è°ƒç”¨å¤šä¸ªæœåŠ¡æ¥å¤„ç†è¿™ä¸€ä¸ªè¯·æ±‚å¹¶è¿”å›žç»“æžœï¼Œæ¶‰åŠäº§å“ä¿¡æ¯ã€æŽ¨èã€è¯„è®ºç­‰ã€‚ ä¸€ä¸ªå¾ˆå¥½çš„API Gatewayä¾‹å­æ˜¯ Netfix API Gatewayã€‚NetflixæµæœåŠ¡æä¾›æ•°ç™¾ä¸ªä¸åŒçš„å¾®æœåŠ¡ï¼ŒåŒ…æ‹¬ç”µè§†ã€æœºé¡¶ç›’ã€æ™ºèƒ½æ‰‹æœºã€æ¸¸æˆç³»ç»Ÿã€å¹³æ¿ç”µè„‘ç­‰ã€‚èµ·åˆï¼ŒNetflixè§†å›¾æä¾›ä¸€ä¸ª é€‚ç”¨å…¨åœºæ™¯çš„ APIã€‚ä½†æ˜¯ï¼Œä»–ä»¬å‘çŽ°è¿™ç§å½¢å¼ä¸å¥½ç”¨ï¼Œå› ä¸ºæ¶‰åŠåˆ°å„å¼å„æ ·çš„è®¾å¤‡ä»¥åŠå®ƒä»¬ç‹¬ç‰¹çš„éœ€æ±‚ã€‚çŽ°åœ¨ï¼Œä»–ä»¬é‡‡ç”¨ä¸€ä¸ªAPI Gatewayæ¥æä¾›å®¹é”™æ€§é«˜çš„APIï¼Œé’ˆå¯¹ä¸åŒç±»åž‹è®¾å¤‡æœ‰ç›¸åº”ä»£ç ã€‚äº‹å®žä¸Šï¼Œä¸€ä¸ªé€‚é…å™¨å¤„ç†ä¸€ä¸ªè¯·æ±‚å¹³å‡è¦è°ƒç”¨6åˆ°8ä¸ªåŽç«¯æœåŠ¡ã€‚Netflix API Gatewayæ¯å¤©å¤„ç†æ•°åäº¿çš„è¯·æ±‚ã€‚ API Gatewayçš„ä¼˜ç‚¹å’Œç¼ºç‚¹ å¦‚ä½ æ‰€æ–™ï¼Œé‡‡ç”¨API Gatewayä¹Ÿæ˜¯ä¼˜ç¼ºç‚¹å¹¶å­˜çš„ã€‚API Gatewayçš„ä¸€ä¸ªæœ€å¤§å¥½å¤„æ˜¯å°è£…åº”ç”¨å†…éƒ¨ç»“æž„ã€‚ç›¸æ¯”èµ·æ¥è°ƒç”¨æŒ‡å®šçš„æœåŠ¡ï¼Œå®¢æˆ·ç«¯ç›´æŽ¥è·Ÿgatwayäº¤äº’æ›´ç®€å•ç‚¹ã€‚API Gatewayæä¾›ç»™æ¯ä¸€ä¸ªå®¢æˆ·ç«¯ä¸€ä¸ªç‰¹å®šAPIï¼Œè¿™æ ·å‡å°‘äº†å®¢æˆ·ç«¯ä¸ŽæœåŠ¡å™¨ç«¯çš„é€šä¿¡æ¬¡æ•°ï¼Œä¹Ÿç®€åŒ–äº†å®¢æˆ·ç«¯ä»£ç ã€‚ API Gatewayä¹Ÿæœ‰ä¸€äº›ç¼ºç‚¹ã€‚å®ƒæ˜¯ä¸€ä¸ªé«˜å¯ç”¨çš„ç»„ä»¶ï¼Œå¿…é¡»è¦å¼€å‘ã€éƒ¨ç½²å’Œç®¡ç†ã€‚è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå®ƒå¯èƒ½æˆä¸ºå¼€å‘çš„ä¸€ä¸ªç“¶é¢ˆã€‚å¼€å‘è€…å¿…é¡»æ›´æ–°API Gatewayæ¥æä¾›æ–°æœåŠ¡æä¾›ç‚¹æ¥æ”¯æŒæ–°æš´éœ²çš„å¾®æœåŠ¡ã€‚æ›´æ–°API Gatewayæ—¶å¿…é¡»è¶Šè½»é‡çº§è¶Šå¥½ã€‚å¦åˆ™ï¼Œå¼€å‘è€…å°†å› ä¸ºæ›´æ–°Gatewayè€ŒæŽ’é˜Ÿåˆ—ã€‚ä½†æ˜¯ï¼Œé™¤äº†è¿™äº›ç¼ºç‚¹ï¼Œå¯¹äºŽå¤§éƒ¨åˆ†çš„åº”ç”¨ï¼Œé‡‡ç”¨API Gatewayçš„æ–¹å¼éƒ½æ˜¯æœ‰æ•ˆçš„ã€‚ å¤–éƒ¨å®¢æˆ·ç«¯è®¿é—®å¾®æœåŠ¡æž¶æž„ä¸­çš„æœåŠ¡æ—¶ï¼ŒæœåŠ¡ç«¯ä¼šå¯¹è®¤è¯å’Œä¼ è¾“æœ‰ä¸€äº›å¸¸è§çš„è¦æ±‚ã€‚API ç½‘å…³æä¾›å…±äº«å±‚æ¥å¤„ç†æœåŠ¡åè®®ä¹‹é—´çš„å·®å¼‚ï¼Œå¹¶æ»¡è¶³ç‰¹å®šå®¢æˆ·ç«¯ï¼ˆå¦‚æ¡Œé¢æµè§ˆå™¨ã€ç§»åŠ¨è®¾å¤‡å’Œè€ç³»ç»Ÿï¼‰çš„è¦æ±‚ã€‚ ï¼ˆ1ï¼‰å¾®æœåŠ¡å’Œæ¶ˆè´¹è€… å¾®æœåŠ¡æ˜¯é¢å‘æœåŠ¡çš„æž¶æž„ï¼Œå›¢é˜Ÿå¯ä»¥ç‹¬ç«‹è®¾è®¡ã€å¼€å‘å’Œå‘å¸ƒåº”ç”¨ç¨‹åºã€‚å®ƒå…è®¸åœ¨ç³»ç»Ÿå„ä¸ªå±‚é¢ä¸Šçš„æŠ€æœ¯å¤šæ ·æ€§ï¼Œå›¢é˜Ÿå¯ä»¥åœ¨ç»™å®šçš„æŠ€æœ¯éš¾é¢˜ä¸­ä½¿ç”¨æœ€ä½³è¯­è¨€ã€æ•°æ®åº“ã€åè®®å’Œä¼ è¾“å±‚ï¼Œä»Žè€Œå—ç›Šã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå›¢é˜Ÿå¯ä»¥ä½¿ç”¨ HTTP REST ä¸Šçš„ JSONï¼Œè€Œå¦ä¸€ä¸ªå›¢é˜Ÿå¯ä»¥ä½¿ç”¨ HTTP/2 ä¸Šçš„ gRPC æˆ– RabbitMQ ç­‰æ¶ˆæ¯ä»£ç†ã€‚ åœ¨æŸäº›æƒ…å†µä¸‹ä½¿ç”¨ä¸åŒçš„æ•°æ®åºåˆ—åŒ–å’Œåè®®å¯èƒ½æ˜¯å¼ºå¤§çš„ï¼Œä½†è¦ä½¿ç”¨æˆ‘ä»¬çš„äº§å“çš„å®¢æˆ·å¯èƒ½æœ‰ä¸åŒçš„éœ€æ±‚ã€‚è¯¥é—®é¢˜ä¹Ÿå¯èƒ½å‘ç”Ÿåœ¨å…·æœ‰åŒè´¨æŠ€æœ¯æ ˆçš„ç³»ç»Ÿä¸­ï¼Œå› ä¸ºå®¢æˆ·å¯ä»¥ä»Žæ¡Œé¢æµè§ˆå™¨é€šè¿‡ç§»åŠ¨è®¾å¤‡å’Œæ¸¸æˆæœºåˆ°é—ç•™ç³»ç»Ÿã€‚ä¸€ä¸ªå®¢æˆ·å¯èƒ½æœŸæœ› XML æ ¼å¼ï¼Œè€Œå¦ä¸€ä¸ªå®¢æˆ·å¯èƒ½å¸Œæœ› JSON ã€‚åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œæ‚¨éœ€è¦åŒæ—¶æ”¯æŒå®ƒä»¬ã€‚ å½“å®¢æˆ·æƒ³è¦ä½¿ç”¨æ‚¨çš„å¾®æœåŠ¡æ—¶ï¼Œæ‚¨å¯ä»¥é¢å¯¹çš„å¦ä¸€ä¸ªæŒ‘æˆ˜æ¥è‡ªäºŽé€šç”¨çš„å…±äº«é€»è¾‘ï¼ˆå¦‚èº«ä»½éªŒè¯ï¼‰ï¼Œå› ä¸ºæ‚¨ä¸æƒ³åœ¨æ‰€æœ‰æœåŠ¡ä¸­é‡æ–°å®žçŽ°ç›¸åŒçš„äº‹æƒ…ã€‚ æ€»ç»“ï¼šæˆ‘ä»¬ä¸æƒ³åœ¨æˆ‘ä»¬çš„å¾®æœåŠ¡æž¶æž„ä¸­å®žçŽ°æˆ‘ä»¬çš„å†…éƒ¨æœåŠ¡ï¼Œä»¥æ”¯æŒå¤šä¸ªå®¢æˆ·ç«¯å¹¶å¯ä»¥é‡å¤ä½¿ç”¨ç›¸åŒçš„é€»è¾‘ã€‚è¿™å°±æ˜¯ API ç½‘å…³å‡ºçŽ°çš„åŽŸå› ï¼Œå…¶ä½œä¸ºå…±äº«å±‚æ¥å¤„ç†æœåŠ¡åè®®ä¹‹é—´çš„å·®å¼‚å¹¶æ»¡è¶³ç‰¹å®šå®¢æˆ·ç«¯çš„è¦æ±‚ã€‚ ï¼ˆ2ï¼‰ä»€ä¹ˆæ˜¯ API ç½‘å…³ï¼Ÿ API ç½‘å…³æ˜¯å¾®æœåŠ¡æž¶æž„ä¸­çš„ä¸€ç§æœåŠ¡ï¼Œå®ƒä¸ºå®¢æˆ·ç«¯æä¾›å…±äº«å±‚å’Œ APIï¼Œä»¥ä¾¿ä¸Žå†…éƒ¨æœåŠ¡è¿›è¡Œé€šä¿¡ã€‚API ç½‘å…³å¯ä»¥è¿›è¡Œè·¯ç”±è¯·æ±‚ã€è½¬æ¢åè®®ã€èšåˆæ•°æ®ä»¥åŠå®žçŽ°å…±äº«é€»è¾‘ï¼Œå¦‚è®¤è¯å’Œé€ŸçŽ‡é™åˆ¶å™¨ã€‚ æ‚¨å¯ä»¥å°† API ç½‘å…³è§†ä¸ºæˆ‘ä»¬çš„å¾®æœåŠ¡ä¸–ç•Œçš„å…¥å£ç‚¹ã€‚ æˆ‘ä»¬çš„ç³»ç»Ÿå¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ª API ç½‘å…³ï¼Œå…·ä½“å–å†³äºŽå®¢æˆ·çš„éœ€æ±‚ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºæ¡Œé¢æµè§ˆå™¨ã€ç§»åŠ¨åº”ç”¨ç¨‹åºå’Œå…¬å…± API æä¾›å•ç‹¬çš„ç½‘å…³ã€‚ Node.js ç”¨äºŽå‰ç«¯å›¢é˜Ÿçš„ API ç½‘å…³ ç”±äºŽ API ç½‘å…³ä¸ºå®¢æˆ·ç«¯åº”ç”¨ç¨‹åºï¼ˆå¦‚æµè§ˆå™¨ï¼‰æä¾›äº†åŠŸèƒ½ï¼Œå®ƒå¯ä»¥ç”±è´Ÿè´£å¼€å‘å‰ç«¯åº”ç”¨ç¨‹åºçš„å›¢é˜Ÿå®žæ–½å’Œç®¡ç†ã€‚ è¿™ä¹Ÿæ„å‘³ç€ç”¨å“ªç§è¯­è¨€å®žçŽ° API Gateway åº”ç”±è´Ÿè´£ç‰¹å®šå®¢æˆ·çš„å›¢é˜Ÿé€‰æ‹©ã€‚ç”±äºŽ JavaScript æ˜¯å¼€å‘æµè§ˆå™¨åº”ç”¨ç¨‹åºçš„ä¸»è¦è¯­è¨€ï¼Œå³ä½¿æ‚¨çš„å¾®æœåŠ¡æž¶æž„ä»¥ä¸åŒçš„è¯­è¨€å¼€å‘ï¼ŒNode.js ä¹Ÿå¯ä»¥æˆä¸ºå®žçŽ° API ç½‘å…³çš„ç»ä½³é€‰æ‹©ã€‚ Netflix æˆåŠŸåœ°ä½¿ç”¨ Node.js API ç½‘å…³åŠå…¶ Java åŽç«¯æ¥æ”¯æŒå¹¿æ³›çš„å®¢æˆ·ç«¯ - äº†è§£æ›´å¤šå…³äºŽå®ƒä»¬çš„æ–¹æ³•é˜…è¯» The â€œPaved Roadâ€ PaaS for Microservices at Netflix è¿™ç¯‡æ–‡ç«  ï¼ˆ3ï¼‰API ç½‘å…³åŠŸèƒ½ æˆ‘ä»¬ä¹‹å‰è®¨è®ºè¿‡ï¼Œå¯ä»¥å°†é€šç”¨å…±äº«é€»è¾‘æ”¾å…¥æ‚¨çš„ API ç½‘å…³ï¼Œæœ¬èŠ‚å°†ä»‹ç»æœ€å¸¸è§çš„ç½‘å…³èŒè´£ã€‚ è·¯ç”±å’Œç‰ˆæœ¬æŽ§åˆ¶ æˆ‘ä»¬å°† API ç½‘å…³å®šä¹‰ä¸ºæ‚¨çš„å¾®æœåŠ¡çš„å…¥å£ç‚¹ã€‚åœ¨æ‚¨çš„ç½‘å…³æœåŠ¡ä¸­ï¼Œæ‚¨å¯ä»¥æŒ‡å®šä»Žå®¢æˆ·ç«¯è·¯ç”±åˆ°ç‰¹å®šæœåŠ¡çš„è·¯ç”±è¯·æ±‚ã€‚æ‚¨ç”šè‡³å¯ä»¥é€šè¿‡è·¯ç”±å¤„ç†ç‰ˆæœ¬æˆ–æ›´æ”¹åŽç«¯æŽ¥å£ï¼Œè€Œå…¬å¼€çš„æŽ¥å£å¯ä»¥ä¿æŒä¸å˜ã€‚æ‚¨è¿˜å¯ä»¥åœ¨æ‚¨çš„ API ç½‘å…³ä¸­å®šä¹‰ä¸Žå¤šä¸ªæœåŠ¡é…åˆçš„æ–°ç«¯ç‚¹ã€‚ API ç½‘å…³ä½œä¸ºå¾®æœåŠ¡å…¥å£ç‚¹ ç½‘å…³è®¾è®¡çš„å‡çº§ API ç½‘å…³æ–¹æ³•ä¹Ÿå¯ä»¥å¸®åŠ©æ‚¨åˆ†è§£æ‚¨çš„æ•´ä½“åº”ç”¨ç¨‹åºã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåœ¨å¾®æœåŠ¡ç«¯é‡æž„ä¸€ä¸ªç³»ç»Ÿä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ä¹Ÿæ˜¯ä¸å¯èƒ½çš„ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦åœ¨é‡æž„æœŸé—´ä¸ºä¸šåŠ¡å‘é€æ–°çš„ä»¥åŠåŽŸæœ‰çš„åŠŸèƒ½ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä»£ç†æˆ– API ç½‘å…³ç½®äºŽæˆ‘ä»¬çš„æ•´ä½“åº”ç”¨ç¨‹åºä¹‹å‰ï¼Œå°†æ–°åŠŸèƒ½ä½œä¸ºå¾®æœåŠ¡å®žçŽ°ï¼Œå¹¶å°†æ–°ç«¯ç‚¹è·¯ç”±åˆ°æ–°æœåŠ¡ï¼ŒåŒæ—¶é€šè¿‡åŽŸæœ‰çš„è·¯ç”±æœåŠ¡æ—§ç«¯ç‚¹ã€‚è¿™æ ·ä»¥åŽï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡å°†åŽŸæœ‰åŠŸèƒ½è½¬å˜ä¸ºæ–°æœåŠ¡æ¥åˆ†è§£æ•´ä½“ã€‚ éšç€ç½‘å…³è®¾è®¡çš„å‡çº§ï¼Œæˆ‘ä»¬å¯ä»¥å®žçŽ°æ•´ä½“æž¶æž„åˆ°å¾®åž‹æœåŠ¡çš„å¹³æ»‘è¿‡æ¸¡ã€‚ API ç½‘å…³è®¾è®¡çš„å‡çº§ è®¤è¯ å¤§å¤šæ•°å¾®æœåŠ¡åŸºç¡€è®¾æ–½éœ€è¦è¿›è¡Œèº«ä»½éªŒè¯ã€‚å°†å…±äº«é€»è¾‘ï¼ˆå¦‚èº«ä»½éªŒè¯ï¼‰æ·»åŠ åˆ° API ç½‘å…³å¯ä»¥å¸®åŠ©æ‚¨ä¿æŒæ‚¨çš„æœåŠ¡çš„ä½“ç§¯å˜å°ä»¥åŠå¯ä»¥é›†ä¸­ç®¡ç†åŸŸã€‚ åœ¨å¾®æœåŠ¡æž¶æž„ä¸­ï¼Œæ‚¨å¯ä»¥é€šè¿‡ç½‘ç»œé…ç½®å°†æ‚¨çš„æœåŠ¡ä¿æŠ¤åœ¨ DMZ ï¼ˆä¿æŠ¤åŒºï¼‰ä¸­ï¼Œå¹¶é€šè¿‡ API ç½‘å…³å‘å®¢æˆ·å…¬å¼€ã€‚è¯¥ç½‘å…³è¿˜å¯ä»¥å¤„ç†å¤šä¸ªèº«ä»½éªŒè¯æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥åŒæ—¶æ”¯æŒåŸºäºŽ cookie å’Œ token çš„èº«ä»½éªŒè¯ã€‚ å…·æœ‰è®¤è¯åŠŸèƒ½çš„ API ç½‘å…³ æ•°æ®æ±‡æ€» åœ¨å¾®æœåŠ¡æž¶æž„ä¸­ï¼Œå¯èƒ½å®¢æˆ·ç«¯æ‰€éœ€è¦çš„æ•°æ®çš„èšåˆçº§åˆ«ä¸åŒï¼Œæ¯”å¦‚å¯¹åœ¨å„ç§å¾®æœåŠ¡ä¸­äº§ç”Ÿçš„éžè§„èŒƒåŒ–æ•°æ®å®žä½“ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æˆ‘ä»¬çš„ API ç½‘å…³æ¥è§£å†³è¿™äº›ä¾èµ–å…³ç³»å¹¶ä»Žå¤šä¸ªæœåŠ¡æ”¶é›†æ•°æ®ã€‚ åœ¨ä¸‹å›¾ä¸­ï¼Œæ‚¨å¯ä»¥çœ‹åˆ° API ç½‘å…³å¦‚ä½•å°†ç”¨æˆ·å’Œä¿¡ç”¨ä¿¡æ¯ä½œä¸ºä¸€ä¸ªæ•°æ®è¿”å›žç»™å®¢æˆ·ç«¯ã€‚è¯·æ³¨æ„ï¼Œè¿™äº›æ•°æ®ç”±ä¸åŒçš„å¾®æœåŠ¡æ‰€æ‹¥æœ‰å’Œç®¡ç†ã€‚ åºåˆ—åŒ–æ ¼å¼è½¬æ¢ æˆ‘ä»¬éœ€è¦æ”¯æŒå®¢æˆ·ç«¯ä¸åŒçš„æ•°æ®åºåˆ—åŒ–æ ¼å¼è¿™æ ·å­çš„éœ€æ±‚å¯èƒ½ä¼šå‘ç”Ÿã€‚ æƒ³è±¡ä¸€ä¸‹æˆ‘ä»¬çš„å¾®æœåŠ¡ä½¿ç”¨ JSON çš„æƒ…å†µï¼Œä½†æˆ‘ä»¬çš„å®¢æˆ·åªèƒ½ä½¿ç”¨ XML APIsã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ API ç½‘å…³ä¸­æŠŠ JSON è½¬æ¢ä¸º XMLï¼Œè€Œä¸æ˜¯åœ¨æ‰€æœ‰çš„å¾®æœåŠ¡å™¨ä¸­åˆ†åˆ«è¿›è¡Œå®žçŽ°ã€‚ åè®®è½¬æ¢ å¾®æœåŠ¡æž¶æž„å…è®¸å¤šé€šé“åè®®ä¼ è¾“ä»Žè€ŒèŽ·å–å¤šç§æŠ€æœ¯çš„ä¼˜åŠ¿ã€‚ç„¶è€Œï¼Œå¤§å¤šæ•°å®¢æˆ·ç«¯åªæ”¯æŒä¸€ä¸ªåè®®ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦è½¬æ¢å®¢æˆ·ç«¯çš„æœåŠ¡åè®®ã€‚ API ç½‘å…³è¿˜å¯ä»¥å¤„ç†å®¢æˆ·ç«¯å’Œå¾®æœåŠ¡å™¨ä¹‹é—´çš„åè®®è½¬æ¢ã€‚åœ¨ä¸‹ä¸€å¼ å›¾ç‰‡ä¸­ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°å®¢æˆ·ç«¯å¸Œæœ›é€šè¿‡ HTTP REST è¿›è¡Œçš„æ‰€æœ‰é€šä¿¡ï¼Œè€Œå†…éƒ¨çš„å¾®æœåŠ¡ä½¿ç”¨ gRPC å’Œ GraphQL ã€‚ é€ŸçŽ‡é™åˆ¶å’Œç¼“å­˜ åœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å¯ä»¥æŠŠé€šç”¨çš„å…±äº«é€»è¾‘ï¼ˆå¦‚èº«ä»½éªŒè¯ï¼‰æ”¾åœ¨ API ç½‘å…³ä¸­ã€‚é™¤äº†èº«ä»½éªŒè¯ä¹‹å¤–ï¼Œæ‚¨è¿˜å¯ä»¥åœ¨ API ç½‘å…³ä¸­å®žçŽ°é€ŸçŽ‡é™åˆ¶ï¼Œç¼“å­˜ä»¥åŠå„ç§å¯é æ€§åŠŸèƒ½ã€‚ è¶…è´Ÿè·çš„ API ç½‘å…³ åœ¨å®žçŽ°æ‚¨çš„ API ç½‘å…³æ—¶ï¼Œæ‚¨åº”é¿å…å°†éžé€šç”¨é€»è¾‘ï¼ˆå¦‚ç‰¹å®šæ•°æ®è½¬æ¢ï¼‰æ”¾å…¥æ‚¨çš„ç½‘å…³ã€‚ æœåŠ¡åº”è¯¥å§‹ç»ˆæ‹¥æœ‰ä»–ä»¬çš„æ•°æ®åŸŸçš„å…¨éƒ¨æ‰€æœ‰æƒã€‚æž„å»ºä¸€ä¸ªè¶…è´Ÿè·çš„ API ç½‘å…³ï¼Œè®©å¾®æœåŠ¡å›¢é˜Ÿæ¥æŽ§åˆ¶ï¼Œè¿™è¿èƒŒäº†å¾®æœåŠ¡çš„ç†å¿µã€‚ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½ åº”è¯¥å…³æ³¨ä½ çš„ API ç½‘å…³ä¸­çš„æ•°æ®èšåˆ - ä½ åº”è¯¥é¿å…å®ƒæœ‰å¤§é‡é€»è¾‘ç”šè‡³å¯ä»¥åŒ…å«ç‰¹å®šçš„æ•°æ®è½¬æ¢æˆ–è§„åˆ™å¤„ç†é€»è¾‘ã€‚ å§‹ç»ˆä¸ºæ‚¨çš„ API ç½‘å…³å®šä¹‰æ˜Žç¡®çš„è´£ä»»ï¼Œå¹¶ä¸”åªåŒ…æ‹¬å…¶ä¸­çš„é€šç”¨å…±äº«é€»è¾‘ã€‚ å®žçŽ°ä¸€ä¸ªAPI Gateway æ—¢ç„¶æˆ‘ä»¬å·²ç»çŸ¥é“äº†é‡‡ç”¨API Gatewayçš„åŠ¨æœºå’Œä¼˜ç¼ºç‚¹ï¼Œä¸‹é¢æ¥çœ‹åœ¨è®¾è®¡å®ƒæ—¶éœ€è¦è€ƒè™‘å“ªäº›äº‹æƒ…ã€‚ å¯¹äºŽå¤§å¤šæ•°åº”ç”¨ï¼ŒAPI Gatewayçš„æ€§èƒ½å’Œå¯æ‰©å±•æ€§ä¹Ÿæ˜¯éžå¸¸é‡è¦çš„ã€‚å› æ­¤ï¼Œåˆ›å»ºä¸€ä¸ªæ”¯æŒåŒæ­¥ã€éžé˜»å¡žI/Oçš„API Gatewayæ˜¯æœ‰æ„ä¹‰çš„ã€‚å·²ç»æœ‰ä¸åŒçš„æŠ€æœ¯å¯ä»¥ç”¨æ¥å®žçŽ°ä¸€ä¸ªå¯æ‰©å±•çš„API Gatewayã€‚åœ¨JVMä¸Šï¼Œé‡‡ç”¨åŸºäºŽNIOæŠ€æœ¯çš„æ¡†æž¶ï¼Œå¦‚Nettyï¼ŒVertxï¼ŒSpring Reactoræˆ–è€…JBoss Undertowã€‚Node.jsæ˜¯ä¸€ä¸ªéžJVMçš„æµè¡Œå¹³å°ï¼Œå®ƒæ˜¯ä¸€ä¸ªåœ¨Chromeçš„JavaScriptå¼•æ“ŽåŸºç¡€ä¸Šå»ºç«‹çš„å¹³å°ã€‚ä¸€ä¸ªå¯é€‰çš„æ–¹æ¡ˆæ˜¯ NGINX Plusã€‚NGINX Plusæä¾›ä¸€ä¸ªæˆç†Ÿçš„ã€å¯æ‰©å±•çš„ã€é«˜æ€§èƒ½webæœåŠ¡å™¨å’Œåå‘ä»£ç†ï¼Œå®ƒä»¬å‡å®¹æ˜“éƒ¨ç½²ã€é…ç½®å’ŒäºŒæ¬¡å¼€å‘ã€‚NGINX Pluså¯ä»¥ç®¡ç†æŽˆæƒã€æƒé™æŽ§åˆ¶ã€è´Ÿè½½å‡è¡¡ã€ç¼“å­˜å¹¶æä¾›åº”ç”¨å¥åº·æ£€æŸ¥å’Œç›‘æŽ§ã€‚ é‡‡ç”¨ååº”æ€§ç¼–ç¨‹æ¨¡åž‹ å¯¹äºŽæœ‰äº›è¯·æ±‚ï¼ŒAPI Gatewayå¯ä»¥é€šè¿‡ç›´æŽ¥è·¯ç”±è¯·æ±‚åˆ°å¯¹åº”çš„åŽç«¯æœåŠ¡ä¸Šçš„æ–¹å¼æ¥å¤„ç†ã€‚å¯¹äºŽå¦å¤–ä¸€äº›è¯·æ±‚ï¼Œå®ƒéœ€è¦è°ƒç”¨å¤šä¸ªåŽç«¯æœåŠ¡å¹¶åˆå¹¶ç»“æžœæ¥å¤„ç†ã€‚å¯¹äºŽä¸€äº›è¯·æ±‚ï¼Œä¾‹å¦‚äº§å“æœ€ç»ˆé¡µé¢è¯·æ±‚ï¼Œå‘ç»™åŽç«¯æœåŠ¡çš„è¯·æ±‚æ˜¯ç›¸äº’ç‹¬ç«‹çš„ã€‚ä¸ºäº†æœ€å°åŒ–å“åº”æ—¶é—´ï¼ŒAPI Gatewayåº”è¯¥å¹¶å‘çš„å¤„ç†ç›¸äº’ç‹¬ç«‹çš„è¯·æ±‚ã€‚ä½†æ˜¯ï¼Œæœ‰æ—¶å€™è¯·æ±‚ä¹‹é—´æ˜¯æœ‰ä¾èµ–çš„ã€‚API Gatewayå¯èƒ½éœ€è¦å…ˆé€šè¿‡æŽˆæƒæœåŠ¡æ¥éªŒè¯è¯·æ±‚ï¼Œç„¶åŽåœ¨è·¯ç”±åˆ°åŽç«¯æœåŠ¡ã€‚ç±»ä¼¼çš„ï¼Œä¸ºäº†èŽ·å¾—å®¢æˆ·çš„äº§å“æ„¿æœ›æ¸…å•ï¼Œéœ€è¦å…ˆèŽ·å–è¯¥ç”¨æˆ·çš„èµ„æ–™ï¼Œç„¶åŽè¿”å›žæ¸…å•ä¸Š äº§å“çš„ä¿¡æ¯ã€‚è¿™æ ·çš„ä¸€ä¸ªAPI ç»„ä»¶æ˜¯ Netflix Video Gridã€‚ åˆ©ç”¨ä¼ ç»Ÿçš„åŒæ­¥å›žè°ƒæ–¹æ³•æ¥å®žçŽ°APIåˆå¹¶çš„ä»£ç ä¼šä½¿å¾—ä½ è¿›å…¥å›žè°ƒå‡½æ•°çš„å™©æ¢¦ä¸­ã€‚è¿™ç§ä»£ç å°†éžå¸¸éš¾åº¦ä¸”éš¾ä»¥ç»´æŠ¤ã€‚ä¸€ä¸ªä¼˜é›…çš„è§£å†³æ–¹æ¡ˆæ˜¯é‡‡ç”¨ååº”æ€§ç¼–ç¨‹æ¨¡å¼æ¥å®žçŽ°ã€‚ç±»ä¼¼çš„ååº”æŠ½è±¡å®žçŽ°æœ‰Scalaçš„ Futureï¼ŒJava8çš„ CompletableFutureå’ŒJavaScriptçš„ Promiseã€‚åŸºäºŽå¾®è½¯.Netå¹³å°çš„æœ‰ Reactive Extensions(Rx)ã€‚Netflixä¸ºJVMçŽ¯å¢ƒåˆ›å»ºäº†RxJavaæ¥ä½¿ç”¨ä»–ä»¬çš„API Gatewayã€‚åŒæ ·åœ°ï¼ŒJavaScriptå¹³å°æœ‰RxJSï¼Œå¯ä»¥åœ¨æµè§ˆå™¨å’ŒNode.jså¹³å°ä¸Šè¿è¡Œã€‚é‡‡ç”¨ååº”ç¼–ç¨‹æ–¹æ³•å¯ä»¥å¸®åŠ©å¿«é€Ÿå®žçŽ°ä¸€ä¸ªé«˜æ•ˆçš„API Gatewayä»£ç ã€‚ æœåŠ¡è°ƒç”¨ ä¸€ä¸ªåŸºäºŽå¾®æœåŠ¡çš„åº”ç”¨æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå¹¶ä¸”å¿…é¡»é‡‡ç”¨çº¿ç¨‹é—´é€šä¿¡çš„æœºåˆ¶ã€‚æœ‰ä¸¤ç§çº¿ç¨‹é—´é€šä¿¡çš„æ–¹æ³•ã€‚ä¸€ç§æ˜¯é‡‡ç”¨åŒæ­¥æœºåˆ¶ï¼ŒåŸºäºŽæ¶ˆæ¯çš„æ–¹æ³•ã€‚è¿™ç±»çš„å®žçŽ°æ–¹æ³•æœ‰JMSå’ŒAMQPã€‚å¦å¤–çš„ï¼Œä¾‹å¦‚Zeromqå±žäºŽæœåŠ¡é—´ç›´æŽ¥é€šä¿¡ã€‚è¿˜æœ‰ä¸€ç§çº¿ç¨‹é—´é€šä¿¡é‡‡ç”¨å¼‚æ­¥æœºåˆ¶ï¼Œä¾‹å¦‚Thriftå’Œ HTTPã€‚äº‹å®žä¸Šä¸€ä¸ªç³»ç»Ÿä¼šåŒæ—¶é‡‡ç”¨åŒæ­¥å’Œå¼‚æ­¥ä¸¤ç§æœºåˆ¶ã€‚ç”±äºŽå®ƒçš„å®žçŽ°æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œå› æ­¤API Gatewayå°±éœ€è¦æ”¯æŒå¤šç§é€šä¿¡æ–¹å¼ã€‚ æœåŠ¡å‘çŽ° API Gatewayéœ€è¦çŸ¥é“æ¯ä¸€ä¸ªå¾®æœåŠ¡çš„IPå’Œç«¯å£ã€‚åœ¨ä¼ ç»Ÿåº”ç”¨ä¸­ï¼Œä½ å¯èƒ½ä¼šç¡¬ç¼–ç è¿™äº›åœ°å€ï¼Œä½†æ˜¯åœ¨çŽ°åœ¨äº‘åŸºç¡€çš„å¾®æœåŠ¡åº”ç”¨ä¸­ï¼Œè¿™å°†æ˜¯ä¸ªç®€å•çš„é—®é¢˜ã€‚åŸºç¡€æœåŠ¡é€šå¸¸ä¼šé‡‡ç”¨é™æ€åœ°å€ï¼Œå¯ä»¥é‡‡ç”¨æ“ä½œç³»ç»ŸçŽ¯å¢ƒå˜é‡æ¥æŒ‡å®šã€‚ä½†æ˜¯ï¼ŒæŽ¢æµ‹åº”ç”¨æœåŠ¡çš„åœ°å€å°±æ²¡é‚£ä¹ˆå®¹æ˜“äº†ã€‚åº”ç”¨æœåŠ¡é€šå¸¸åŠ¨æ€åˆ†é…åœ°å€å’Œç«¯å£ã€‚åŒæ ·çš„ï¼Œç”±äºŽæ‰©å±•æˆ–è€…å‡çº§ï¼ŒæœåŠ¡çš„å®žä¾‹ä¹Ÿä¼šåŠ¨æ€çš„æ”¹å˜ã€‚å› æ­¤ï¼ŒAPI Gatewayéœ€è¦é‡‡ç”¨ç³»ç»Ÿçš„æœåŠ¡å‘çŽ°æœºåˆ¶ï¼Œè¦ä¹ˆé‡‡ç”¨ æœåŠ¡ç«¯å‘çŽ°ï¼Œè¦ä¹ˆæ˜¯ å®¢æˆ·ç«¯å‘çŽ°ã€‚åŽç»­çš„ä¸€ç¯‡æ–‡ç« å°†ä¼šæ›´è¯¦ç»†çš„ä»‹ç»è¿™éƒ¨åˆ†ã€‚å¦‚æžœé‡‡ç”¨å®¢æˆ·ç«¯å‘çŽ°æœåŠ¡ï¼ŒAPI Gatewayå¿…é¡»è¦åŽ»æŸ¥è¯¢ æœåŠ¡æ³¨å†Œå¤„ï¼Œä¹Ÿå°±æ˜¯å¾®æœåŠ¡å®žä¾‹åœ°å€çš„æ•°æ®åº“ã€‚ å¤„ç†éƒ¨åˆ†å¤±è´¥ åœ¨å®žçŽ°API Gatewayè¿‡ç¨‹ä¸­ï¼Œå¦å¤–ä¸€ä¸ªéœ€è¦è€ƒè™‘çš„é—®é¢˜å°±æ˜¯éƒ¨åˆ†å¤±è´¥ã€‚è¿™ä¸ªé—®é¢˜å‘ç”Ÿåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å½“ä¸€ä¸ªæœåŠ¡è°ƒç”¨å¦å¤–ä¸€ä¸ªæœåŠ¡è¶…æ—¶æˆ–è€…ä¸å¯ç”¨çš„æƒ…å†µã€‚API Gatewayä¸åº”è¯¥è¢«é˜»æ–­å¹¶å¤„äºŽæ— é™æœŸç­‰å¾…ä¸‹æ¸¸æœåŠ¡çš„çŠ¶æ€ã€‚ä½†æ˜¯ï¼Œå¦‚ä½•å¤„ç†è¿™ç§å¤±è´¥ä¾èµ–äºŽç‰¹å®šçš„åœºæ™¯å’Œå…·ä½“æœåŠ¡ã€‚ä¾‹å¦‚ï¼Œå¦‚æžœæ˜¯åœ¨äº§å“è¯¦æƒ…é¡µçš„æŽ¨èæœåŠ¡æ¨¡å—æ— å“åº”ï¼Œé‚£ä¹ˆAPI Gatewayåº”è¯¥è¿”å›žå‰©ä¸‹çš„å…¶ä»–ä¿¡æ¯ç»™ç”¨æˆ·ï¼Œå› ä¸ºè¿™äº›ä¿¡æ¯ä¹Ÿæ˜¯æœ‰ç”¨çš„ã€‚æŽ¨èéƒ¨åˆ†å¯ä»¥è¿”å›žç©ºï¼Œä¹Ÿå¯ä»¥è¿”å›žå›ºå®šçš„é¡¶éƒ¨10ä¸ªç»™ç”¨æˆ·ã€‚ä½†æ˜¯ï¼Œå¦‚æžœæ˜¯äº§å“ä¿¡æ¯æœ åŠ¡æ— å“åº”ï¼Œé‚£ä¹ˆAPI Gatewayå°±åº”è¯¥ç»™å®¢æˆ·ç«¯è¿”å›žä¸€ä¸ªé”™è¯¯ã€‚ åœ¨ç¼“å­˜æœ‰æ•ˆçš„æ—¶å€™ï¼ŒAPI Gatewayåº”è¯¥èƒ½å¤Ÿè¿”å›žç¼“å­˜ã€‚ä¾‹å¦‚ï¼Œç”±äºŽäº§å“ä»·æ ¼å˜åŒ–å¹¶ä¸é¢‘ç¹ï¼ŒAPI Gatewayåœ¨ä»·æ ¼æœåŠ¡ä¸å¯ç”¨æ—¶åº”è¯¥è¿”å›žç¼“å­˜ä¸­çš„æ•°å€¼ã€‚è¿™ç±»æ•°æ®å¯ä»¥ç”±API Gatewayè‡ªèº«æ¥ç¼“å­˜ï¼Œä¹Ÿå¯ä»¥ç”±Redisæˆ–Memcachedè¿™ç±»å¤–éƒ¨ç¼“å­˜å®žçŽ°ã€‚é€šè¿‡è¿”å›žç¼“å­˜æ•°æ®æˆ–è€…é»˜è®¤æ•°æ®ï¼ŒAPI Gatewayæ¥ç¡®ä¿ç³»ç»Ÿé”™è¯¯ä¸å½±å“åˆ°ç”¨æˆ·ä½“éªŒã€‚ Netflix Hystrixå¯¹äºŽå®žçŽ°è¿œç¨‹æœåŠ¡è°ƒç”¨ä»£ç æ¥è¯´æ˜¯ä¸€ä¸ªéžå¸¸å¥½ç”¨çš„åº“ã€‚Hystrixè®°å½•é‚£äº›è¶…è¿‡é¢„è®¾å®šçš„æžé™å€¼çš„è°ƒç”¨ã€‚å®ƒå®žçŽ°äº† circuit breakæ¨¡ å¼ï¼Œä½¿å¾—å¯ä»¥å°†å®¢æˆ·ç«¯ä»Žæ— å“åº”æœåŠ¡çš„æ— å°½ç­‰å¾…ä¸­åœæ­¢ã€‚å¦‚æžœä¸€ä¸ªæœåŠ¡çš„é”™è¯¯çŽ‡è¶…è¿‡é¢„è®¾å€¼ï¼ŒHystrixå°†ä¸­æ–­æœåŠ¡ï¼Œå¹¶ä¸”åœ¨ä¸€æ®µæ—¶é—´å†…æ‰€æœ‰è¯·æ±‚ç«‹åˆ»å¤±æ•ˆã€‚ Hystrixå¯ä»¥ä¸ºè¯·æ±‚å¤±è´¥å®šä¹‰ä¸€ä¸ªfallbackæ“ä½œï¼Œä¾‹å¦‚è¯»å–ç¼“å­˜æˆ–è€…è¿”å›žé»˜è®¤å€¼ã€‚å¦‚æžœä½ åœ¨ç”¨JVMï¼Œå°±åº”è¯¥è€ƒè™‘ä½¿ç”¨Hystrixã€‚å¦‚æžœä½ é‡‡ç”¨ çš„éžJVMçŽ¯å¢ƒï¼Œé‚£ä¹ˆåº”è¯¥è€ƒè™‘é‡‡ç”¨ç±»ä¼¼åŠŸèƒ½çš„åº“ã€‚ æ€»ç»“ å¯¹äºŽå¤§å¤šæ•°å¾®æœåŠ¡åŸºç¡€çš„åº”ç”¨ï¼Œå®žçŽ°ä¸€ä¸ªAPI Gatewayéƒ½æ˜¯æœ‰æ„ä¹‰çš„ï¼Œå®ƒå°±åƒæ˜¯è¿›å…¥ç³»ç»Ÿçš„ä¸€ä¸ªæœåŠ¡æä¾›ç‚¹ã€‚API Gatewayè´Ÿè´£è¯·æ±‚è½¬å‘ã€è¯·æ±‚åˆæˆå’Œåè®®è½¬æ¢ã€‚å®ƒæä¾›ç»™åº”ç”¨å®¢æˆ·ç«¯ä¸€ä¸ªè‡ªå®šä¹‰çš„APIã€‚API Gatewayå¯ä»¥é€šè¿‡è¿”å›žç¼“å­˜æˆ–è€…é»˜è®¤å€¼çš„æ–¹å¼æ¥æŽ©ç›–åŽç«¯æœåŠ¡çš„é”™è¯¯ã€‚åœ¨æœ¬ç³»åˆ—çš„ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºæœåŠ¡é—´çš„é€šä¿¡é—®é¢˜ã€‚ ï¼ˆ4ï¼‰Node.js API ç½‘å…³ åœ¨ Node.js ä¸­ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ http-proxy è½¯ä»¶åŒ…ç®€å•åœ°ä»£ç†å¯¹ç‰¹å®šæœåŠ¡çš„è¯·æ±‚ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ›´å¤šä¸°å¯ŒåŠŸèƒ½çš„ express-gateway æ¥åˆ›å»º API ç½‘å…³ã€‚ åœ¨æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ª API ç½‘å…³ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åœ¨å°†ä»£ç å§”æ‰˜ç»™ user æœåŠ¡ä¹‹å‰éªŒè¯è¯·æ±‚ã€‚ 1234567891011121314const express = require('express')const httpProxy = require('express-http-proxy')const app = express()const userServiceProxy = httpProxy('https://user-service')// èº«ä»½è®¤è¯app.use((req, res, next) =&gt; &#123;// TODO: èº«ä»½è®¤è¯é€»è¾‘ next()&#125;)// ä»£ç†è¯·æ±‚app.get('/users/:userId', (req, res, next) =&gt; &#123; userServiceProxy(req, res, next)&#125;) å¦ä¸€ç§ç¤ºä¾‹å¯èƒ½æ˜¯åœ¨æ‚¨çš„ API ç½‘å…³ä¸­å‘å‡ºæ–°çš„è¯·æ±‚ï¼Œå¹¶å°†å“åº”è¿”å›žç»™å®¢æˆ·ç«¯ï¼š 12345678910const express = require('express')const request = require('request-promise-native')const app = express()// è§£å†³: GET /users/meapp.get('/users/me', async (req, res) =&gt; &#123; const userId = req.session.userId const uri = `https://user-service/users/$&#123;userId&#125;` const user = await request(uri) res.json(user)&#125;) Node.js API ç½‘å…³æ€»ç»“ API ç½‘å…³æä¾›äº†ä¸€ä¸ªå…±äº«å±‚ï¼Œä»¥é€šè¿‡å¾®æœåŠ¡æž¶æž„æ¥æ»¡è¶³å®¢æˆ·éœ€æ±‚ã€‚å®ƒæœ‰åŠ©äºŽä¿æŒæ‚¨çš„æœåŠ¡å°è€Œä¸“æ³¨ã€‚æ‚¨å¯ä»¥å°†ä¸åŒçš„é€šç”¨é€»è¾‘æ”¾å…¥æ‚¨çš„ API ç½‘å…³ï¼Œä½†æ˜¯æ‚¨åº”è¯¥é¿å… API ç½‘å…³çš„è¿‡åº¦ä½¿ç”¨ï¼Œå› ä¸ºå¾ˆå¤šé€»è¾‘å¯ä»¥ä»ŽæœåŠ¡å›¢é˜Ÿä¸­èŽ·å¾—æŽ§åˆ¶ã€‚]]></content>
      <categories>
        <category>work_summary</category>
      </categories>
      <tags>
        <tag>node.js</tag>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[01_common_commands]]></title>
    <url>%2F2019%2F04%2F22%2Fhexo-01-common-commands%2F</url>
    <content type="text"><![CDATA[01-hexoå¸¸ç”¨å‘½ä»¤æ‰‹å†Œ ç”Ÿæˆhexoé™æ€åšå®¢ æ–°å»ºelaineæ–‡ä»¶å¤¹ hexo init npm install hexo g hexo s #æœ¬åœ°é¢„è§ˆ ä¸ŽGithubå…³è” Githubä¸Šæ–°å»º githubåå­—.github.io çš„ä»“åº“ åœ¨elaine_config.ymlä¸­è®¾ç½®ï¼šå°†typeè®¾ç½®ä¸ºgitï¼ˆæ›¿æ¢æˆä½ è‡ªå·±çš„ä¿¡æ¯ï¼‰ï¼Œç„¶åŽ hexo gã€hexo d 1234deploy: type: git repo: git@github.com:ElaineXHZhong/ElaineXHZhong.github.io.git branch: master ç”¨nextä¸»é¢˜ï¼š å°†nextçš„è§£åŽ‹ç¼©æ–‡ä»¶æ”¾åœ¨elaine\themesä¸‹é¢ å°†elaineä¸‹çš„_config.ymlæ–‡ä»¶ä¿®æ”¹ï¼š theme: next ç”¨live2dåŠ¨ç”»ï¼š å°†elaineä¸‹çš„_config.ymlæ–‡ä»¶æ·»åŠ ï¼š 12345678910111213141516live2d: enable: true scriptFrom: local pluginRootPath: live2dw/ pluginJsPath: lib/ pluginModelPath: assets/ tagMode: false log: false model: use: live2d-widget-model-tororo display: position: right width: 150 height: 300 mobile: show: true æ·»åŠ èœå•é¡¹ï¼š åœ¨hexoä¸‹è¿è¡Œgit: hexo n page â€˜aboutâ€™ï¼Œï¼ˆä¼šåœ¨sourceä¸‹é¢å‡ºçŽ°aboutæ–‡ä»¶å¤¹ï¼Œä¿®æ”¹é‡Œé¢çš„.mdæ–‡ä»¶ï¼‰ ä¿®æ”¹themesä¸‹çš„nexté‡Œçš„_config.ymlæ–‡ä»¶ï¼Œæ·»åŠ ï¼š 123menu: home: / || home about: /about/ || user ä¿®æ”¹ï¼š 1language: zh-Hans ä¿®æ”¹themesä¸‹çš„nextä¸‹çš„languagesä¸‹çš„zh-Hans.ymlï¼š 123menu: home: é¦–é¡µ about: å…³äºŽ æ·»åŠ åˆ†ç±»ï¼š hexo n page â€˜categoriesâ€™ï¼ˆsourceä¸‹å‡ºçŽ°categoriesæ–‡ä»¶å¤¹ï¼Œä¿®æ”¹é‡Œé¢çš„.mdæ–‡ä»¶ï¼‰ï¼šï¼ˆæ·»åŠ type: â€œcategoriesâ€ï¼‰ 123title: categoriesdate: 2019-04-20 23:39:03type: "categories" ä»¥åŽæ¯æ¬¡ hexo n articleNameï¼ˆsourceä¸‹é¢çš„_postsä¼šå‡ºçŽ°ç›¸åº”æ–‡ç« ï¼‰ï¼Œåœ¨æ–‡ç« .mdæ–‡ä»¶ä¸­ç¼–è¾‘ï¼š 12345// æ–¹å¼1categories: ç¼–ç¨‹// æ–¹å¼2categories: -ç¼–ç¨‹ ç„¶åŽä¿®æ”¹elaineä¸‹çš„_config.ymlï¼š 12345# Category &amp; Tagdefault_category: uncategorizedcategory_map: ç¼–ç¨‹: programming # åˆ†ç±»åç§°ï¼šè®¿é—®è·¯å¾„tag_map: å°±å¯ä»¥æŠŠè¯¥æ–‡ç« åˆ†ç±»åˆ°â€˜programmingâ€™ç±»ï¼› æ ‡ç­¾çš„è®¾ç½®ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼š 12345678910---title: jQueryå¯¹è¡¨å•çš„æ“ä½œåŠæ›´å¤šåº”ç”¨date: 2017-05-26 12:12:57categories: - webå‰ç«¯tags:- jQuery- è¡¨æ ¼- è¡¨å•éªŒè¯--- è‡³æ­¤ï¼ŒæˆåŠŸç»™æ–‡ç« æ·»åŠ åˆ†ç±»ï¼Œç‚¹å‡»é¦–é¡µçš„â€œæ ‡ç­¾â€å¯ä»¥çœ‹åˆ°è¯¥æ ‡ç­¾ä¸‹çš„æ‰€æœ‰æ–‡ç« ã€‚å½“ç„¶ï¼Œåªæœ‰æ·»åŠ äº†tags: xxxçš„æ–‡ç« æ‰ä¼šè¢«æ”¶å½•åˆ°é¦–é¡µçš„â€œæ ‡ç­¾â€ä¸­ã€‚ ä¸¤ä¸ªçš„è®¾ç½®å‡ ä¹Žä¸€æ¨¡ä¸€æ ·ï¼ æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ‰“å¼€scaffolds/post.mdæ–‡ä»¶ï¼Œåœ¨tages:ä¸Šé¢åŠ å…¥categories:,ä¿å­˜åŽï¼Œä¹‹åŽæ‰§è¡Œhexo new æ–‡ç« åå‘½ä»¤ç”Ÿæˆçš„æ–‡ä»¶ï¼Œé¡µé¢é‡Œå°±æœ‰categories:é¡¹äº†ï¼š 1234title: &#123;&#123; title &#125;&#125;date: &#123;&#123; date &#125;&#125;categories: tags: å¼‚åœ°åŒæ­¥åšå®¢ï¼šå†³å®šåšå®¢æ˜¾ç¤ºå†…å®¹çš„åªæœ‰ä¸€ä¸ªPublicç›®å½•ï¼Œè€Œpublicç›®å½•åˆæ˜¯å¯ä»¥åŠ¨æ€ç”Ÿæˆçš„ï¼ˆhexo gï¼Œæ ¹æ®_config.ymlï¼Œsourceç›®å½•å’Œthemesç›®å½•ä¸‹çš„æ–‡ä»¶ç”Ÿæˆï¼‰ï¼Œåªè¦åœ¨ä¸åŒç”µè„‘ä¸ŠåŒæ­¥å¯ä»¥ç”ŸæˆPublicç›®å½•çš„æ–‡ä»¶å³å¯ã€‚ä»¥ä¸‹æ–‡ä»¶ä»¥åŠç›®å½•æ˜¯å¿…é¡»è¦åŒæ­¥çš„ï¼š source themes _config.yml db.json package.json .deploy_git]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[hello-world]]></title>
    <url>%2F2019%2F04%2F22%2Fhexo-00-hello-world%2F</url>
    <content type="text"><![CDATA[Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick Start Create a new post 1$ hexo new "My New Post" More info: Writing Run server 1$ hexo server More info: Server Generate static files 1$ hexo generate More info: Generating Deploy to remote sites 1$ hexo deploy More info: [Deployment](]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[12_Router]]></title>
    <url>%2F2019%2F04%2F22%2Fnodejs-12-Router%2F</url>
    <content type="text"><![CDATA[12- Node.jsè·¯ç”±å°è£… 01router.js 123456789101112131415161718192021222324252627282930313233343536373839404142434445//å¼•å…¥httpæ¨¡å—var http=require('http');var url=require('url');var ejs=require('ejs');var fs=require('fs');//è·¯ç”±:æŒ‡çš„å°±æ˜¯é’ˆå¯¹ä¸åŒè¯·æ±‚çš„ URLï¼Œå¤„ç†ä¸åŒçš„ä¸šåŠ¡é€»è¾‘ã€‚http.createServer(function(req,res)&#123; res.writeHead(200,&#123;"Content-Type":"text/html;charset='utf-8'"&#125;); //èŽ·å–get è¿˜æ˜¯postè¯·æ±‚ var method=req.method.toLowerCase(); //console.log(method); var pathname=url.parse(req.url,true).pathname; if(pathname=='/login')&#123; /*æ˜¾ç¤ºç™»å½•é¡µé¢*/ ejs.renderFile('views/form.ejs',&#123; &#125;,function(err,data)&#123; res.end(data); &#125;) &#125;else if(pathname=='/dologin' &amp;&amp;method=='get')&#123; /*æ‰§è¡Œç™»å½•çš„æ“ä½œ*/ //getèŽ·å–æ•°æ® console.log(url.parse(req.url,true).query); res.end('dologin'); &#125;else if(pathname=='/dologin' &amp;&amp;method=='post')&#123; /*æ‰§è¡Œç™»å½•çš„æ“ä½œ*/ var postStr=''; req.on('data',function(chunk)&#123; postStr+=chunk; &#125;) req.on('end',function(err,chunk)&#123; //res.end(postStr); console.log(postStr); fs.appendFile('login.txt',postStr+'\n',function(err)&#123; if(err)&#123; console.log(err); return; &#125; console.log('å†™å…¥æ•°æ®æˆåŠŸ'); &#125;) res.end("&lt;script&gt;alert('ç™»å½•æˆåŠŸ');history.back();&lt;/script&gt;") &#125;) &#125;else&#123; ejs.renderFile('views/index.ejs',&#123; &#125;,function(err,data)&#123; res.end(data); &#125;) &#125;&#125;).listen(8001); 02router.js 123456789101112131415161718//å¼•å…¥httpæ¨¡å—var http=require('http');var url=require('url');var model=require('./model/model.js');//model['login']('111','22');////è·¯ç”±:æŒ‡çš„å°±æ˜¯é’ˆå¯¹ä¸åŒè¯·æ±‚çš„ URLï¼Œå¤„ç†ä¸åŒçš„ä¸šåŠ¡é€»è¾‘ã€‚http.createServer(function(req,res)&#123; res.writeHead(200,&#123;"Content-Type":"text/html;charset='utf-8'"&#125;); var pathname=url.parse(req.url).pathname.replace('/',''); if(pathname!='favicon.ico') &#123; try &#123; model[pathname](req, res); &#125; catch (err) &#123; model['home'](req, res); &#125; &#125; //console.log(pathname);&#125;).listen(8001); 03demo.js 12345678910111213141516171819202122//index.jsvar route = require('./model/http-route.js');var app = route();var http = require('http');var server = http.createServer(app);app.get('/', function (req, res) &#123; res.send('Ã©Â¦â€“Ã©Â¡Âµ');&#125;);app.get('/login', function (req, res) &#123; res.send('login');&#125;);app.get('/register', function (req, res) &#123; res.send('register');&#125;);app.post('/test', function (req, res) &#123; console.log('POST', req.query); res.send(req.query);&#125;);server.listen(8080, function () &#123; console.log('listen ' + server.address().port);&#125;);]]></content>
      <categories>
        <category>node.js</category>
      </categories>
      <tags>
        <tag>node.js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[11_Get_Post]]></title>
    <url>%2F2019%2F04%2F22%2Fnodejs-11-Get-Post%2F</url>
    <content type="text"><![CDATA[11-GETã€POSTã€EJSã€é™æ€æ–‡ä»¶æ‰˜ç®¡ ä¸€ã€é™æ€æ–‡ä»¶æ‰˜ç®¡ å’Œé™æ€webæœåŠ¡æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡å¯¹é™æ€ web æœåŠ¡å™¨åšä¸€ä¸ªå°è£…ã€‚ äºŒã€è·¯ç”± å®˜æ–¹è§£é‡Šï¼š è·¯ç”±ï¼ˆRoutingï¼‰æ˜¯ç”±ä¸€ä¸ª URIï¼ˆæˆ–è€…å«è·¯å¾„ï¼‰å’Œä¸€ä¸ªç‰¹å®šçš„ HTTP æ–¹æ³•ï¼ˆGETã€POST ç­‰ï¼‰ç»„æˆ çš„ï¼Œæ¶‰åŠåˆ°åº”ç”¨å¦‚ä½•å“åº”å®¢æˆ·ç«¯å¯¹æŸä¸ªç½‘ç«™èŠ‚ç‚¹çš„è®¿é—®ã€‚ éžå®˜æ–¹è§£é‡Šï¼š è·¯ç”±æŒ‡çš„å°±æ˜¯é’ˆå¯¹ä¸åŒè¯·æ±‚çš„ URLï¼Œå¤„ç†ä¸åŒçš„ä¸šåŠ¡é€»è¾‘ã€‚ ä¸‰ã€è®¤è¯†EJSæ¨¡å—å¼•æ“Ž æˆ‘ä»¬å­¦çš„ EJS æ˜¯åŽå°æ¨¡æ¿ï¼Œå¯ä»¥æŠŠæˆ‘ä»¬æ•°æ®åº“å’Œæ–‡ä»¶è¯»å–çš„æ•°æ®æ˜¾ç¤ºåˆ° Html é¡µé¢ä¸Šé¢ã€‚å®ƒ æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œéœ€è¦é€šè¿‡ npm å®‰è£…ã€‚ 1npm install ejs â€“save 123ejs.renderFile(filename, data, options, function(err, str)&#123; // str =&gt; Rendered HTML string &#125;); EJS å¸¸ç”¨æ ‡ç­¾ &lt;% %&gt;æµç¨‹æŽ§åˆ¶æ ‡ç­¾ &lt;%= %&gt;è¾“å‡ºæ ‡ç­¾ï¼ˆåŽŸæ–‡è¾“å‡º HTML æ ‡ç­¾ï¼‰ &lt;%- %&gt;è¾“å‡ºæ ‡ç­¾ï¼ˆHTML ä¼šè¢«æµè§ˆå™¨è§£æžï¼‰ 123456&lt;a href="&lt;%= url %&gt;"&gt;&lt;img src="&lt;%= imageURL %&gt;" alt=""&gt;&lt;/a&gt;&lt;ul&gt;&lt;ul&gt; &lt;% for(var i = 0 ; i &lt; news.length ; i++)&#123; %&gt; &lt;li&gt;&lt;%= news[i] %&gt;&lt;/li&gt; &lt;% &#125; %&gt; &lt;/ul&gt; å››ã€Getã€Post è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆHTTPï¼‰çš„è®¾è®¡ç›®çš„æ˜¯ä¿è¯å®¢æˆ·ç«¯æœºå™¨ä¸ŽæœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡ã€‚ åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´è¿›è¡Œè¯·æ±‚-å“åº”æ—¶ï¼Œä¸¤ç§æœ€å¸¸è¢«ç”¨åˆ°çš„æ–¹æ³•æ˜¯ï¼šGET å’Œ POSTã€‚ GET - ä»ŽæŒ‡å®šçš„èµ„æºè¯·æ±‚æ•°æ®ã€‚ï¼ˆä¸€èˆ¬ç”¨äºŽèŽ·å–æ•°æ®ï¼‰ POST - å‘æŒ‡å®šçš„èµ„æºæäº¤è¦è¢«å¤„ç†çš„æ•°æ®ã€‚ï¼ˆä¸€èˆ¬ç”¨äºŽæäº¤æ•°æ®ï¼‰ 123èŽ·å– GET ä¼ å€¼ï¼š var urlinfo= url .parse(req.url,true); urlinfo.query(); 123456789101112èŽ·å– POST ä¼ å€¼ï¼š var postData = ''; // æ•°æ®å—æŽ¥æ”¶ä¸­ req.on('data', function (postDataChunk) &#123; postData += postDataChunk; &#125;); // æ•°æ®æŽ¥æ”¶å®Œæ¯•ï¼Œæ‰§è¡Œå›žè°ƒå‡½æ•° req.on('end', function () &#123; try &#123; postData = JSON.parse(postData); &#125;catch(e)&#123; &#125; req.query = postData; console.log(querystring .parse(postData)); &#125;); ä¾‹å­ï¼š 00services1.js 123456789//å¼•å…¥httpæ¨¡å—var http=require('http');//å¼•å…¥æ‰©å±•åçš„æ–¹æ³•æ˜¯åœ¨æ–‡ä»¶é‡Œé¢èŽ·å–åˆ°çš„ã€‚var router=require('./model/router.js');//console.log(mimeModel.getMime('.css')); //èŽ·å–æ–‡ä»¶ç±»åž‹http.createServer(function(req,res)&#123; //router.statics(req,res,'static'); console.log(req.url);&#125;).listen(8001); 00services2.js 12345678910111213141516//å¼•å…¥httpæ¨¡å—var http=require('http');var url=require('url');//è·¯ç”±:æŒ‡çš„å°±æ˜¯é’ˆå¯¹ä¸åŒè¯·æ±‚çš„ URLï¼Œå¤„ç†ä¸åŒçš„ä¸šåŠ¡é€»è¾‘ã€‚http.createServer(function(req,res)&#123; var pathname=url.parse(req.url).pathname; if(pathname=='/login')&#123; res.end('login'); &#125;else if(pathname=='/register')&#123; res.end('register'); &#125;else if(pathname=='/order')&#123; res.end('order'); &#125;else&#123; res.end('index'); &#125;&#125;).listen(8001); 00services3.js 123456789101112131415161718192021222324252627282930313233//å¼•å…¥httpæ¨¡å—var http=require('http');var url=require('url');var ejs=require('ejs');//è·¯ç”±:æŒ‡çš„å°±æ˜¯é’ˆå¯¹ä¸åŒè¯·æ±‚çš„ URLï¼Œå¤„ç†ä¸åŒçš„ä¸šåŠ¡é€»è¾‘ã€‚http.createServer(function(req,res)&#123; res.writeHead(200,&#123;"Content-Type":"text/html;charset='utf-8'"&#125;); var pathname=url.parse(req.url).pathname; if(pathname=='/login')&#123; var data='ä½ å¥½æˆ‘æ˜¯åŽå°æ•°æ®'; var list=[ '1111', '2222', '3333', ]; //æŠŠæ•°æ®åº“çš„æ•°æ®æ¸²æŸ“åˆ°æ¨¡æ¿ä¸Šé¢ ejs.renderFile('views/login.ejs',&#123; msg:data, list:list &#125;,function(err,data)&#123; res.end(data); &#125;) &#125;else&#123; var msg='è¿™æ˜¯æ³¨å†Œé¡µé¢ï¼Œä¹Ÿæ˜¯æ³¨å†Œçš„è·¯ç”±'; var h="&lt;h2&gt;è¿™æ˜¯ä¸€ä¸ªh2&lt;/h2&gt;" ejs.renderFile('views/register.ejs',&#123; msg:msg, h:h &#125;,function(err,data)&#123; res.end(data); &#125;) &#125;&#125;).listen(8001); get_post.js 123456789101112131415161718192021222324252627282930313233343536373839404142434445//å¼•å…¥httpæ¨¡å—var http=require('http');var url=require('url');var ejs=require('ejs');var fs=require('fs');//è·¯ç”±:æŒ‡çš„å°±æ˜¯é’ˆå¯¹ä¸åŒè¯·æ±‚çš„ URLï¼Œå¤„ç†ä¸åŒçš„ä¸šåŠ¡é€»è¾‘ã€‚http.createServer(function(req,res)&#123; res.writeHead(200,&#123;"Content-Type":"text/html;charset='utf-8'"&#125;); //èŽ·å–get è¿˜æ˜¯postè¯·æ±‚ var method=req.method.toLowerCase(); //console.log(method); var pathname=url.parse(req.url,true).pathname; if(pathname=='/login')&#123; /*æ˜¾ç¤ºç™»å½•é¡µé¢*/ ejs.renderFile('views/form.ejs',&#123; &#125;,function(err,data)&#123; res.end(data); &#125;) &#125;else if(pathname=='/dologin' &amp;&amp;method=='get')&#123; /*æ‰§è¡Œç™»å½•çš„æ“ä½œ*/ //getèŽ·å–æ•°æ® console.log(url.parse(req.url,true).query); res.end('dologin'); &#125;else if(pathname=='/dologin' &amp;&amp;method=='post')&#123; /*æ‰§è¡Œç™»å½•çš„æ“ä½œ*/ var postStr=''; req.on('data',function(chunk)&#123; postStr+=chunk; &#125;) req.on('end',function(err,chunk)&#123; //res.end(postStr); console.log(postStr); fs.appendFile('login.txt',postStr+'\n',function(err)&#123; if(err)&#123; console.log(err); return; &#125; console.log('å†™å…¥æ•°æ®æˆåŠŸ'); &#125;) res.end("&lt;script&gt;alert('ç™»å½•æˆåŠŸ');history.back();&lt;/script&gt;") &#125;) &#125;else&#123; ejs.renderFile('views/index.ejs',&#123; &#125;,function(err,data)&#123; res.end(data); &#125;) &#125;&#125;).listen(8001); login.txt 12username=zhangsan&amp;password=123username=zhangsan222&amp;password=3333 model/router.js 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950//fsæ¨¡å—var fs=require('fs');//pathæ¨¡å—var path=require('path'); /*nodejsè‡ªå¸¦çš„æ¨¡å—*///urlæ¨¡å—var url=require('url');//èŽ·å–æ–‡ä»¶ç±»åž‹çš„æ–¹æ³• ç§æœ‰function getMime(extname,callback)&#123; /*èŽ·å–åŽç¼€åçš„æ–¹æ³•*/ fs.readFile('./mime.json',function(err,data)&#123; if(err)&#123; console.log('mime.jsonæ–‡ä»¶ä¸å­˜åœ¨'); return false; &#125; //console.log(data.toString()); var Mimes=JSON.parse(data.toString()); var result= Mimes[extname] || 'text/html'; callback(result) &#125;)&#125;exports.statics=function(req,res,staticpath)&#123; var pathname=url.parse(req.url).pathname; /*èŽ·å–urlçš„å€¼*/ if(pathname=='/')&#123; pathname='/index.html'; /*é»˜è®¤åŠ è½½çš„é¦–é¡µ*/ &#125; //èŽ·å–æ–‡ä»¶çš„åŽç¼€å var extname=path.extname(pathname); if(pathname!='/favicon.ico')&#123; /*è¿‡æ»¤è¯·æ±‚favicon.ico*/ //console.log(pathname); //æ–‡ä»¶æ“ä½œèŽ·å– staticä¸‹é¢çš„index.html fs.readFile(staticpath+'/'+pathname,function(err,data)&#123; if(err)&#123; /*ä¹ˆæœ‰è¿™ä¸ªæ–‡ä»¶*/ console.log('404'); fs.readFile(staticpath+'/404.html',function(error,data404)&#123; if(error)&#123; console.log(error); &#125; res.writeHead(404,&#123;"Content-Type":"text/html;charset='utf-8'"&#125;); res.write(data404); res.end(); /*ç»“æŸå“åº”*/ &#125;) &#125;else&#123; /*è¿”å›žè¿™ä¸ªæ–‡ä»¶*/ getMime(extname,function(mime)&#123; res.writeHead(200,&#123;"Content-Type":""+mime+";charset='utf-8'"&#125;); res.write(data); res.end(); /*ç»“æŸå“åº”*/ &#125;); &#125; &#125;) &#125;&#125;]]></content>
      <categories>
        <category>node.js</category>
      </categories>
      <tags>
        <tag>node.js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[10_Callback_Event]]></title>
    <url>%2F2019%2F04%2F22%2Fnodejs-10-Callback-Event%2F</url>
    <content type="text"><![CDATA[10-Nodejså›žè°ƒå’Œäº‹ä»¶é©±åŠ¨ ä¸€ã€ Node.jsçš„å•çº¿ç¨‹ã€éžé˜»å¡ž I/Oã€äº‹ä»¶é©±åŠ¨ åœ¨ Javaã€PHP æˆ–è€….net ç­‰æœåŠ¡å™¨ç«¯è¯­è¨€ä¸­ï¼Œä¼šä¸ºæ¯ä¸€ä¸ªå®¢æˆ·ç«¯è¿žæŽ¥åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹ã€‚ è€Œæ¯ä¸ªçº¿ç¨‹éœ€è¦è€—è´¹å¤§çº¦ 2MB å†…å­˜ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç†è®ºä¸Šï¼Œä¸€ä¸ª 8GB å†…å­˜çš„æœåŠ¡å™¨å¯ä»¥åŒæ—¶ è¿žæŽ¥çš„æœ€å¤§ç”¨æˆ·æ•°ä¸º 4000 ä¸ªå·¦å³ã€‚è¦è®©Webåº”ç”¨ç¨‹åºæ”¯æŒæ›´å¤šçš„ç”¨æˆ·ï¼Œå°±éœ€è¦å¢žåŠ æœåŠ¡å™¨ çš„æ•°é‡ï¼Œè€Œ Web åº”ç”¨ç¨‹åºçš„ç¡¬ä»¶æˆæœ¬å½“ç„¶å°±ä¸Šå‡äº†ã€‚ Node.js ä¸ä¸ºæ¯ä¸ªå®¢æˆ·è¿žæŽ¥åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œè€Œä»…ä»…ä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹ã€‚å½“æœ‰ç”¨æˆ·è¿žæŽ¥äº†ï¼Œ å°±è§¦å‘ä¸€ä¸ªå†…éƒ¨äº‹ä»¶ï¼Œé€šè¿‡éžé˜»å¡ž I/Oã€äº‹ä»¶é©±åŠ¨æœºåˆ¶ï¼Œè®© Node.js ç¨‹åºå®è§‚ä¸Šä¹Ÿæ˜¯å¹¶è¡Œçš„ã€‚ ä½¿ç”¨ Node.jsï¼Œä¸€ä¸ª 8GB å†…å­˜çš„æœåŠ¡å™¨ï¼Œå¯ä»¥åŒæ—¶å¤„ç†è¶…è¿‡4 ä¸‡ç”¨æˆ·çš„è¿žæŽ¥ã€‚ äºŒã€Node.jså›žè°ƒå¤„ç†å¼‚æ­¥ é”™è¯¯çš„å†™æ³•ï¼š 123456789function getData ()&#123; // æ¨¡æ‹Ÿè¯·æ±‚æ•°æ® var result=''; setTimeout (function()&#123; result='è¿™æ˜¯è¯·æ±‚åˆ°çš„æ•°æ®' &#125;,200); return result; &#125; console .log( getData ()); /* å¼‚æ­¥å¯¼è‡´è¯·æ±‚ä¸åˆ°æ•°æ® */ æ­£ç¡®çš„å†™æ³•ï¼š 1234567891011function getData (callback)&#123; // æ¨¡æ‹Ÿè¯·æ±‚æ•°æ® var result=''; setTimeout (function()&#123; result='è¿™æ˜¯è¯·æ±‚åˆ°çš„æ•°æ®'; callback(result); &#125;,200); &#125; getData (function( data )&#123; console.log(data) ; &#125;) é”™è¯¯çš„å†™æ³•ï¼š(éžé˜»å¡ž) 12345678910111213141516171819202122var fs=require('fs');//éžé˜»å¡žio//console.log('1');////fs.readFile('mime.json',function(err,data)&#123;// //console.log(data);// console.log('2');//&#125;)////console.log('3');function getMime()&#123; //1 fs.readFile('mime.json',function(err,data)&#123; //console.log(data.toString()); return data;//3 &#125;) //2 //return '123';&#125;console.log(getMime()); /*æœ‰é—®é¢˜*/ æ­£ç¡®çš„å†™æ³•ï¼š(å›žè°ƒå‡½æ•°) 1234567891011var fs=require('fs');function getMime(callback)&#123; fs.readFile('mime.json',function(err,data)&#123; //console.log(data.toString()); //return data; callback(data); &#125;)&#125;getMime(function(result)&#123; console.log(result.toString());&#125;) ä¸‰ã€Node.js events æ¨¡å—å¤„ç†å¼‚æ­¥ Node.js äº‹ä»¶å¾ªçŽ¯: Node.js æ˜¯å•è¿›ç¨‹å•çº¿ç¨‹åº”ç”¨ç¨‹åºï¼Œä½†æ˜¯é€šè¿‡äº‹ä»¶å’Œå›žè°ƒæ”¯æŒå¹¶å‘ï¼Œæ‰€ä»¥æ€§èƒ½éžå¸¸é«˜ã€‚Node.js çš„æ¯ä¸€ä¸ª API éƒ½æ˜¯å¼‚æ­¥çš„ï¼Œå¹¶ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çº¿ç¨‹è¿è¡Œï¼Œä½¿ç”¨å¼‚æ­¥å‡½æ•°è°ƒç”¨ï¼Œå¹¶å¤„ç†å¹¶å‘ã€‚Node.js æœ‰å¤šä¸ªå†…ç½®çš„äº‹ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¼•å…¥ events æ¨¡å—ï¼Œå¹¶é€šè¿‡å®žä¾‹åŒ– EventEmitter ç±»æ¥ç»‘å®šå’Œç›‘å¬äº‹ä»¶ã€‚ 1234567891011// å¼•å…¥eventsæ¨¡å— var events = require ('events'); var EventEmitter =new events.EventEmitter(); /* å®žä¾‹åŒ–äº‹ä»¶å¯¹è±¡ */ // å¹¿æ’­å’ŒæŽ¥æ”¶å¹¿æ’­(ä¹Ÿå°±æ˜¯äº‹ä»¶é©±åŠ¨)EventEmitter.on('to_parent',function()&#123; // ç›‘å¬to_parentçš„å¹¿æ’­ //onç›‘å¬ä¸€ä¸ªå¹¿æ’­ console.log('æŽ¥æ”¶åˆ°äº†to_parentè¿™ä¸ªå¹¿æ’­äº‹ä»¶'); &#125;) setTimeout(function()&#123; // è¿‡1ç§’åŽè§¦å‘ä¸€ä¸ªå®šæ—¶å™¨(ä¸€ä¸ªå¹¿æ’­) console.log('å¼€å§‹å¹¿æ’­äº†...'); EventEmitter.emit('to_parent','ä½ è¦å‘é€çš„æ•°æ®'); /* å‘é€å¹¿æ’­ */ //emitè§¦å‘ä¸€ä¸ªå¹¿æ’­&#125;,1000) ç¨‹åºæµç¨‹ï¼šè¿›æ¥åŽç›‘å¬to_parentè¿™ä¸ªå¹¿æ’­ï¼ˆè¿˜æ²¡æœ‰æ‰§è¡Œï¼‰ï¼Œç­‰åˆ°1ç§’åŽemitå¹¿æ’­äº†ä»¥åŽï¼Œå®ƒæ‰ä¼šç›‘å¬åˆ°è¿™ä¸ªäº‹ä»¶ã€‚å¯ä»¥åœ¨oné‡Œé¢console.log(data)æ¥å¾—åˆ°è¦å‘é€çš„æ•°æ®ã€‚ 12345678var events = require('events');var EventEmitter = new events.EventEmitter();EventEmitter.on('to_parent',function(data)&#123; console.log(data); // è¿™ä¸ªdataå°±æ˜¯ä¸‹é¢emitå‘é€çš„æ•°æ®&#125;)setTimeout(function()&#123; EventEmitter.emit('to_parent','è¦å‘é€çš„æ•°æ®');&#125;) æ³¨æ„çœ‹ä¸‹é¢å¹¿æ’­äº‹ä»¶çš„é¡ºåºï¼š 12345678910111213141516171819var events=require('events');var EventEmitter=new events.EventEmitter();EventEmitter.on('to_mime',function(data)&#123; console.log(data);&#125;)//ç›‘å¬to_parentçš„å¹¿æ’­EventEmitter.on('to_parent',function(data)&#123; //console.log('æŽ¥æ”¶åˆ°äº†è¿™ä¸ªå¹¿æ’­äº‹ä»¶'); console.log(data); EventEmitter.emit('to_mime','ç»™mimeå‘é€çš„æ•°æ®')&#125;)setTimeout(function()&#123; console.log('å¼€å§‹å¹¿æ’­...'); //å¹¿æ’­to_parentäº‹ä»¶ EventEmitter.emit('to_parent','å‘é€çš„æ•°æ®')&#125;,1000);//å¼€å§‹å¹¿æ’­...//å‘é€çš„æ•°æ®//ç»™mimeå‘é€çš„æ•°æ® é¦–å…ˆï¼Œå¼€å§‹å¹¿æ’­ï¼Œæ‰“å°å‡ºâ€™å¼€å§‹å¹¿æ’­â€¦â€™ï¼Œå› ä¸ºé¦–å…ˆç›‘å¬å¹¿æ’­ï¼Œå®ƒåªç›‘å¬ä½†æ˜¯ä¸ä¼šæ‰§è¡Œå›žè°ƒå‡½æ•°ï¼›å½“é€šè¿‡EventEmitter.emit()å¹¿æ’­ä»¥åŽï¼ŒEventEmitter.on()å°±æŽ¥æ”¶åˆ°äº†å¹¿æ’­ï¼Œæ‰ä¼šè§¦å‘é‡Œé¢çš„å›žè°ƒå‡½æ•°ï¼›åœ¨å›žè°ƒå‡½æ•°é‡Œåˆå¹¿æ’­äº†ä¸€æ¬¡ ã€‚ Node.jsäº‹ä»¶é©±åŠ¨èŽ·å–æ•°æ®ï¼š 12345678910111213var fs=require('fs');var events=require('events');var EventEmitter=new events.EventEmitter();function getMime(callback)&#123; fs.readFile('mime.json',function(err,data)&#123; EventEmitter.emit('data',data) &#125;)&#125;getMime();/*æ‰§è¡Œæ–¹æ³•*///ç›‘å¬å¹¿æ’­æ•°æ®EventEmitter.on('data',function(mime)&#123; console.log(mime.toString());&#125;)]]></content>
      <categories>
        <category>node.js</category>
      </categories>
      <tags>
        <tag>node.js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[09_Create_Server]]></title>
    <url>%2F2019%2F04%2F22%2Fnodejs-09-Create-Server%2F</url>
    <content type="text"><![CDATA[09-åˆ©ç”¨httpæ¨¡å—ã€urlæ¨¡å—ã€pathæ¨¡å—åˆ›å»ºä¸€ä¸ªwebæœåŠ¡å™¨ ä¸€ã€Node.js åˆ›å»ºçš„ç¬¬ä¸€ä¸ªåº”ç”¨ 123456789101112//1. å¼•å…¥http æ¨¡å— const http = require ('http'); //2. ç”¨httpæ¨¡å—åˆ›å»ºæœåŠ¡ http.createServer(function(req,res)&#123; // å‘é€HTTPå¤´éƒ¨ // HTTPçŠ¶æ€å€¼:200 : OK // è®¾ç½®HTTPå¤´éƒ¨ï¼ŒçŠ¶æ€ç æ˜¯200ï¼Œæ–‡ä»¶ç±»åž‹æ˜¯htmlï¼Œå­—ç¬¦é›†æ˜¯utf-8 res.writeHead(200,&#123;"Content-Type":"text/html;charset='utf-8'"&#125;); res.write('ä½ å¥½ nodejs'); res.write('æˆ‘æ˜¯ç¬¬ä¸€ä¸ª nodejs ç¨‹åº'); res.end(); /* ç»“æŸå“åº” */ &#125;).listen(8001); äºŒã€WEB æœåŠ¡å™¨ä»‹ç» Web æœåŠ¡å™¨ä¸€èˆ¬æŒ‡ç½‘ç«™æœåŠ¡å™¨ï¼Œæ˜¯æŒ‡é©»ç•™äºŽå› ç‰¹ç½‘ä¸ŠæŸç§ç±»åž‹è®¡ç®—æœºçš„ç¨‹åºï¼Œå¯ä»¥å‘æµè§ˆå™¨ç­‰Web å®¢æˆ·ç«¯æä¾›æ–‡æ¡£ï¼Œä¹Ÿå¯ä»¥æ”¾ç½®ç½‘ç«™æ–‡ä»¶ï¼Œè®©å…¨ä¸–ç•Œæµè§ˆï¼›å¯ä»¥æ”¾ç½®æ•°æ®æ–‡ä»¶ï¼Œè®©å…¨ä¸–ç•Œä¸‹è½½ã€‚ç›®å‰æœ€ä¸»æµçš„ä¸‰ä¸ª Web æœåŠ¡å™¨æ˜¯ Apache Nginx IISã€‚ é™æ€æœåŠ¡å™¨ï¼šå°±æ˜¯ä¸æ”¯æŒåŠ¨æ€é¡µé¢å’Œæ”¯æŒæ•°æ®åº“çš„æœåŠ¡å™¨ç©ºé—´ï¼Œè¿™æ ·çš„æœåŠ¡å™¨ä¸€èˆ¬å°±åªèƒ½æ”¾æ–‡ä»¶æˆ–è€…é™æ€çš„é¡µé¢ï¼Œä¸€èˆ¬ä¹Ÿå°±æ˜¯htmlç»“å°¾æˆ–è€…htmç»“å°¾çš„é¡µé¢ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738var http = require('http');var fs = require('fs');var path = require('path');var url = require('url');var mimeModel = require('./model/getmime.js');console.log(mimeModel.getMime('.html'));http.createServer(function(req,res)&#123; // req.urlèƒ½æ‹¿åˆ°æµè§ˆå™¨çš„è¾“å…¥åœ°å€ // var pathname = req.url; var pathname = url.parse(req.url).pathname; var extname = path.extname(pathname); var mime = mimeModel.getMime(extname); // èŽ·å–æ–‡ä»¶ç±»åž‹ if(pathname=='/')&#123; pathname = 'json/index.html'; // é»˜è®¤åŠ è½½çš„é¦–é¡µ &#125; if(pathname!='/favicon.ico')&#123; //è¿‡æ»¤favicon.icoè¯·æ±‚ console.log(pathname); fs.readFile('static/'+pathname,function(err,data)&#123; if(err)&#123; console.log('404'); fs.readFile('static/json/404.html',function(err,data404)&#123; if(err)&#123; console.log(err); &#125;else&#123; // res.writeHead(200,&#123;"Content-Type":"text/html;charset='utf-8'"&#125;); res.writeHead(200,&#123;"Content-Type":""+mime+";charset='utf-8'"&#125;); res.write(data404); res.end(); &#125; &#125;) &#125;else&#123; res.writeHead(200,&#123;"Content-Type":""+mime+";charset='utf-8'"&#125;); res.write(data); res.end(); &#125; &#125;) &#125;&#125;).listen(8888); 00services1.js 1234567891011121314151617181920212223242526//å¼•å…¥httpæ¨¡å—var http=require('http');//fsæ¨¡å—var fs=require('fs');http.createServer(function(req,res)&#123; //http://localhost:8001/news.html /news.html //http://localhost:8001/index.html /index.html //css/dmb.bottom.css var pathname=req.url; if(pathname=='/')&#123; pathname='/index.html'; /*é»˜è®¤åŠ è½½çš„é¦–é¡µ*/ &#125; if(pathname!='/favicon.ico')&#123; /*è¿‡æ»¤è¯·æ±‚favicon.ico*/ console.log(pathname); //æ–‡ä»¶æ“ä½œèŽ·å– staticä¸‹é¢çš„index.html fs.readFile('static/'+pathname,function(err,data)&#123; if(err)&#123; /*ä¹ˆæœ‰è¿™ä¸ªæ–‡ä»¶*/ console.log('404'); &#125;else&#123; /*è¿”å›žè¿™ä¸ªæ–‡ä»¶*/ res.writeHead(200,&#123;"Content-Type":"text/html;charset='utf-8'"&#125;); res.write(data); res.end(); /*ç»“æŸå“åº”*/ &#125; &#125;) &#125;&#125;).listen(8001); 00services2.js 1234567891011121314151617181920212223242526272829303132333435363738394041//å¼•å…¥httpæ¨¡å—var http=require('http');//fsæ¨¡å—var fs=require('fs');//pathæ¨¡å—var path=require('path'); /*nodejsè‡ªå¸¦çš„æ¨¡å—*/var mimeModel=require('./model/getmime.js');//console.log(mime.getMime('.css')); //èŽ·å–æ–‡ä»¶ç±»åž‹http.createServer(function(req,res)&#123; //http://localhost:8001/news.html /news.html //http://localhost:8001/index.html /index.html //css/dmb.bottom.css var pathname=req.url; if(pathname=='/')&#123; pathname='/index.html'; /*é»˜è®¤åŠ è½½çš„é¦–é¡µ*/ &#125; //èŽ·å–æ–‡ä»¶çš„åŽç¼€å var extname=path.extname(pathname); if(pathname!='/favicon.ico')&#123; /*è¿‡æ»¤è¯·æ±‚favicon.ico*/ //console.log(pathname); //æ–‡ä»¶æ“ä½œèŽ·å– staticä¸‹é¢çš„index.html fs.readFile('static/'+pathname,function(err,data)&#123; if(err)&#123; /*ä¹ˆæœ‰è¿™ä¸ªæ–‡ä»¶*/ console.log('404'); fs.readFile('static/404.html',function(error,data404)&#123; if(error)&#123; console.log(error); &#125; res.writeHead(404,&#123;"Content-Type":"text/html;charset='utf-8'"&#125;); res.write(data404); res.end(); /*ç»“æŸå“åº”*/ &#125;) &#125;else&#123; /*è¿”å›žè¿™ä¸ªæ–‡ä»¶*/ var mime=mimeModel.getMime(extname); /*èŽ·å–æ–‡ä»¶ç±»åž‹*/ res.writeHead(200,&#123;"Content-Type":""+mime+";charset='utf-8'"&#125;); res.write(data); res.end(); /*ç»“æŸå“åº”*/ &#125; &#125;) &#125;&#125;).listen(8001); 00services3.js 123456789101112131415161718192021222324252627282930313233343536373839404142434445//å¼•å…¥httpæ¨¡å—var http=require('http');//fsæ¨¡å—var fs=require('fs');//pathæ¨¡å—var path=require('path'); /*nodejsè‡ªå¸¦çš„æ¨¡å—*///urlæ¨¡å—var url=require('url');var mimeModel=require('./model/getmime.js');//console.log(mime.getMime('.css')); //èŽ·å–æ–‡ä»¶ç±»åž‹http.createServer(function(req,res)&#123; //http://localhost:8001/news.html /news.html //http://localhost:8001/index.html /index.html //css/dmb.bottom.css //xxx.json?214214124 var pathname=url.parse(req.url).pathname; console.log(pathname); if(pathname=='/')&#123; pathname='/index.html'; /*é»˜è®¤åŠ è½½çš„é¦–é¡µ*/ &#125; //èŽ·å–æ–‡ä»¶çš„åŽç¼€å var extname=path.extname(pathname); if(pathname!='/favicon.ico')&#123; /*è¿‡æ»¤è¯·æ±‚favicon.ico*/ //console.log(pathname); //æ–‡ä»¶æ“ä½œèŽ·å– staticä¸‹é¢çš„index.html fs.readFile('static/'+pathname,function(err,data)&#123; if(err)&#123; /*ä¹ˆæœ‰è¿™ä¸ªæ–‡ä»¶*/ console.log('404'); fs.readFile('static/404.html',function(error,data404)&#123; if(error)&#123; console.log(error); &#125; res.writeHead(404,&#123;"Content-Type":"text/html;charset='utf-8'"&#125;); res.write(data404); res.end(); /*ç»“æŸå“åº”*/ &#125;) &#125;else&#123; /*è¿”å›žè¿™ä¸ªæ–‡ä»¶*/ var mime=mimeModel.getMime(extname); /*èŽ·å–æ–‡ä»¶ç±»åž‹*/ res.writeHead(200,&#123;"Content-Type":""+mime+";charset='utf-8'"&#125;); res.write(data); res.end(); /*ç»“æŸå“åº”*/ &#125; &#125;) &#125;&#125;).listen(8001); 00services4.js 1234567891011//å¼•å…¥httpæ¨¡å—var http=require('http');//fsæ¨¡å—var fs=require('fs');//pathæ¨¡å—var path=require('path'); /*nodejsè‡ªå¸¦çš„æ¨¡å—*///urlæ¨¡å—var url=require('url');var mimeModel=require('./model/getmimefromfile.js');//console.log(); //èŽ·å–æ–‡ä»¶ç±»åž‹console.log(mimeModel.getMime(fs, '.css')); 00services5.js 12345678910111213141516171819202122232425262728293031323334353637383940414243444546//å¼•å…¥httpæ¨¡å—var http=require('http');//fsæ¨¡å—var fs=require('fs');//pathæ¨¡å—var path=require('path'); /*nodejsè‡ªå¸¦çš„æ¨¡å—*///urlæ¨¡å—var url=require('url');//å¼•å…¥æ‰©å±•åçš„æ–¹æ³•æ˜¯åœ¨æ–‡ä»¶é‡Œé¢èŽ·å–åˆ°çš„ã€‚var mimeModel=require('./model/getmimefromfile.js');//console.log(mimeModel.getMime('.css')); //èŽ·å–æ–‡ä»¶ç±»åž‹http.createServer(function(req,res)&#123; //http://localhost:8001/news.html /news.html //http://localhost:8001/index.html /index.html //css/dmb.bottom.css //xxx.json?214214124 var pathname=url.parse(req.url).pathname; console.log(pathname); if(pathname=='/')&#123; pathname='/index.html'; /*é»˜è®¤åŠ è½½çš„é¦–é¡µ*/ &#125; //èŽ·å–æ–‡ä»¶çš„åŽç¼€å var extname=path.extname(pathname); if(pathname!='/favicon.ico')&#123; /*è¿‡æ»¤è¯·æ±‚favicon.ico*/ //console.log(pathname); //æ–‡ä»¶æ“ä½œèŽ·å– staticä¸‹é¢çš„index.html fs.readFile('static/'+pathname,function(err,data)&#123; if(err)&#123; /*ä¹ˆæœ‰è¿™ä¸ªæ–‡ä»¶*/ console.log('404'); fs.readFile('static/404.html',function(error,data404)&#123; if(error)&#123; console.log(error); &#125; res.writeHead(404,&#123;"Content-Type":"text/html;charset='utf-8'"&#125;); res.write(data404); res.end(); /*ç»“æŸå“åº”*/ &#125;) &#125;else&#123; /*è¿”å›žè¿™ä¸ªæ–‡ä»¶*/ var mime=mimeModel.getMime(fs,extname); /*èŽ·å–æ–‡ä»¶ç±»åž‹*/ res.writeHead(200,&#123;"Content-Type":""+mime+";charset='utf-8'"&#125;); res.write(data); res.end(); /*ç»“æŸå“åº”*/ &#125; &#125;) &#125;&#125;).listen(8002); 00services6.js 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950//å¼•å…¥httpæ¨¡å—var http=require('http');//fsæ¨¡å—var fs=require('fs');//pathæ¨¡å—var path=require('path'); /*nodejsè‡ªå¸¦çš„æ¨¡å—*///urlæ¨¡å—var url=require('url');var events=require('events');var EventEmitter=new events.EventEmitter();var mimeModel=require('./model/getmimefromfile_events.js');//å¼•å…¥æ‰©å±•åçš„æ–¹æ³•æ˜¯åœ¨æ–‡ä»¶é‡Œé¢èŽ·å–åˆ°çš„ã€‚//console.log(mimeModel.getMime('.css')); //èŽ·å–æ–‡ä»¶ç±»åž‹http.createServer(function(req,res)&#123; //http://localhost:8001/news.html /news.html //http://localhost:8001/index.html /index.html //css/dmb.bottom.css //xxx.json?214214124 var pathname=url.parse(req.url).pathname; console.log(pathname); if(pathname=='/')&#123; pathname='/index.html'; /*é»˜è®¤åŠ è½½çš„é¦–é¡µ*/ &#125; //èŽ·å–æ–‡ä»¶çš„åŽç¼€å var extname=path.extname(pathname); if(pathname!='/favicon.ico')&#123; /*è¿‡æ»¤è¯·æ±‚favicon.ico*/ //console.log(pathname); //æ–‡ä»¶æ“ä½œèŽ·å– staticä¸‹é¢çš„index.html fs.readFile('static/'+pathname,function(err,data)&#123; if(err)&#123; /*ä¹ˆæœ‰è¿™ä¸ªæ–‡ä»¶*/ console.log('404'); fs.readFile('static/404.html',function(error,data404)&#123; if(error)&#123; console.log(error); &#125; res.writeHead(404,&#123;"Content-Type":"text/html;charset='utf-8'"&#125;); res.write(data404); res.end(); /*ç»“æŸå“åº”*/ &#125;) &#125;else&#123; /*è¿”å›žè¿™ä¸ªæ–‡ä»¶*/ mimeModel.getMime(fs,EventEmitter,extname); /*è°ƒç”¨èŽ·å–æ•°æ®çš„æ–¹æ³•*/ EventEmitter.on('to_mime',function(mime)&#123; res.writeHead(200,&#123;"Content-Type":""+mime+";charset='utf-8'"&#125;); //res.write(data); res.end(data); /*ç»“æŸå“åº”*/ &#125;) &#125; &#125;) &#125;&#125;).listen(8002); mime.json 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476477478479480481482483484&#123; ".323":"text/h323" , ".3gp":"video/3gpp" , ".aab":"application/x-authoware-bin" , ".aam":"application/x-authoware-map" , ".aas":"application/x-authoware-seg" , ".acx":"application/internet-property-stream" , ".ai":"application/postscript" , ".aif":"audio/x-aiff" , ".aifc":"audio/x-aiff" , ".aiff":"audio/x-aiff" , ".als":"audio/X-Alpha5" , ".amc":"application/x-mpeg" , ".ani":"application/octet-stream" , ".apk":"application/vnd.android.package-archive" , ".asc":"text/plain" , ".asd":"application/astound" , ".asf":"video/x-ms-asf" , ".asn":"application/astound" , ".asp":"application/x-asap" , ".asr":"video/x-ms-asf" , ".asx":"video/x-ms-asf" , ".au":"audio/basic" , ".avb":"application/octet-stream" , ".avi":"video/x-msvideo" , ".awb":"audio/amr-wb" , ".axs":"application/olescript" , ".bas":"text/plain" , ".bcpio":"application/x-bcpio" , ".bin ":"application/octet-stream" , ".bld":"application/bld" , ".bld2":"application/bld2" , ".bmp":"image/bmp" , ".bpk":"application/octet-stream" , ".bz2":"application/x-bzip2" , ".c":"text/plain" , ".cal":"image/x-cals" , ".cat":"application/vnd.ms-pkiseccat" , ".ccn":"application/x-cnc" , ".cco":"application/x-cocoa" , ".cdf":"application/x-cdf" , ".cer":"application/x-x509-ca-cert" , ".cgi":"magnus-internal/cgi" , ".chat":"application/x-chat" , ".class":"application/octet-stream" , ".clp":"application/x-msclip" , ".cmx":"image/x-cmx" , ".co":"application/x-cult3d-object" , ".cod":"image/cis-cod" , ".conf":"text/plain" , ".cpio":"application/x-cpio" , ".cpp":"text/plain" , ".cpt":"application/mac-compactpro" , ".crd":"application/x-mscardfile" , ".crl":"application/pkix-crl" , ".crt":"application/x-x509-ca-cert" , ".csh":"application/x-csh" , ".csm":"chemical/x-csml" , ".csml":"chemical/x-csml" , ".css":"text/css" , ".cur":"application/octet-stream" , ".dcm":"x-lml/x-evm" , ".dcr":"application/x-director" , ".dcx":"image/x-dcx" , ".der":"application/x-x509-ca-cert" , ".dhtml":"text/html" , ".dir":"application/x-director" , ".dll":"application/x-msdownload" , ".dmg":"application/octet-stream" , ".dms":"application/octet-stream" , ".doc":"application/msword" , ".docx":"application/vnd.openxmlformats-officedocument.wordprocessingml.document" , ".dot":"application/msword" , ".dvi":"application/x-dvi" , ".dwf":"drawing/x-dwf" , ".dwg":"application/x-autocad" , ".dxf":"application/x-autocad" , ".dxr":"application/x-director" , ".ebk":"application/x-expandedbook" , ".emb":"chemical/x-embl-dl-nucleotide" , ".embl":"chemical/x-embl-dl-nucleotide" , ".eps":"application/postscript" , ".epub":"application/epub+zip" , ".eri":"image/x-eri" , ".es":"audio/echospeech" , ".esl":"audio/echospeech" , ".etc":"application/x-earthtime" , ".etx":"text/x-setext" , ".evm":"x-lml/x-evm" , ".evy":"application/envoy" , ".exe":"application/octet-stream" , ".fh4":"image/x-freehand" , ".fh5":"image/x-freehand" , ".fhc":"image/x-freehand" , ".fif":"application/fractals" , ".flr":"x-world/x-vrml" , ".flv":"flv-application/octet-stream" , ".fm":"application/x-maker" , ".fpx":"image/x-fpx" , ".fvi":"video/isivideo" , ".gau":"chemical/x-gaussian-input" , ".gca":"application/x-gca-compressed" , ".gdb":"x-lml/x-gdb" , ".gif":"image/gif" , ".gps":"application/x-gps" , ".gtar":"application/x-gtar" , ".gz":"application/x-gzip" , ".h":"text/plain" , ".hdf":"application/x-hdf" , ".hdm":"text/x-hdml" , ".hdml":"text/x-hdml" , ".hlp":"application/winhlp" , ".hqx":"application/mac-binhex40" , ".hta":"application/hta" , ".htc":"text/x-component" , ".htm":"text/html" , ".html":"text/html" , ".hts":"text/html" , ".htt":"text/webviewhtml" , ".ice":"x-conference/x-cooltalk" , ".ico":"image/x-icon" , ".ief":"image/ief" , ".ifm":"image/gif" , ".ifs":"image/ifs" , ".iii":"application/x-iphone" , ".imy":"audio/melody" , ".ins":"application/x-internet-signup" , ".ips":"application/x-ipscript" , ".ipx":"application/x-ipix" , ".isp":"application/x-internet-signup" , ".it":"audio/x-mod" , ".itz":"audio/x-mod" , ".ivr":"i-world/i-vrml" , ".j2k":"image/j2k" , ".jad":"text/vnd.sun.j2me.app-descriptor" , ".jam":"application/x-jam" , ".jar":"application/java-archive" , ".java":"text/plain" , ".jfif":"image/pipeg" , ".jnlp":"application/x-java-jnlp-file" , ".jpe":"image/jpeg" , ".jpeg":"image/jpeg" , ".jpg":"image/jpeg" , ".jpz":"image/jpeg" , ".js":"application/x-javascript" , ".jwc":"application/jwc" , ".kjx":"application/x-kjx" , ".lak":"x-lml/x-lak" , ".latex":"application/x-latex" , ".lcc":"application/fastman" , ".lcl":"application/x-digitalloca" , ".lcr":"application/x-digitalloca" , ".lgh":"application/lgh" , ".lha":"application/octet-stream" , ".lml":"x-lml/x-lml" , ".lmlpack":"x-lml/x-lmlpack" , ".log":"text/plain" , ".lsf":"video/x-la-asf" , ".lsx":"video/x-la-asf" , ".lzh":"application/octet-stream" , ".m13":"application/x-msmediaview" , ".m14":"application/x-msmediaview" , ".m15":"audio/x-mod" , ".m3u":"audio/x-mpegurl" , ".m3url":"audio/x-mpegurl" , ".m4a":"audio/mp4a-latm" , ".m4b":"audio/mp4a-latm" , ".m4p":"audio/mp4a-latm" , ".m4u":"video/vnd.mpegurl" , ".m4v":"video/x-m4v" , ".ma1":"audio/ma1" , ".ma2":"audio/ma2" , ".ma3":"audio/ma3" , ".ma5":"audio/ma5" , ".man":"application/x-troff-man" , ".map":"magnus-internal/imagemap" , ".mbd":"application/mbedlet" , ".mct":"application/x-mascot" , ".mdb":"application/x-msaccess" , ".mdz":"audio/x-mod" , ".me":"application/x-troff-me" , ".mel":"text/x-vmel" , ".mht":"message/rfc822" , ".mhtml":"message/rfc822" , ".mi":"application/x-mif" , ".mid":"audio/mid" , ".midi":"audio/midi" , ".mif":"application/x-mif" , ".mil":"image/x-cals" , ".mio":"audio/x-mio" , ".mmf":"application/x-skt-lbs" , ".mng":"video/x-mng" , ".mny":"application/x-msmoney" , ".moc":"application/x-mocha" , ".mocha":"application/x-mocha" , ".mod":"audio/x-mod" , ".mof":"application/x-yumekara" , ".mol":"chemical/x-mdl-molfile" , ".mop":"chemical/x-mopac-input" , ".mov":"video/quicktime" , ".movie":"video/x-sgi-movie" , ".mp2":"video/mpeg" , ".mp3":"audio/mpeg" , ".mp4":"video/mp4" , ".mpa":"video/mpeg" , ".mpc":"application/vnd.mpohun.certificate" , ".mpe":"video/mpeg" , ".mpeg":"video/mpeg" , ".mpg":"video/mpeg" , ".mpg4":"video/mp4" , ".mpga":"audio/mpeg" , ".mpn":"application/vnd.mophun.application" , ".mpp":"application/vnd.ms-project" , ".mps":"application/x-mapserver" , ".mpv2":"video/mpeg" , ".mrl":"text/x-mrml" , ".mrm":"application/x-mrm" , ".ms":"application/x-troff-ms" , ".msg":"application/vnd.ms-outlook" , ".mts":"application/metastream" , ".mtx":"application/metastream" , ".mtz":"application/metastream" , ".mvb":"application/x-msmediaview" , ".mzv":"application/metastream" , ".nar":"application/zip" , ".nbmp":"image/nbmp" , ".nc":"application/x-netcdf" , ".ndb":"x-lml/x-ndb" , ".ndwn":"application/ndwn" , ".nif":"application/x-nif" , ".nmz":"application/x-scream" , ".nokia-op-logo":"image/vnd.nok-oplogo-color" , ".npx":"application/x-netfpx" , ".nsnd":"audio/nsnd" , ".nva":"application/x-neva1" , ".nws":"message/rfc822" , ".oda":"application/oda" , ".ogg":"audio/ogg" , ".oom":"application/x-AtlasMate-Plugin" , ".p10":"application/pkcs10" , ".p12":"application/x-pkcs12" , ".p7b":"application/x-pkcs7-certificates" , ".p7c":"application/x-pkcs7-mime" , ".p7m":"application/x-pkcs7-mime" , ".p7r":"application/x-pkcs7-certreqresp" , ".p7s":"application/x-pkcs7-signature" , ".pac":"audio/x-pac" , ".pae":"audio/x-epac" , ".pan":"application/x-pan" , ".pbm":"image/x-portable-bitmap" , ".pcx":"image/x-pcx" , ".pda":"image/x-pda" , ".pdb":"chemical/x-pdb" , ".pdf":"application/pdf" , ".pfr":"application/font-tdpfr" , ".pfx":"application/x-pkcs12" , ".pgm":"image/x-portable-graymap" , ".pict":"image/x-pict" , ".pko":"application/ynd.ms-pkipko" , ".pm":"application/x-perl" , ".pma":"application/x-perfmon" , ".pmc":"application/x-perfmon" , ".pmd":"application/x-pmd" , ".pml":"application/x-perfmon" , ".pmr":"application/x-perfmon" , ".pmw":"application/x-perfmon" , ".png":"image/png" , ".pnm":"image/x-portable-anymap" , ".pnz":"image/png" , ".pot,":"application/vnd.ms-powerpoint" , ".ppm":"image/x-portable-pixmap" , ".pps":"application/vnd.ms-powerpoint" , ".ppt":"application/vnd.ms-powerpoint" , ".pptx":"application/vnd.openxmlformats-officedocument.presentationml.presentation" , ".pqf":"application/x-cprplayer" , ".pqi":"application/cprplayer" , ".prc":"application/x-prc" , ".prf":"application/pics-rules" , ".prop":"text/plain" , ".proxy":"application/x-ns-proxy-autoconfig" , ".ps":"application/postscript" , ".ptlk":"application/listenup" , ".pub":"application/x-mspublisher" , ".pvx":"video/x-pv-pvx" , ".qcp":"audio/vnd.qcelp" , ".qt":"video/quicktime" , ".qti":"image/x-quicktime" , ".qtif":"image/x-quicktime" , ".r3t":"text/vnd.rn-realtext3d" , ".ra":"audio/x-pn-realaudio" , ".ram":"audio/x-pn-realaudio" , ".rar":"application/octet-stream" , ".ras":"image/x-cmu-raster" , ".rc":"text/plain" , ".rdf":"application/rdf+xml" , ".rf":"image/vnd.rn-realflash" , ".rgb":"image/x-rgb" , ".rlf":"application/x-richlink" , ".rm":"audio/x-pn-realaudio" , ".rmf":"audio/x-rmf" , ".rmi":"audio/mid" , ".rmm":"audio/x-pn-realaudio" , ".rmvb":"audio/x-pn-realaudio" , ".rnx":"application/vnd.rn-realplayer" , ".roff":"application/x-troff" , ".rp":"image/vnd.rn-realpix" , ".rpm":"audio/x-pn-realaudio-plugin" , ".rt":"text/vnd.rn-realtext" , ".rte":"x-lml/x-gps" , ".rtf":"application/rtf" , ".rtg":"application/metastream" , ".rtx":"text/richtext" , ".rv":"video/vnd.rn-realvideo" , ".rwc":"application/x-rogerwilco" , ".s3m":"audio/x-mod" , ".s3z":"audio/x-mod" , ".sca":"application/x-supercard" , ".scd":"application/x-msschedule" , ".sct":"text/scriptlet" , ".sdf":"application/e-score" , ".sea":"application/x-stuffit" , ".setpay":"application/set-payment-initiation" , ".setreg":"application/set-registration-initiation" , ".sgm":"text/x-sgml" , ".sgml":"text/x-sgml" , ".sh":"application/x-sh" , ".shar":"application/x-shar" , ".shtml":"magnus-internal/parsed-html" , ".shw":"application/presentations" , ".si6":"image/si6" , ".si7":"image/vnd.stiwap.sis" , ".si9":"image/vnd.lgtwap.sis" , ".sis":"application/vnd.symbian.install" , ".sit":"application/x-stuffit" , ".skd":"application/x-Koan" , ".skm":"application/x-Koan" , ".skp":"application/x-Koan" , ".skt":"application/x-Koan" , ".slc":"application/x-salsa" , ".smd":"audio/x-smd" , ".smi":"application/smil" , ".smil":"application/smil" , ".smp":"application/studiom" , ".smz":"audio/x-smd" , ".snd":"audio/basic" , ".spc":"application/x-pkcs7-certificates" , ".spl":"application/futuresplash" , ".spr":"application/x-sprite" , ".sprite":"application/x-sprite" , ".sdp":"application/sdp" , ".spt":"application/x-spt" , ".src":"application/x-wais-source" , ".sst":"application/vnd.ms-pkicertstore" , ".stk":"application/hyperstudio" , ".stl":"application/vnd.ms-pkistl" , ".stm":"text/html" , ".svg":"image/svg+xml" , ".sv4cpio":"application/x-sv4cpio" , ".sv4crc":"application/x-sv4crc" , ".svf":"image/vnd" , ".svg":"image/svg+xml" , ".svh":"image/svh" , ".svr":"x-world/x-svr" , ".swf":"application/x-shockwave-flash" , ".swfl":"application/x-shockwave-flash" , ".t":"application/x-troff" , ".tad":"application/octet-stream" , ".talk":"text/x-speech" , ".tar":"application/x-tar" , ".taz":"application/x-tar" , ".tbp":"application/x-timbuktu" , ".tbt":"application/x-timbuktu" , ".tcl":"application/x-tcl" , ".tex":"application/x-tex" , ".texi":"application/x-texinfo" , ".texinfo":"application/x-texinfo" , ".tgz":"application/x-compressed" , ".thm":"application/vnd.eri.thm" , ".tif":"image/tiff" , ".tiff":"image/tiff" , ".tki":"application/x-tkined" , ".tkined":"application/x-tkined" , ".toc":"application/toc" , ".toy":"image/toy" , ".tr":"application/x-troff" , ".trk":"x-lml/x-gps" , ".trm":"application/x-msterminal" , ".tsi":"audio/tsplayer" , ".tsp":"application/dsptype" , ".tsv":"text/tab-separated-values" , ".ttf":"application/octet-stream" , ".ttz":"application/t-time" , ".txt":"text/plain" , ".uls":"text/iuls" , ".ult":"audio/x-mod" , ".ustar":"application/x-ustar" , ".uu":"application/x-uuencode" , ".uue":"application/x-uuencode" , ".vcd":"application/x-cdlink" , ".vcf":"text/x-vcard" , ".vdo":"video/vdo" , ".vib":"audio/vib" , ".viv":"video/vivo" , ".vivo":"video/vivo" , ".vmd":"application/vocaltec-media-desc" , ".vmf":"application/vocaltec-media-file" , ".vmi":"application/x-dreamcast-vms-info" , ".vms":"application/x-dreamcast-vms" , ".vox":"audio/voxware" , ".vqe":"audio/x-twinvq-plugin" , ".vqf":"audio/x-twinvq" , ".vql":"audio/x-twinvq" , ".vre":"x-world/x-vream" , ".vrml":"x-world/x-vrml" , ".vrt":"x-world/x-vrt" , ".vrw":"x-world/x-vream" , ".vts":"workbook/formulaone" , ".wav":"audio/x-wav" , ".wax":"audio/x-ms-wax" , ".wbmp":"image/vnd.wap.wbmp" , ".wcm":"application/vnd.ms-works" , ".wdb":"application/vnd.ms-works" , ".web":"application/vnd.xara" , ".wi":"image/wavelet" , ".wis":"application/x-InstallShield" , ".wks":"application/vnd.ms-works" , ".wm":"video/x-ms-wm" , ".wma":"audio/x-ms-wma" , ".wmd":"application/x-ms-wmd" , ".wmf":"application/x-msmetafile" , ".wml":"text/vnd.wap.wml" , ".wmlc":"application/vnd.wap.wmlc" , ".wmls":"text/vnd.wap.wmlscript" , ".wmlsc":"application/vnd.wap.wmlscriptc" , ".wmlscript":"text/vnd.wap.wmlscript" , ".wmv":"audio/x-ms-wmv" , ".wmx":"video/x-ms-wmx" , ".wmz":"application/x-ms-wmz" , ".wpng":"image/x-up-wpng" , ".wps":"application/vnd.ms-works" , ".wpt":"x-lml/x-gps" , ".wri":"application/x-mswrite" , ".wrl":"x-world/x-vrml" , ".wrz":"x-world/x-vrml" , ".ws":"text/vnd.wap.wmlscript" , ".wsc":"application/vnd.wap.wmlscriptc" , ".wv":"video/wavelet" , ".wvx":"video/x-ms-wvx" , ".wxl":"application/x-wxl" , ".x-gzip":"application/x-gzip" , ".xaf":"x-world/x-vrml" , ".xar":"application/vnd.xara" , ".xbm":"image/x-xbitmap" , ".xdm":"application/x-xdma" , ".xdma":"application/x-xdma" , ".xdw":"application/vnd.fujixerox.docuworks" , ".xht":"application/xhtml+xml" , ".xhtm":"application/xhtml+xml" , ".xhtml":"application/xhtml+xml" , ".xla":"application/vnd.ms-excel" , ".xlc":"application/vnd.ms-excel" , ".xll":"application/x-excel" , ".xlm":"application/vnd.ms-excel" , ".xls":"application/vnd.ms-excel" , ".xlsx":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" , ".xlt":"application/vnd.ms-excel" , ".xlw":"application/vnd.ms-excel" , ".xm":"audio/x-mod" , ".xml":"text/plain", ".xml":"application/xml", ".xmz":"audio/x-mod" , ".xof":"x-world/x-vrml" , ".xpi":"application/x-xpinstall" , ".xpm":"image/x-xpixmap" , ".xsit":"text/xml" , ".xsl":"text/xml" , ".xul":"text/xul" , ".xwd":"image/x-xwindowdump" , ".xyz":"chemical/x-pdb" , ".yz1":"application/x-yz1" , ".z":"application/x-compress" , ".zac":"application/x-zaurus-zac" , ".zip":"application/zip" , ".json":"application/json"&#125; model/getmime.js 123456789101112exports.getMime=function(extname)&#123; /*èŽ·å–åŽç¼€åçš„æ–¹æ³•*/ switch (extname)&#123; case '.html': return 'text/html'; case '.css': return 'text/css'; case '.js': return 'text/javascript'; default: return 'text/html'; &#125;&#125; model/getmimefromfile_bac.js 1234567891011121314151617exports.getMime=function(fs,extname)&#123; /*èŽ·å–åŽç¼€åçš„æ–¹æ³•*/ //.html console.log('1'); fs.readFile('./mime.json',function(err,data)&#123; if(err)&#123; console.log('mime.jsonæ–‡ä»¶ä¸å­˜åœ¨'); return false; &#125; //console.log(data.toString()); var Mimes=JSON.parse(data.toString()); //console.log(Mimes[extname]); console.log('2'); return Mimes[extname] || 'text/html'; &#125;) console.log('3');&#125;// 1 3 undefined model/getmimefromfile.js 1234567exports.getMime=function(fs,extname)&#123; /*èŽ·å–åŽç¼€åçš„æ–¹æ³•*/ //æŠŠè¯»å–æ•°æ®æ”¹æˆåŒæ­¥ var data=fs.readFileSync('./mime.json'); //Syncè§£å†³å¼‚æ­¥é—®é¢˜ //console.log(data.toString()); è½¬æ¢æˆjsonå­—ç¬¦ä¸² var Mimes=JSON.parse(data.toString()); /*æŠŠjsonå­—ç¬¦ä¸²è½¬æ¢æˆjsonå¯¹è±¡*/ return Mimes[extname] || 'text/html';&#125;]]></content>
      <categories>
        <category>node.js</category>
      </categories>
      <tags>
        <tag>node.js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[08_Arrow_Function]]></title>
    <url>%2F2019%2F04%2F22%2Fnodejs-08-Arrow-Function%2F</url>
    <content type="text"><![CDATA[08-Arrow Function ç®­å¤´å‡½æ•° 1ã€ Arrow Function 123function sayHi() &#123; console.log('Hello world')&#125; 1234const sayHi = user =&gt; &#123; console.log('Hello world ' + user)&#125;sayHi('danny'); 2ã€ fix â€˜thisâ€™ problem (functionåœ¨å¯¹è±¡é‡Œå«method) 12345678var person = &#123; name: 'Danny', gender: 'male', testing: function() &#123; console.log(this) &#125;&#125;person.testing() 1&#123; name: 'Danny', gender: 'male', testing: [Function: testing] &#125; ES6: this returns to person object 12345678910var person = &#123; name: 'Danny', gender: 'male', testing: function() &#123; (() =&gt; &#123; console.log(this) &#125;)() &#125;&#125;person.testing() 3ã€arrow functionä¸èƒ½æ¥åšconstructor 12345678910111213141516171819function Person(first, last) &#123; this.firstName = first; this.lastName = last;&#125;class Person &#123; constructor(first, last) &#123; this.firstName = first; this.lastName = last; &#125;&#125;let Person = (first, last) =&gt; &#123; // wrong this.firstName = first, this.lastName = last&#125;var danny = new Person('danny', 'huang')console.log('danny', danny)]]></content>
      <categories>
        <category>node.js</category>
      </categories>
      <tags>
        <tag>node.js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[07_Array_Cardio]]></title>
    <url>%2F2019%2F04%2F22%2Fnodejs-07-Array-Cardio%2F</url>
    <content type="text"><![CDATA[07-Array Cardioå¤„ç†Array forEach map Filter Reduce 1234567891011121314151617181920212223242526272829303132const users = [ &#123; id: 1, name: 'Allison', age: 4, gender: 'female' &#125;, &#123; id: 2, name: 'Derek', age: 1, gender: 'male' &#125;, &#123; id: 3, name: 'Irene', age: 35, gender: 'female' &#125;, &#123; id: 4, name: 'Danny', age: 32, gender: 'male' &#125;, &#123; id: 5, name: 'Alin', age: 25, gender: 'female' &#125;,] 1ã€forEachï¼š log each name 123users.forEach((user) =&gt; &#123; console.log(user.name)&#125;) 12345AllisonDerekIreneDannyAlin æŠŠæ¯ä¸ªuser ageä¹˜ä»¥2 1234users.forEach((user, index) =&gt; &#123; return users[index].age = user.age * 2&#125;)console.log('users', users) 12345users [ &#123; id: 1, name: 'Allison', age: 8, gender: 'female' &#125;, &#123; id: 2, name: 'Derek', age: 2, gender: 'male' &#125;, &#123; id: 3, name: 'Irene', age: 70, gender: 'female' &#125;, &#123; id: 4, name: 'Danny', age: 64, gender: 'male' &#125;, &#123; id: 5, name: 'Alin', age: 50, gender: 'female' &#125; ] 2ã€map log username 1users.map(user =&gt; console.log(user.name))//åªæœ‰ä¸€ä¸ªå‚æ•°ä¸éœ€è¦(),åªæœ‰ä¸€è¡Œä¸éœ€è¦&#123;&#125; 12345AllisonDerekIreneDannyAlin æŠŠæ¯ä¸ªuser ageä¹˜ä»¥2 12345678910let doubled = users.map((user) =&gt; &#123; let tempObj = &#123;&#125; // tempObjä¸èƒ½ç›´æŽ¥=ï¼Œè¦å¤åˆ¶ï¼Œå› ä¸ºtempObjæ˜¯reference tempObj = &#123;...user&#125; tempObj.age = user.age * 2 return tempObj&#125;)console.log('doubled', doubled)console.log('users', users)// map won't change original array// foreach will change original array 12345678910doubled [ &#123; id: 1, name: 'Allison', age: 8, gender: 'female' &#125;, &#123; id: 2, name: 'Derek', age: 2, gender: 'male' &#125;, &#123; id: 3, name: 'Irene', age: 70, gender: 'female' &#125;, &#123; id: 4, name: 'Danny', age: 64, gender: 'male' &#125;, &#123; id: 5, name: 'Alin', age: 50, gender: 'female' &#125; ]users [ &#123; id: 1, name: 'Allison', age: 4, gender: 'female' &#125;, &#123; id: 2, name: 'Derek', age: 1, gender: 'male' &#125;, &#123; id: 3, name: 'Irene', age: 35, gender: 'female' &#125;, &#123; id: 4, name: 'Danny', age: 32, gender: 'male' &#125;, &#123; id: 5, name: 'Alin', age: 25, gender: 'female' &#125; ] mapä¸ä¼šæ”¹å˜åŽŸæ¥çš„arrayï¼Œä½†æ˜¯forEachä¼šæ”¹å˜åŽŸæ¥çš„arrayã€‚ 3ã€Filter åªè¦ageä½ŽäºŽ18 123456let kids = users.filter((user) =&gt; &#123; let tempObj = &#123;&#125; tempObj = &#123;...user&#125; return tempObj.age &lt; 18&#125;)console.log('kids',kids); 12kids [ &#123; id: 1, name: 'Allison', age: 4, gender: 'female' &#125;, &#123; id: 2, name: 'Derek', age: 1, gender: 'male' &#125; ] Only female 123456let female = users.filter((user) =&gt; &#123; let tempObj = &#123;&#125; tempObj = &#123;...user&#125; return tempObj.gender === 'female'&#125;)console.log('female', female) 123female [ &#123; id: 1, name: 'Allison', age: 4, gender: 'female' &#125;, &#123; id: 3, name: 'Irene', age: 35, gender: 'female' &#125;, &#123; id: 5, name: 'Alin', age: 25, gender: 'female' &#125; ] 4ã€Reduce æœ€å¸¸ç”¨å°±æ˜¯æŠŠæ•°ç»„ä¸­çš„æ•°å­—åŠ åœ¨ä¸€èµ· 123456789let totalAge = users.reduce((acc, obj) =&gt; &#123; return acc + obj.age&#125;, 0) //ç¬¬ä¸€ä¸ªå€¼accè®¾ä¸º0// 0 + 4 = 4// 4 + 1 = 5// 5 + 35 = 40// 40 + 32 = 72// 72 + 25 = 97console.log(totalAge); //97]]></content>
      <categories>
        <category>node.js</category>
      </categories>
      <tags>
        <tag>node.js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[06_Promise]]></title>
    <url>%2F2019%2F04%2F22%2Fnodejs-06-Promise%2F</url>
    <content type="text"><![CDATA[06-Node.js Promiseå¤„ç†å¼‚æ­¥ ä¸€ã€åŒæ­¥ä¸Žå¼‚æ­¥ Async = éžåŒæ­¥ sync = åŒæ­¥ synchronous = one at a time ç¬¬ä¸€ä¸ªæ‰§è¡Œå®Œæ‰æ‰§è¡Œä¸‹ä¸€ä¸ª Asynchronous = more one at a time æ‰§è¡Œäº†å°±é©¬ä¸Šæ¢ä¸‹ä¸€ä¸ªæŒ‡ä»¤ äºŒã€Async Actions clickã€Ajaxã€Setlnterval è§£å†³æ–¹æ³•ï¼šcallbackã€Promiseã€Async await 1ã€callback callbakæ˜¯ä¸€ä¸ªfunctioné‡Œé¢çš„function 12345var proveIt = function()&#123; alert('you triggered'+this.id);&#125;document.getElementById('clicker').addEventListener('click',proveIt);// clickä¹‹åŽå°±æ‰§è¡ŒproveItè¿™ä¸ªfunction 2ã€Promise ES6 return resolve or reject ES6 Promiseçš„å®žä¾‹ï¼Œä¼šç¡®ä¿Promiseä¸€å®žä¾‹åŒ–åŽå°±å›ºå®šä½çŠ¶æ€ï¼Œè¦ä¸å°±æ˜¯â€œå·²å®žçŽ°â€ï¼Œè¦ä¸å°±æ˜¯â€œå·²æ‹’ç»â€ã€‚ 123456789const promise = new Promise(function(resplve,reject)&#123; resolve(value); // æˆåŠŸæ—¶ reject(reason); // å¤±è´¥æ—¶&#125;);promise.then(function(value)&#123; // å·²å®žçŽ°æ—¶&#125;,function(reason)&#123; // å·²æ‹’ç»æ—¶&#125;); Examples: SetInterval 1234567891011121314// console.log(Math.floor(Math.random()*100)+1);// console.log(Math.random());function logWord(word)&#123; setTimeout(function()&#123; console.log(word); &#125;,Math.floor(Math.random()*100)+1);&#125;function logAll()&#123; logWord('1'); logWord('2'); logWord('3');&#125;logAll();//æ¯ä¸€æ¬¡ç»“æžœéƒ½ä¸ä¸€æ ·ï¼Œå› ä¸ºæ˜¯å¼‚æ­¥ SetIntervalæ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥å®ƒæ‰§è¡Œäº†ç¬¬ä¸€ä¸ªæŒ‡ä»¤å°±ä¼šé©¬ä¸Šæ‰§è¡Œä¸‹ä¸€ä¸ªï¼Œæ‰€ä»¥é¡ºåºä¸ä¼šå›ºå®šã€‚ (1) è§£å†³æ–¹æ³•ï¼šcallback 1234567891011121314function logWord(word,callback)&#123; setTimeout(function()&#123; console.log(word); callback(); &#125;,Math.floor(Math.random()*100+1));&#125;function logAll()&#123; logWord('1',function()&#123; logWord('2',function()&#123; logWord('3',function()&#123;&#125;) &#125;) &#125;)&#125;logAll(); Callbak Hellï¼šcallbackè¦debugå»ºè®®ç”¨console.log callbackä¸€ç›´callbackä¸‹åŽ»ï¼Œå¦‚æžœä¸­é—´å“ªä¸ªçŽ¯èŠ‚é”™äº†ï¼Œå¾ˆéš¾è®©äººdebugã€‚ (2) è§£å†³æ–¹æ³•ï¼šPromise 1234567891011121314151617function logWord(word)&#123; return new Promise(function(resolve,reject)&#123; setTimeout(function()&#123; console.log(word); resolve(); &#125;,Math.floor(Math.random()*100+1)); &#125;);&#125;function logAll()&#123; logWord('1') .then(function()&#123; return logWord('2'); &#125;).then(function()&#123; return logWord('3'); &#125;)&#125;logAll(); Promiseå¯ä»¥å†™å¾—æ›´ç®€æ´ä¸€ç‚¹ï¼ŒES6æœ‰ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œæ‰€ä»¥è¿˜å¯ä»¥è¿™ä¹ˆå†™ï¼š 12345function logAll()&#123; logWord('1') .then(()=&gt;logWord('2')) .then(()=&gt;logWord('3'))&#125;]]></content>
      <categories>
        <category>node.js</category>
      </categories>
      <tags>
        <tag>node.js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[05_Fs_Module]]></title>
    <url>%2F2019%2F04%2F22%2Fnodejs-05-Fs-Module%2F</url>
    <content type="text"><![CDATA[05-Node.js fsæ¨¡å— fs.stat æ£€æµ‹æ˜¯æ–‡ä»¶è¿˜æ˜¯ç›®å½• fs.mkdir åˆ›å»ºç›®å½• fs.writeFile åˆ›å»ºå†™å…¥æ–‡ä»¶ fs.appendFile è¿½åŠ æ–‡ä»¶ fs.readFile è¯»å–æ–‡ä»¶ fs.readdir è¯»å–ç›®å½• fs.rename é‡å‘½å fs.rmdir åˆ é™¤ç›®å½• fs.unlink åˆ é™¤æ–‡ä»¶ fs.createReadStream ä»Žæ–‡ä»¶æµä¸­è¯»å–æ•°æ® fs.createWriteStream å†™å…¥æ–‡ä»¶ ç®¡é“æµ 1ã€fs.stat æ£€æµ‹æ˜¯æ–‡ä»¶è¿˜æ˜¯ç›®å½• 12345678910const fs = require('fs') fs .stat('hello.js',(error,stats) =&gt;&#123; if(error)&#123; console.log(error) &#125;else&#123; console.log(stats) console.log(`æ–‡ä»¶ï¼š$&#123;stats.isFile()&#125;`) console.log(`ç›®å½•ï¼š$&#123;stats.isDirectory()&#125;`) &#125; &#125;) 12345678910111213141516171819202122&gt; node testStats &#123; dev: 315831262, mode: 33206, nlink: 1, uid: 0, gid: 0, rdev: 0, blksize: undefined, ino: 2533274790764158, size: 17, blocks: undefined, atimeMs: 1553754246606.595, mtimeMs: 1553754257410.068, ctimeMs: 1553754257410.068, birthtimeMs: 1553754246606.595, atime: 2019-03-28T06:24:06.607Z, mtime: 2019-03-28T06:24:17.410Z, ctime: 2019-03-28T06:24:17.410Z, birthtime: 2019-03-28T06:24:06.607Z &#125;æ–‡ä»¶ï¼štrueç›®å½•ï¼šfalse 2ã€fs.mkdir åˆ›å»ºç›®å½• 123456789const fs = require ('fs') fs.mkdir('logs', (error) =&gt; &#123; if(error)&#123; console.log(error) &#125;else&#123; console.log('æˆåŠŸåˆ›å»ºç›®å½•ï¼šlogs') &#125;&#125;) // åˆ›å»ºlogsç›®å½•ï¼ˆåœ¨åŒä¸€ç›®å½•ä¸‹ï¼‰ 3ã€fs.writeFile åˆ›å»ºå†™å…¥æ–‡ä»¶ å¦‚æžœä¸å­˜åœ¨å°±åˆ›å»ºï¼Œå·²ç»å­˜åœ¨ä¼šè¦†ç›– 123456789const fs = require ('fs') fs.writeFile('logs/hello.log','æ‚¨å¥½~\n',(error)=&gt;&#123; if(error)&#123; console .log(error) &#125;else&#123; console .log('æˆåŠŸå†™å…¥æ–‡ä»¶') &#125; &#125;) // åœ¨logsç›®å½•ä¸‹åˆ›å»ºäº†hello.logæ–‡ä»¶ï¼Œå†…å®¹ä¸º'æ‚¨å¥½~' 4ã€fs.appendFile è¿½åŠ æ–‡ä»¶ å¦‚æžœæ–‡ä»¶ä¸å­˜åœ¨å°±åˆ›å»ºï¼Œå¦‚æžœå­˜åœ¨å°±è¿½åŠ å†…å®¹ 123456789const fs = require ('fs') fs.appendFile('logs/hello.log','hello~\n',(error)=&gt;&#123; if(error)&#123; console .log(error) &#125;else&#123; console .log('æˆåŠŸå†™å…¥æ–‡ä»¶') &#125; &#125;) // åœ¨logsç›®ä¸‹çš„hello.logæ–‡ä»¶ä¸­è¿½åŠ å†…å®¹'hello~' 5ã€fs.readFile è¯»å–æ–‡ä»¶ 12345678const fs = require ('fs') fs.readFile('logs/hello.log','utf8',(error,data)=&gt;&#123; if(error)&#123; console .log(error) &#125;else&#123; console .log(data) &#125;&#125;) 123&gt;node testæ‚¨å¥½~hello~ 6ã€fs.readdir è¯»å–ç›®å½• æ‹¿åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹é¢çš„æ‰€æœ‰ç›®å½•å’Œæ–‡ä»¶ 12345678const fs = require('fs') fs.readdir('logs',(error,files)=&gt;&#123; if(error)&#123; console.log(error) &#125;else&#123; console.log(files) &#125;&#125;) 12&gt; node test[ 'hello.log' ] 7ã€fs.rename é‡å‘½å 123456789const fs = reuiure('fs');fs.rename('logs/hello.log','logs/haha.log',function(err)&#123; if(err)&#123; console.log(err); return false; &#125; console.log('é‡å‘½åæˆåŠŸ');&#125;)// logsç›®å½•ä¸‹çš„hello.logæ–‡ä»¶é‡å‘½åä¸ºhaha.log å¯ä»¥ç”¨ä½œå‰ªåˆ‡åŠŸèƒ½ 123456789const fs = require('fs');fs.rename('html/css/basic.css','html/style.css',function(err)&#123; if(err)&#123; console.log(err); return false; &#125; console.log('å‰ªåˆ‡æˆåŠŸ');&#125;)// html/cssç›®å½•ä¸‹çš„basic.cssè¢«å‰ªåˆ‡åˆ°style.cssä¸­ï¼ˆbasic.cssä¸è§äº†ï¼Œstyle.csså­˜åœ¨ï¼Œä½†å†…å®¹å˜ä¸ºåŽŸæ¥basic.cssä¸­çš„å†…å®¹ï¼‰ 8ã€fs.rmdir åˆ é™¤ç›®å½• 12345678910const fs = require('fs');const fs = require('fs');fs.rmdir('logs',(error)=&gt;&#123; if(error) &#123; console.log(error) &#125;else&#123; console.log('æˆåŠŸçš„åˆ é™¤äº†ç›®å½•ï¼šlogs') &#125; &#125;)// åªæœ‰å½“logsç›®å½•ä¸‹ä¸ºç©ºï¼ˆæ²¡æœ‰ä»»ä½•æ–‡ä»¶å’Œç›®å½•æ—¶æ‰å¯è¢«åˆ é™¤) 9ã€fs.unlink åˆ é™¤æ–‡ä»¶ 123456789const fs = require('fs');var file = 'haha.log';fs.unlink(`logs/$&#123;file&#125;`,(error)=&gt;&#123; if(error)&#123; console.log(error) &#125;else&#123; console.log(`æˆåŠŸçš„åˆ é™¤äº†æ–‡ä»¶: $&#123;file&#125;`) &#125; &#125;) 12&gt;node testæˆåŠŸçš„åˆ é™¤äº†æ–‡ä»¶: haha.log 10ã€fs.createReadStream ä»¥æ–‡ä»¶æµçš„æ–¹å¼è¯»å–æ•°æ® 12345678910111213141516171819const fs = require ('fs') var fileReadStream = fs.createReadStream('data.json') let count =0; var data =''; // å¤„ç†äº‹ä»¶æµï¼šdataã€endã€errorfileReadStream.on('data',(chunk)=&gt;&#123; console.log(`$&#123; ++ count &#125; æŽ¥æ”¶åˆ°ï¼š$&#123;chunk.length&#125;`); data +=chunk &#125;) fileReadStream .on('end',()=&gt;&#123; console.log('--- ç»“æŸ ---'); console.log( count ); console.log( data );&#125;) fileReadStream.on('error',(error)=&gt;&#123; console.log(error) &#125;) 12345678910111213141516const fs = require('fs');var readStream = fs.createReadStream('input.txt');var data = ''; // ä¿å­˜æ•°æ®var count = 0;// å¤„ç†äº‹ä»¶æµï¼šdataã€endã€errorreadStream.on('data',function(chunk)&#123; data+=chunk; count++;&#125;);readStream.on('end',function(chunk)&#123; console.log(count); // ç”¨æ–‡ä»¶æµçš„æ–¹å¼è¯»å–ï¼Œæ–‡ä»¶æ¯”è¾ƒå°çš„æ—¶å€™è¯»å–ä¸€æ¬¡å°±è¯»å®Œäº†ï¼›æ–‡ä»¶æ¯”è¾ƒå¤§çš„æ—¶å€™ï¼Œè¦è¯»å–å¤šæ¬¡ console.log(data);&#125;)readStream.on('error',function(err)&#123; console.log(err);&#125;) 11ã€fs.createWriteStream ä»¥æ–‡ä»¶æµçš„æ–¹å¼å†™å…¥æ–‡ä»¶ 1234567891011121314const fs = require('fs');var data = 'æˆ‘æ˜¯ä»Žæ•°æ®åº“èŽ·å–çš„æ•°æ®ï¼Œæˆ‘è¦ä¿å­˜è¿›æ–‡ä»¶é‡Œ\n';// åˆ›å»ºä¸€ä¸ªå¯å†™å…¥çš„æµï¼Œå†™å…¥åˆ°æ–‡ä»¶output.txtvar writeStream = fs.createWriteStream('output.txt');for(let i=0;i&lt;100;i++)&#123; writeStream.write(data,'utf8'); // å†™å…¥æ•°æ®&#125;writeStream.end(); // æ ‡è®°å†™å…¥å®ŒæˆwriteStream.on('finish',function()&#123; // finishä¸Žendé…å¯¹æ‰æœ‰ç”¨ console.log('å†™å…¥å®Œæˆ');&#125;)writeStream.on('error',function()&#123; console.log('å†™å…¥å¤±è´¥');&#125;) 12ã€readStream.pipe(writeStream) ä»¥ç®¡é“æµçš„æ–¹å¼è¯»å–æ–‡ä»¶å’Œå†™å…¥æ–‡ä»¶ ç®¡é“æä¾›äº†ä¸€ä¸ªè¾“å‡ºæµåˆ°è¾“å…¥æµçš„æœºåˆ¶ã€‚é€šå¸¸æˆ‘ä»¬ç”¨äºŽä»Žä¸€ä¸ªæµä¸­èŽ·å–æ•°æ®å¹¶å°†æ•°æ®ä¼  é€’åˆ°å¦å¤–ä¸€ä¸ªæµä¸­ã€‚ æˆ‘ä»¬æŠŠæ–‡ä»¶æ¯”ä½œè£…æ°´çš„æ¡¶ï¼Œè€Œæ°´å°±æ˜¯æ–‡ä»¶é‡Œçš„å†…å®¹ï¼Œæˆ‘ä»¬ç”¨ä¸€æ ¹ç®¡å­(pipe)è¿žæŽ¥ä¸¤ä¸ªæ¡¶ä½¿å¾—æ°´ä»Žä¸€ä¸ª æ¡¶(source)æµå…¥å¦ä¸€ä¸ªæ¡¶(dest)ï¼Œè¿™æ ·å°±æ…¢æ…¢çš„å®žçŽ°äº†å¤§æ–‡ä»¶çš„å¤åˆ¶è¿‡ç¨‹ã€‚ ä»¥ä¸‹å®žä¾‹æˆ‘ä»¬é€šè¿‡è¯»å–ä¸€ä¸ªæ–‡ä»¶å†…å®¹å¹¶å°†å†…å®¹å†™å…¥åˆ°å¦å¤–ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚ 12345678const fs = require('fs');// åˆ›å»ºä¸€ä¸ªå¯è¯»æµvar readStream = fs.createReadStream('input.txt');// åˆ›å»ºä¸€ä¸ªå¯å†™æµvar writeStream = fs.createWriteStream('output.txt');// ç®¡é“è¯»å†™æ“ä½œ:è¯»å–input.txtæ–‡ä»¶å†…å®¹ï¼Œå¹¶å°†å†…å®¹å†™å…¥åˆ°output.txtæ–‡ä»¶ä¸­readStream.pipe(writeStream);console.log('ç¨‹åºæ‰§è¡Œå®Œæ¯•'); ç»ƒä¹  1ã€åˆ¤æ–­æœåŠ¡å™¨ä¸Šé¢æœ‰æ²¡æœ‰uploadç›®å½•ï¼Œå¦‚æžœæ²¡æœ‰çš„è¯å°±åˆ›å»ºè¿™ä¸ªç›®å½•(ä¸€èˆ¬ç”¨äºŽå›¾ç‰‡ä¸Šä¼ ï¼Œè¦ä¸Šä¼ åˆ°ä¸€ä¸ªç›®å½•ï¼Œå¦‚æžœä¸å­˜åœ¨å°±è¦åˆ›å»º)ï¼š 1234567891011121314151617const fs = require('fs');fs.stat('upload',function(err,stats)&#123; if(err)&#123; // ç›®å½•ä¸å­˜åœ¨ --&gt; å¦‚æžœä¸å­˜åœ¨å°±è¦æ‰§è¡Œåˆ›å»ºæ“ä½œ // console.log(err); // return false; fs.mkdir('upload',function(error)&#123; if(error)&#123; console.log(error); return false; &#125; console.log('åˆ›å»ºæˆåŠŸ'); //å¦‚æžœæ²¡æœ‰æ­¤ç›®å½•å°±åˆ›å»ºæ­¤ç›®å½• &#125;); &#125;else&#123; console.log('ç›®å½•å·²ç»å­˜åœ¨'); console.log(stats.isDirectory()); &#125;&#125;); 12345&gt; node teståˆ›å»ºæˆåŠŸ&gt; node testç›®å½•å·²ç»å­˜åœ¨true 2ã€æ‰¾å‡ºhtmlç›®å½•ä¸‹é¢çš„æ‰€æœ‰ç›®å½•å¹¶æ‰“å°å‡ºæ¥ï¼š 1234567891011121314151617const fs = require('fs');fs.readdir('html',function(err,files)&#123; if(err)&#123; console.log(err); &#125;else&#123; //æ‹¿åˆ°htmlç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œç›®å½• // console.log(files); // åˆ¤æ–­æ˜¯ç›®å½•è¿˜æ˜¯æ–‡ä»¶ for(let i=0;i&lt;files.length;i++)&#123; // forå¾ªçŽ¯éåŽ†æ‰€æœ‰ç›®å½•æ–‡ä»¶ console.log(files[i]); // è¿™é‡Œæ‰“å°ï¼Œfiles[i]å°±æ˜¯å­˜åœ¨çš„ fs.stat(files[i],function(error,stats)&#123; //åˆ¤æ–­æ˜¯ç›®å½•è¿˜æ˜¯æ–‡ä»¶ // fs.statæ˜¯å¼‚æ­¥ï¼Œå…ˆæ‰“å°ä¸€ä¸‹files[i] console.log(files[i]); //undefined // ä½ æ²¡æ³•åœ¨è¿™é‡Œæ‹¿åˆ°files[i],è¿™æ˜¯é”™è¯¯çš„å†™æ³• &#125;) &#125; &#125;&#125;); æ­£ç¡®å†™æ³•ï¼šåŒ¿åè‡ªæ‰§è¡Œå‡½æ•° 123456789101112131415161718192021var filesArr = [];fs.readdir('html',function(err,files)&#123; if(err)&#123; console.log(err); return false; &#125;else&#123; // åˆ¤æ–­æ˜¯ç›®å½•è¿˜æ˜¯æ–‡ä»¶å¤¹ console.log(files); // æ•°ç»„ï¼šåŒ…å«ç›®å½•ä¸‹æ‰€æœ‰ç›®å½•å’Œæ–‡ä»¶ (function getFile(i)&#123; if(i==files.length)&#123; console.log(filesArr); // æ‰“å°å‡ºæ‰€æœ‰çš„ç›®å½• return false; &#125; fs.stat('html/'+files[i],function(error,stats)&#123; if(stats.isDirectory())&#123; // å¦‚æžœæ˜¯ç›®å½• filesArr.push(files[i]); // å°±ä¿å­˜æ•°æ® &#125; getFile(i+1); // é€’å½’è°ƒç”¨ &#125;) &#125;)(0) // ç«‹å³æ‰§è¡Œå‡½æ•° &#125;&#125;) è§£å†³å¼‚æ­¥é—®é¢˜ nodejs æ˜¯å•è¿›ç¨‹å•çº¿ç¨‹åº”ç”¨ç¨‹åºï¼Œä½†æ˜¯é€šè¿‡äº‹ä»¶å’Œå›žè°ƒæ”¯æŒå¹¶å‘ï¼Œæ‰€ä»¥æ€§èƒ½éžå¸¸é«˜ï¼Œnodejsçš„æ¯ä¸€ä¸ªapiéƒ½æ˜¯å¼‚æ­¥çš„ï¼Œå¹¶ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çº¿ç¨‹è¿è¡Œï¼Œä½¿ç”¨å¼‚æ­¥å‡½æ•°è°ƒç”¨ï¼Œå¹¶å¤„ç†å¹¶å‘ã€‚ æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„Fileçš„readFileäº‹ä»¶å°±æ˜¯ä¸€ä¸ªå¹¶å‘äº‹ä»¶ã€‚ 123456console.log("1");fs.readFile("mime.json",function (err,data) &#123; console.log(data); console.log('2');&#125;);console.log("3"); ä»£ç çš„æ‰§è¡Œé¡ºåºæ˜¯1-3-2ï¼›ä½†æ˜¯æˆ‘ä»¬å¾ˆå¤šæ—¶å€™ä¼šéœ€è¦1-2-3çš„æ–¹å¼åŽ»æ‰§è¡Œæ–¹æ³•ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸‰ç§æ–¹å¼åŽ»è§£å†³è¿™ä¸ªé—®é¢˜ï¼š 1ã€å°†readFileæ”¹æˆåŒæ­¥æ–¹æ³•ã€‚å³readFileâ€“&gt;readFileSync 12const fsSync = fs.readFileSync('./mime.json');const mimeObj = JSON.parse(fsSync.toString()); 2ã€é€šè¿‡å›žè°ƒçš„æ–¹å¼è§£å†³ 123456789101112console.log("1");function getMime(callback)&#123; fs.readFile("mime.json",function (err,data) &#123; // console.log(data.toString()); callback(data.toString()) ; console.log("2"); &#125;);&#125;getMime(function (result) &#123; console.log(result); console.log("3");&#125;); 3ã€nodejs æœ‰å¤šä¸ªå†…ç½®çš„äº‹ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¼•å…¥eventsæ¨¡å—ï¼Œå¹¶é€šè¿‡å®žä¾‹åŒ–eventEmitterç±»æ¥ç»‘å®šå’Œç›‘å¬äº‹ä»¶ï¼Œé€šè¿‡äº‹ä»¶é©±åŠ¨çš„æ–¹å¼è§£å†³å¼‚æ­¥çš„é—®é¢˜ï¼Œä¹Ÿå¯ä»¥è¯´æˆæ˜¯å¹¿æ’­æˆ–è€…è®¢é˜…ã€‚ å¹¿æ’­å’ŒæŽ¥æ”¶å¹¿æ’­ ---- è®¢é˜…å’Œé€šçŸ¥ï¼š 1234567891011const events = require("events");const eventEmitter = new events.EventEmitter();//ç›‘å¬å¹¿æ’­eventEmitter.on('to_parent',function () &#123; //æŽ¥å—åˆ°äº†å¹¿æ’­äº‹ä»¶ console.log("æŽ¥å—åˆ°äº†å¹¿æ’­äº‹ä»¶")&#125;);setTimeout(function () &#123; console.log("å¼€å§‹å¹¿æ’­"); eventEmitter.emit("to_parent","å‘é€æ•°æ®");&#125;,2000); åœ¨readFIleä¸­è¿™æ ·ä½¿ç”¨ï¼š 12345678910111213console.log("1");function getMime()&#123; fs.readFile("mime.json",function (err,data) &#123; eventEmitter.emit("to_parent",data); console.log("2"); &#125;);&#125;getMime();eventEmitter.on('to_parent',function (data) &#123; //æŽ¥å—åˆ°äº†å¹¿æ’­äº‹ä»¶ console.log("æŽ¥å—åˆ°äº†å¹¿æ’­äº‹ä»¶") console.log("3");&#125;); 4ã€ä½¿ç”¨Promiseæ–¹æ³•â€”ç•¥ Promise æ˜¯ä¸€ç§å¯¹å¼‚æ­¥æ“ä½œçš„å°è£…ï¼Œå¯ä»¥é€šè¿‡ç‹¬ç«‹çš„æŽ¥å£æ·»åŠ åœ¨å¼‚æ­¥æ“ä½œæ‰§è¡ŒæˆåŠŸã€å¤±è´¥æ—¶æ‰§è¡Œçš„æ–¹æ³•ã€‚ä¸»æµçš„è§„èŒƒæ˜¯ Promises/A+ã€‚ Promiseä¸­æœ‰å‡ ä¸ªçŠ¶æ€ï¼š pending: åˆå§‹çŠ¶æ€, éž fulfilled æˆ– rejectedï¼› fulfilled: æˆåŠŸçš„æ“ä½œï¼Œä¸ºè¡¨è¿°æ–¹ä¾¿ï¼Œfulfilled ä½¿ç”¨ resolved ä»£æ›¿ï¼› rejected: å¤±è´¥çš„æ“ä½œã€‚ pendingå¯ä»¥è½¬åŒ–ä¸ºfulfilledæˆ–rejectedå¹¶ä¸”åªèƒ½è½¬åŒ–ä¸€æ¬¡ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æžœpendingè½¬åŒ–åˆ°fulfilledçŠ¶æ€ï¼Œé‚£ä¹ˆå°±ä¸èƒ½å†è½¬åŒ–åˆ°rejectedã€‚å¹¶ä¸”fulfilledå’ŒrejectedçŠ¶æ€åªèƒ½ç”±pendingè½¬åŒ–è€Œæ¥ï¼Œä¸¤è€…ä¹‹é—´ä¸èƒ½äº’ç›¸è½¬æ¢ã€‚ Promiseçš„åŸºæœ¬è¯­æ³• Promiseå®žä¾‹å¿…é¡»å®žçŽ°thenè¿™ä¸ªæ–¹æ³• then()å¿…é¡»å¯ä»¥æŽ¥æ”¶ä¸¤ä¸ªå‡½æ•°ä½œä¸ºå‚æ•° then()è¿”å›žçš„å¿…é¡»æ˜¯ä¸€ä¸ªPromiseå®žä¾‹ 5ã€async/awaitæ–¹æ³•]]></content>
      <categories>
        <category>node.js</category>
      </categories>
      <tags>
        <tag>node.js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[04_npm]]></title>
    <url>%2F2019%2F04%2F22%2Fnodejs-04-npm%2F</url>
    <content type="text"><![CDATA[04-åŒ…ä¸Žnpmã€ç¬¬ä¸‰æ–¹æ¨¡å—å®‰è£…ã€package.jsonã€cnpm ä¸€ã€åŒ…ä¸Ž NPM 1ã€åŒ… Nodejs ä¸­é™¤äº†å®ƒè‡ªå·±æä¾›çš„æ ¸å¿ƒæ¨¡å—å¤–ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰æ¨¡å—ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„æ¨¡å—ã€‚Nodejs ä¸­ç¬¬ä¸‰æ–¹æ¨¡å—ç”±åŒ…ç»„æˆï¼Œå¯ä»¥é€šè¿‡åŒ…æ¥å¯¹ä¸€ç»„å…·æœ‰ç›¸äº’ä¾èµ–å…³ç³»çš„æ¨¡å—è¿›è¡Œç»Ÿä¸€ç®¡ç†ã€‚ å®Œå…¨ç¬¦åˆ CommonJs è§„èŒƒçš„åŒ…ç›®å½•ä¸€èˆ¬åŒ…å«å¦‚ä¸‹è¿™äº›æ–‡ä»¶ã€‚ â€¢ package.json :åŒ…æè¿°æ–‡ä»¶ã€‚ â€¢ bin :ç”¨äºŽå­˜æ”¾å¯æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶çš„ç›®å½•ã€‚ â€¢ lib :ç”¨äºŽå­˜æ”¾ JavaScript ä»£ç çš„ç›®å½•ã€‚ â€¢ doc :ç”¨äºŽå­˜æ”¾æ–‡æ¡£çš„ç›®å½•ã€‚ åœ¨ NodeJs ä¸­é€šè¿‡ NPM å‘½ä»¤æ¥ä¸‹è½½ç¬¬ä¸‰æ–¹çš„æ¨¡å—ï¼ˆåŒ…ï¼‰ã€‚ 123npm i silly-datetime â€“save var sd = require('silly-datetime'); sd.format(new Date(), 'YYYY-MM-DD HH:mm'); 2ã€NPMä»‹ç» npmæ˜¯ä¸–ç•Œä¸Šæœ€å¤§çš„å¼€æ”¾æºä»£ç çš„ç”Ÿæ€ç³»ç»Ÿã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡npmä¸‹è½½å„ç§å„æ ·çš„åŒ…ï¼Œ è¿™äº›æºä»£ç ï¼ˆåŒ…ï¼‰æˆ‘ä»¬å¯ä»¥åœ¨ https://www.npmjs.com æ‰¾åˆ°ã€‚ npm æ˜¯éšåŒ NodeJS ä¸€èµ·å®‰è£…çš„åŒ…ç®¡ç†å·¥å…·ï¼Œèƒ½è§£å†³ NodeJS ä»£ç éƒ¨ç½²ä¸Šçš„å¾ˆå¤šé—®é¢˜ï¼Œ å¸¸è§çš„ä½¿ç”¨åœºæ™¯æœ‰ä»¥ä¸‹å‡ ç§ï¼š å…è®¸ç”¨æˆ·ä»Ž NPM æœåŠ¡å™¨ä¸‹è½½åˆ«äººç¼–å†™çš„ç¬¬ä¸‰æ–¹åŒ…åˆ°æœ¬åœ°ä½¿ç”¨ã€‚(silly-datetime) å…è®¸ç”¨æˆ·ä»Ž NPM æœåŠ¡å™¨ä¸‹è½½å¹¶å®‰è£…åˆ«äººç¼–å†™çš„å‘½ä»¤è¡Œç¨‹åº(å·¥å…·)åˆ°æœ¬åœ°ä½¿ç”¨ã€‚ ï¼ˆsupervisorï¼‰ å…è®¸ç”¨æˆ·å°†è‡ªå·±ç¼–å†™çš„åŒ…æˆ–å‘½ä»¤è¡Œç¨‹åºä¸Šä¼ åˆ° NPM æœåŠ¡å™¨ä¾›åˆ«äººä½¿ç”¨ã€‚ äºŒã€NPM å‘½ä»¤è¯¦è§£ã€‚ 123456npm -v // æŸ¥çœ‹npmç‰ˆæœ¬npm install moduleName //å®‰è£…æ¨¡å— npm uninstall moudleName //å¸è½½æ¨¡å— npm list //æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹å·²å®‰è£…çš„nodeåŒ…npm info jquery //æŸ¥çœ‹jqueryçš„ç‰ˆæœ¬ npm install jquery@1.8.0 //æŒ‡å®šç‰ˆæœ¬å®‰è£… ä¸‰ã€package.json 1ã€åˆ›å»º package.json 12npm init npm init â€“yes //yesè¡¨ç¤ºä¸€è·¯é»˜è®¤åˆ›å»ºï¼Œè¿˜æœ‰ -fè¡¨ç¤ºforce 2ã€package.json æ–‡ä»¶å°±æ˜¯ä¸€ä¸ªJSONå¯¹è±¡ï¼Œè¯¥å¯¹è±¡çš„æ¯ä¸€ä¸ªæˆå‘˜å°±æ˜¯å½“å‰é¡¹ç›®çš„ä¸€é¡¹è®¾ç½®ã€‚ 123456789101112131415&#123; &quot;name&quot;: &quot;test&quot;, //é¡¹ç›®åç§°&quot;version&quot;: &quot;1.0.0&quot;, //é¡¹ç›®ç‰ˆæœ¬å·&quot;description&quot;: &quot;test&quot;, &quot;main&quot;: &quot;main.js&quot;, &quot;keywords&quot;: [ &quot;test&quot; ], &quot;author&quot;: &quot;wade&quot;, &quot;license&quot;: &quot;MIT&quot;, &quot;dependencies&quot;: &#123; &quot;express&quot;: &quot;^4.10.1&quot; &#125;, &quot;devDependencies&quot;: &#123; &quot;jslint&quot;: &quot;^0.6.5&quot; &#125; &#125; å¿…é¡»å­—æ®µï¼š 12name //é¡¹ç›®åç§°version //é¡¹ç›®ç‰ˆæœ¬å· å¯é€‰å­—æ®µ 1234title //æ ‡é¢˜author //æ˜¯ä¸€ä¸ªäººcontributors //æ˜¯ä¸€ç»„äººhomepage // 3ã€å®‰è£…æ¨¡å—å¹¶æŠŠæ¨¡å—å†™å…¥ package.json(ä¾èµ–) 123npm install babel-cli --save-dev npm install æ¨¡å— --save npm install æ¨¡å— --save-dev 12npm install -d å°±æ˜¯npm install --save-devnpm insatll -s å°±æ˜¯npm install --save Dependenciesä¸€è¯çš„ä¸­æ–‡æ„æ€æ˜¯ä¾èµ–å’Œé™„å±žçš„æ„æ€ï¼Œè€Œdevåˆ™æ˜¯developï¼ˆå¼€å‘ï¼‰çš„ç®€å†™ã€‚ æ‰€ä»¥å®ƒä»¬çš„åŒºåˆ«åœ¨ package.json æ–‡ä»¶é‡Œé¢ä½“çŽ°å‡ºæ¥çš„å°±æ˜¯ï¼Œä½¿ç”¨ --save-dev å®‰è£…çš„æ’ä»¶ï¼Œè¢«å†™å…¥åˆ° devDependencies åŸŸé‡Œé¢åŽ»ï¼Œè€Œä½¿ç”¨ --save å®‰è£…çš„æ’ä»¶ï¼Œåˆ™æ˜¯è¢«å†™å…¥åˆ° dependencies åŒºå—é‡Œé¢åŽ»ã€‚ package.json æ–‡ä»¶é‡Œé¢çš„ devDependencies å’Œ dependencies å¯¹è±¡æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼ŸdevDependencies é‡Œé¢çš„æ’ä»¶åªç”¨äºŽå¼€å‘çŽ¯å¢ƒï¼Œä¸ç”¨äºŽç”Ÿäº§çŽ¯å¢ƒï¼Œè€Œ dependencies æ˜¯éœ€è¦å‘å¸ƒåˆ°ç”Ÿäº§çŽ¯å¢ƒçš„ã€‚ ä½¿ç”¨ npm i å®‰è£…package.jsoné‡Œçš„ä¾èµ–æ—¶ï¼Œä¸¤éƒ¨åˆ†çš„åŒ…éƒ½ä¼špullä¸‹æ¥ã€‚ æ¯”å¦‚ï¼š æˆ‘ä»¬å†™ä¸€ä¸ªé¡¹ç›®è¦ä¾èµ–äºŽjQueryï¼Œæ²¡æœ‰è¿™ä¸ªåŒ…çš„ä¾èµ–è¿è¡Œå°±ä¼šæŠ¥é”™ï¼Œè¿™æ—¶å€™å°±æŠŠè¿™ä¸ªä¾èµ–å†™å…¥dependencies ï¼› è€Œæˆ‘ä»¬ä½¿ç”¨çš„ä¸€äº›æž„å»ºå·¥å…·æ¯”å¦‚glupã€webpackè¿™äº›åªæ˜¯åœ¨å¼€å‘ä¸­ä½¿ç”¨çš„åŒ…ï¼Œä¸Šçº¿ä»¥åŽå°±å’Œä»–ä»¬æ²¡å…³ç³»äº†ï¼Œæ‰€ä»¥å°†å®ƒå†™å…¥devDependenciesã€‚]]></content>
      <categories>
        <category>node.js</category>
      </categories>
      <tags>
        <tag>node.js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[03_user_defined_module]]></title>
    <url>%2F2019%2F04%2F22%2Fnodejs-03-user-defined-module%2F</url>
    <content type="text"><![CDATA[03-CommonJSå’ŒNodejsæ¨¡å—ã€è‡ªå®šä¹‰æ¨¡å— ä¸€ã€ä»€ä¹ˆæ˜¯ CommonJsï¼Ÿ JavaScript æ˜¯ä¸€ä¸ªå¼ºå¤§çš„é¢å‘å¯¹è±¡è¯­è¨€ï¼Œå®ƒæœ‰å¾ˆå¤šå¿«é€Ÿé«˜æ•ˆçš„è§£é‡Šå™¨ã€‚ç„¶è€Œï¼Œ JavaScript æ ‡å‡†å®šä¹‰çš„ API æ˜¯ä¸ºäº†æž„å»ºåŸºäºŽæµè§ˆå™¨çš„åº”ç”¨ç¨‹åºã€‚å¹¶æ²¡æœ‰åˆ¶å®šä¸€ä¸ªç”¨äºŽæ›´å¹¿æ³›çš„åº”ç”¨ç¨‹åºçš„æ ‡å‡†åº“ã€‚CommonJS è§„èŒƒçš„æå‡º,ä¸»è¦æ˜¯ä¸ºäº†å¼¥è¡¥å½“å‰ JavaScript æ²¡æœ‰æ ‡å‡†çš„ç¼ºé™·ã€‚å®ƒçš„ç»ˆ æžç›®æ ‡å°±æ˜¯ï¼šæä¾›ä¸€ä¸ªç±»ä¼¼ Pythonï¼ŒRuby å’Œ Java è¯­è¨€çš„æ ‡å‡†åº“,è€Œä¸åªæ˜¯åœç•™åœ¨å°è„šæœ¬ç¨‹åºçš„é˜¶æ®µã€‚ç”¨ CommonJS API ç¼–å†™å‡ºçš„åº”ç”¨ï¼Œä¸ä»…å¯ä»¥åˆ©ç”¨ JavaScript å¼€å‘å®¢æˆ·ç«¯åº”ç”¨ï¼Œè€Œä¸”è¿˜å¯ä»¥ç¼–å†™ä»¥ä¸‹åº”ç”¨ã€‚ â€¢æœåŠ¡å™¨ç«¯ JavaScript åº”ç”¨ç¨‹åºã€‚ ï¼ˆnodejsï¼‰ â€¢å‘½ä»¤è¡Œå·¥å…·ã€‚ â€¢æ¡Œé¢å›¾å½¢ç•Œé¢åº”ç”¨ç¨‹åºã€‚ CommonJS å°±æ˜¯æ¨¡å—åŒ–çš„æ ‡å‡†ï¼Œnodejså°±æ˜¯ CommonJSï¼ˆæ¨¡å—åŒ–ï¼‰çš„å®žçŽ°ã€‚ äºŒã€Nodejs ä¸­çš„æ¨¡å—åŒ– Node åº”ç”¨ç”±æ¨¡å—ç»„æˆï¼Œé‡‡ç”¨ CommonJS æ¨¡å—è§„èŒƒã€‚ 1ã€ åœ¨ Nodeä¸­ï¼Œæ¨¡å—åˆ†ä¸ºä¸¤ç±»: ä¸€ç±»æ˜¯ Node æä¾›çš„æ¨¡å—,ç§°ä¸ºæ ¸å¿ƒæ¨¡å—ï¼›å¦ä¸€ç±»æ˜¯ç”¨æˆ·ç¼–å†™çš„æ¨¡å—ï¼Œç§°ä¸ºæ–‡ä»¶æ¨¡å—ã€‚ â€¢ æ ¸å¿ƒæ¨¡å—éƒ¨åˆ†åœ¨ Node æºä»£ç çš„ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œç¼–è¯‘è¿›äº†äºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶ã€‚åœ¨ Node è¿›ç¨‹å¯åŠ¨æ—¶ï¼Œéƒ¨åˆ†æ ¸å¿ƒæ¨¡å—å°±è¢«ç›´æŽ¥åŠ è½½è¿›å†…å­˜ä¸­ï¼Œæ‰€ä»¥è¿™éƒ¨åˆ†æ ¸å¿ƒæ¨¡å—å¼•å…¥æ—¶ï¼Œæ–‡ä»¶å®šä½å’Œç¼–è¯‘æ‰§è¡Œè¿™ä¸¤ä¸ªæ­¥éª¤å¯ä»¥çœç•¥æŽ‰ï¼Œå¹¶ä¸”åœ¨è·¯å¾„åˆ†æžä¸­ä¼˜å…ˆåˆ¤æ–­ï¼Œæ‰€ä»¥å®ƒçš„åŠ è½½é€Ÿåº¦æ˜¯æœ€å¿«çš„ã€‚ å¦‚ï¼šHTTP æ¨¡å— ã€URL æ¨¡å—ã€Fsæ¨¡å—éƒ½æ˜¯ nodejs å†…ç½®çš„æ ¸å¿ƒæ¨¡å—ï¼Œå¯ä»¥ç›´æŽ¥å¼•å…¥ä½¿ç”¨ã€‚ â€¢ æ–‡ä»¶æ¨¡å—åˆ™æ˜¯åœ¨è¿è¡Œæ—¶åŠ¨æ€åŠ è½½ï¼Œéœ€è¦å®Œæ•´çš„è·¯å¾„åˆ†æžã€æ–‡ä»¶å®šä½ã€ç¼–è¯‘æ‰§è¡Œè¿‡ç¨‹ã€ é€Ÿåº¦ç›¸æ¯”æ ¸å¿ƒæ¨¡å—ç¨å¾®æ…¢ä¸€äº›ï¼Œä½†æ˜¯ç”¨çš„éžå¸¸å¤šã€‚è¿™äº›æ¨¡å—éœ€è¦æˆ‘ä»¬è‡ªå·±å®šä¹‰ã€‚æŽ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€ä¸‹ nodejs ä¸­çš„è‡ªå®šä¹‰æ¨¡å—ã€‚ 2ã€CommonJSï¼ˆNodejsï¼‰ä¸­è‡ªå®šä¹‰æ¨¡å—çš„è§„å®šï¼š ï¼ˆ1ï¼‰æˆ‘ä»¬å¯ä»¥æŠŠå…¬å…±çš„åŠŸèƒ½æŠ½ç¦»æˆä¸ºä¸€ä¸ªå•ç‹¬çš„ js æ–‡ä»¶ä½œä¸ºä¸€ä¸ªæ¨¡å—ï¼Œé»˜è®¤æƒ…å†µä¸‹é¢è¿™ ä¸ªæ¨¡å—é‡Œé¢çš„æ–¹æ³•æˆ–è€…å±žæ€§ï¼Œå¤–é¢æ˜¯æ²¡æ³•è®¿é—®çš„ã€‚å¦‚æžœè¦è®©å¤–éƒ¨å¯ä»¥è®¿é—®æ¨¡å—é‡Œé¢çš„æ–¹æ³•æˆ– è€…å±žæ€§ï¼Œå°±å¿…é¡»åœ¨æ¨¡å—é‡Œé¢é€šè¿‡exportsæˆ–è€…module.exportsæš´éœ²å±žæ€§æˆ–è€…æ–¹æ³•ã€‚ ï¼ˆ2ï¼‰åœ¨éœ€è¦ä½¿ç”¨è¿™äº›æ¨¡å—çš„æ–‡ä»¶ä¸­ï¼Œé€šè¿‡requireçš„æ–¹å¼å¼•å…¥è¿™ä¸ªæ¨¡å—ã€‚è¿™ä¸ªæ—¶å€™å°±å¯ä»¥ ä½¿ç”¨æ¨¡å—é‡Œé¢æš´éœ²çš„å±žæ€§å’Œæ–¹æ³•ã€‚ 3ã€ å®šä¹‰ä½¿ç”¨æ¨¡å—ï¼š tools.js 1234567891011121314// å®šä¹‰ä¸€ä¸ª tools.js çš„æ¨¡å— // æ¨¡å—å®šä¹‰ var tools = &#123; sayHello: function() &#123; return 'hello NodeJS'; &#125;, add: function(x, y) &#123; return x + y; &#125; &#125;; // æ¨¡å—æŽ¥å£çš„æš´éœ² // module.exports = tools ; exports.sayHello = tools.sayHello; exports.add = tools.add; 1234var http = require ('http'); // å¼•å…¥è‡ªå®šä¹‰çš„ tools.js æ¨¡å— var tools= require ('./tools'); tools.sayHello(); //ä½¿ç”¨æ¨¡å— ä¸¤ç§æ–¹æ³•ï¼šæ–¹æ³•ä¸€ 12345module.exports = tools;-----------------------var tools = require('./tools');tools.sayHello();tools.add(); â€‹ æ–¹æ³•äºŒ 123456exports.sayHello = tools.sayHello;exports.add = tools.add;---------------------------------var tools = require('./tools');tools.sayHello();tools.add(); ç”±æ­¤æƒ³åˆ°çš„æž„é€ ä¸€ä¸ªæ¨¡å—çš„æ–¹æ³•ï¼š 12345678910111213141516171819var tools = &#123; tools01:&#123; hello:function()&#123; console.log('hello'); &#125;, elaine:function()&#123; console.log('elaine'); &#125; &#125;, tools02 :&#123; hi:function()&#123; console.log('hi'); &#125;, hongkong:function()&#123; console.log('hongkong'); &#125; &#125;&#125;module.exports = tools; 123var tools = require('./01');tools.tools01.hello();tools.tools02.hi(); ä¸‰ã€npm init ç”Ÿæˆ package.json 1npm init -y]]></content>
      <categories>
        <category>node.js</category>
      </categories>
      <tags>
        <tag>node.js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[02_http_module]]></title>
    <url>%2F2019%2F04%2F22%2Fnodejs-02-http-module%2F</url>
    <content type="text"><![CDATA[02-Node.jsâ€”httpæ¨¡å—ã€urlæ¨¡å—ã€nodemonå·¥å…· ä¸€ã€Node.jsåˆ›å»ºç¬¬ä¸€ä¸ªåº”ç”¨ 1ã€å¼•å…¥httpæ¨¡å— 1var http = require("http"); 2ã€åˆ›å»ºæœåŠ¡å™¨ æŽ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨ http.createServer() æ–¹æ³•åˆ›å»ºæœåŠ¡å™¨ï¼Œå¹¶ä½¿ç”¨ listen æ–¹æ³•ç»‘å®š 8888 ç«¯å£ã€‚ å‡½æ•°é€šè¿‡ request, response å‚æ•°æ¥æŽ¥æ”¶å’Œå“åº”æ•°æ®ã€‚ server.js 1234567891011var http = require('http'); http.createServer(function (request, response) &#123; // å‘é€ HTTP å¤´éƒ¨ // HTTP çŠ¶æ€å€¼: 200 : OK //è®¾ç½® HTTP å¤´éƒ¨ï¼ŒçŠ¶æ€ç æ˜¯ 200ï¼Œæ–‡ä»¶ç±»åž‹æ˜¯ htmlï¼Œå­—ç¬¦é›†æ˜¯ utf8 response.writeHead(200,&#123;"Content-Type":"text/html;charset=UTF-8"&#125;); // å‘é€å“åº”æ•°æ® "Hello World" res.end("å“ˆå“ˆå“ˆå“ˆï¼Œæˆ‘ä¹°äº†ä¸€ä¸ª iPhone" + (1+2+3) + "s"); &#125;).listen(8888); // ç»ˆç«¯æ‰“å°å¦‚ä¸‹ä¿¡æ¯ console.log('Server running at http://127.0.0.1:8888/'); 3ã€è¿è¡Œç¨‹åº ç”¨å‘½ä»¤è¡Œåˆ‡æ¢åˆ°ç¨‹åºå¯¹åº”ç›®å½•ã€‚é€šè¿‡ node å‘½ä»¤è¿è¡Œç¨‹åºã€‚ 1node server.js æµè§ˆå™¨è¿è¡Œ : 127.0.0.1:8888 æˆ‘ä»¬æœ¬åœ°å†™ä¸€ä¸ª jsï¼Œæ‰“æ­»éƒ½ä¸èƒ½ç›´æŽ¥æ‹–å…¥æµè§ˆå™¨è¿è¡Œï¼Œä½†æ˜¯æœ‰äº† nodeï¼Œæˆ‘ ä»¬ä»»ä½•ä¸€ä¸ª js æ–‡ä»¶ï¼Œéƒ½å¯ä»¥é€šè¿‡ node æ¥è¿è¡Œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œnode å°±æ˜¯ä¸€ä¸ª js çš„æ‰§è¡ŒçŽ¯å¢ƒã€‚ äºŒã€HTTP æ¨¡å—ã€URL æ¨¡å— 1234567891011//å¼•ç”¨æ¨¡å— var http = require("http"); //åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨ï¼Œå›žè°ƒå‡½æ•°è¡¨ç¤ºæŽ¥æ”¶åˆ°è¯·æ±‚ä¹‹åŽåšçš„äº‹æƒ… var server = http.createServer(function(req,res)&#123; //req å‚æ•°è¡¨ç¤ºè¯·æ±‚ï¼Œres è¡¨ç¤ºå“åº” console.log("æœåŠ¡å™¨æŽ¥æ”¶åˆ°äº†è¯·æ±‚" + req.url); res.end(); //Endæ–¹æ³•ä½¿WebæœåŠ¡å™¨åœæ­¢å¤„ç†è„šæœ¬å¹¶è¿”å›žå½“å‰ç»“æžœ &#125;); //ç›‘å¬ç«¯å£ server.listen(3000,"127.0.0.1"); è®¾ç½®ä¸€ä¸ªå“åº”å¤´ï¼š 1res.writeHead(200,&#123;"Content-Type":"text/html;charset=UTF8"&#125;); æˆ‘ä»¬çŽ°åœ¨æ¥çœ‹ä¸€ä¸‹ req é‡Œé¢èƒ½å¤Ÿä½¿ç”¨çš„ä¸œè¥¿ã€‚ æœ€å…³é”®çš„å°±æ˜¯ req.url å±žæ€§ï¼Œè¡¨ç¤ºç”¨æˆ·çš„è¯·æ±‚ URL åœ°å€ã€‚æ‰€æœ‰çš„è·¯ç”±è®¾è®¡ï¼Œéƒ½æ˜¯é€šè¿‡ req.url æ¥å®žçŽ°çš„ã€‚ æˆ‘ä»¬æ¯”è¾ƒå…³å¿ƒçš„ä¸æ˜¯æ‹¿åˆ° URLï¼Œè€Œæ˜¯è¯†åˆ«è¿™ä¸ª URLã€‚ è¯†åˆ« URLï¼Œç”¨åˆ°äº†ä¸‹é¢çš„ url æ¨¡å— ï¼š 123url.parse() //è§£æžURL url.format(urlObject) //æ˜¯ä¸Šé¢ url.parse()æ“ä½œçš„é€†å‘æ“ä½œ url.resolve(from, to) //æ·»åŠ æˆ–è€…æ›¿æ¢åœ°å€ 123456789101112131415//https://user:pass@sub.host.com:8080/p/a/t/h?query=string#hashUrl &#123; protocol: 'https:', // åè®® slashes: true, auth: 'user:pass', // ç”¨æˆ·åå¯†ç  host: 'sub.host.com:8080', // hostä¸»æœºå port: '8080', // ç«¯å£å· hostname: 'sub.host.com', // ä¸»æœºåä¸å¸¦ç«¯å£å· hash: '#hash', // å“ˆå¸Œå€¼ search: '?query=string',// æŸ¥è¯¢å­—ç¬¦ä¸² query: 'query=string', // è¯·æ±‚å‚æ•° pathname: '/p/a/t/h', // è·¯å¾„å path: '/p/a/t/h?query=string', // å¸¦æŸ¥è¯¢çš„è·¯å¾„å href: 'https://user:pass@sub.host.com:8080/p/a/t/h?query=string#hash' // åŽŸå­—ç¬¦ä¸²æœ¬èº«&#125; 1ã€url.parse() ä¾‹å­1 1234567891011var http = require('http');http.createServer(function(req,res)&#123; console.log(req.url); res.writeHead(200,&#123;"Content-Type":"text/html;charset=UTF-8"&#125;); res.write('Hello World.'); res.end();&#125;).listen(8888);console.log('Server running at http://127.0.0.1:8888/');//è¾“å…¥localhost:8888 å¾—åˆ°: / /favicon.ico//è¾“å…¥localhost:8888/news å¾—åˆ°: /news /favicon.ico//è¾“å…¥localhost:8888/news?aid=123 å¾—åˆ°: /news?aid=123 /favicon.ico ä¾‹å­2 12345678910111213var http = require('http');var url = require('url');http.createServer(function(req,res)&#123;// è¾“å…¥localhost:8888/news?aid=123&amp;cid=3 æ‹¿åˆ°aidå’Œcid// req.url èŽ·å–æµè§ˆå™¨urlè¾“å…¥çš„ä¿¡æ¯// url.parse()ç¬¬äºŒä¸ªå‚æ•°æ˜¯trueçš„æ—¶å€™ï¼Œè¡¨ç¤ºæŠŠgetä¼ å€¼è½¬æ¢æˆå¯¹è±¡ console.log(url.parse(req.url,true).query.aid); // èŽ·å–urlçš„getä¼ å€¼ console.log(url.parse(req.url,true).query.cid); // èŽ·å–urlçš„getä¼ å€¼ res.writeHead(200,&#123;"Content-Type":"text/html;charset=UTF-8"&#125;); res.write('Hello World.'); res.end();&#125;).listen(8888);console.log('Server running at http://127.0.0.1:8888/'); 2ã€url.format(urlObject) ä¸€èˆ¬ç”¨ä¸ç€ 3ã€url.resolve() 12&gt;url.resolve(&apos;http://example.com/&apos;,&apos;/one&apos;);&apos;http://example.com/one&apos; ä¸‰ã€Nodejsè‡ªå¯åŠ¨å·¥å…·nodemon 1ã€å…¨å±€å®‰è£…nodemon 1npm install -g nodemon 2ã€ä½¿ç”¨ ä»¥å‰è¦ä¹ˆæ˜¯ node appï¼Œè¦ä¹ˆæ˜¯npm startï¼Œæœ‰äº†nodemonä»¥åŽï¼Œå¯åŠ¨ç¨‹åºç›´æŽ¥è¿›å…¥æ ¹ç›®å½•ï¼Œnodemonå°±å¯ä»¥äº†ã€‚ ä¿®æ”¹æ–‡ä»¶åŽï¼Œä¼šè‡ªåŠ¨é‡å¯ã€‚]]></content>
      <categories>
        <category>node.js</category>
      </categories>
      <tags>
        <tag>node.js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[01_nodejs_introduction]]></title>
    <url>%2F2019%2F04%2F22%2Fnodejs-01-nodejs-introduction%2F</url>
    <content type="text"><![CDATA[01-Node.jsä»‹ç» ðŸ˜ŠNode.js æ˜¯ä¸€ä¸ª Javascript è¿è¡ŒçŽ¯å¢ƒ(runtime)ã€‚å®ƒè®© JavaScript å¯ä»¥å¼€å‘åŽç«¯ç¨‹åºï¼Œå®žçŽ°å‡ ä¹Žå…¶ä»–åŽç«¯è¯­è¨€å®žçŽ°çš„æ‰€æœ‰åŠŸèƒ½ï¼Œå¯ä»¥ä¸Ž PHPã€JSPã€Pythonã€Ruby ç­‰åŽç«¯è¯­è¨€å¹³èµ·å¹³åã€‚ Nodejs æ˜¯åŸºäºŽ V8 å¼•æ“Žï¼ŒV8 æ˜¯ Google å‘å¸ƒçš„å¼€æº JavaScript å¼•æ“Žï¼Œæœ¬èº«å°±æ˜¯ç”¨äºŽ Chrome æµè§ˆå™¨ çš„ JS è§£é‡Šéƒ¨åˆ†ï¼Œä½†æ˜¯ Ryan Dahl è¿™å“¥ä»¬ï¼Œé¬¼æ‰èˆ¬çš„ï¼ŒæŠŠè¿™ä¸ª V8 æ¬åˆ°äº†æœåŠ¡å™¨ä¸Šï¼Œç”¨äºŽåšæœåŠ¡å™¨çš„è½¯ä»¶ã€‚ çŸ­çŸ­å‡ å¹´çš„æ—¶é—´ï¼ŒNode å–å¾—äº†å·¨å¤§çš„æˆåŠŸã€‚åœ¨ä¼ä¸šç•Œï¼ŒNode çš„åº”ç”¨ä¹Ÿè¶Šæ¥è¶Šå¹¿æ³›ï¼Œ2016 å¹´ nodeJS å®˜æ–¹çš„è°ƒæŸ¥æŠ¥å‘Šã€‚2016 å¹´å…¨çƒæœ‰ 350 ä¸‡å¼€å‘è€…ä½¿ç”¨ nodeJS,ç›¸æ¯”åŽ»å¹´ä¿æŒäº† 100%çš„å¢žé•¿çŽ‡ã€‚åƒ Yahooã€Microsoft è¿™æ ·çš„å¤§å…¬å¸ï¼Œæœ‰å¥½å¤šåº”ç”¨å·²ç»è¿ç§»åˆ° Node äº†ã€‚å›½å†…çš„é˜¿é‡Œå·´å·´ã€ç½‘æ˜“ã€è…¾è®¯ã€æ–°æµªã€ç™¾åº¦ç­‰å…¬å¸çš„å¾ˆå¤šçº¿ä¸Šäº§å“ä¹Ÿçº·çº·æ”¹ç”¨ Node å¼€å‘ï¼Œå¹¶å–å¾—äº†å¾ˆå¥½çš„æ•ˆæžœã€‚æ®ç»Ÿè®¡å¾ˆå¤š A è½®ã€ B è½®çš„åˆ›ä¸šå…¬å¸æ›´å–œæ¬¢ä½¿ç”¨ NodeJs å¼€å‘ã€‚ ä¸€ã€Node.jsçš„ä¼˜åŠ¿ Node æ‰“ç ´äº†è¿‡åŽ» JavaScript åªèƒ½åœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„å±€é¢ã€‚å‰åŽç«¯ç¼–ç¨‹çŽ¯å¢ƒç»Ÿä¸€ï¼Œå¯ä»¥å¤§å¤§é™ä½Žå¼€å‘æˆæœ¬ã€‚ è¶…å¼ºçš„é«˜å¹¶å‘èƒ½åŠ›ï¼šNode.js çš„é¦–è¦ç›®æ ‡æ˜¯æä¾›ä¸€ç§ç®€å•çš„ã€ç”¨äºŽåˆ›å»ºé«˜æ€§èƒ½æœåŠ¡å™¨åŠå¯åœ¨è¯¥æœåŠ¡å™¨ä¸­è¿è¡Œçš„å„ç§åº”ç”¨ç¨‹åºçš„å¼€å‘å·¥å…·ã€‚ åœ¨ Javaã€PHP æˆ–è€….net ç­‰æœåŠ¡å™¨ç«¯è¯­è¨€ä¸­ï¼Œä¼šä¸ºæ¯ä¸€ä¸ªå®¢æˆ·ç«¯è¿žæŽ¥åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹ã€‚è€Œæ¯ä¸ªçº¿ç¨‹éœ€è¦è€—è´¹å¤§çº¦ 2MB å†…å­˜ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç†è®ºä¸Šï¼Œä¸€ä¸ª 8GB å†…å­˜çš„æœåŠ¡å™¨å¯ä»¥åŒæ—¶è¿žæŽ¥çš„æœ€å¤§ç”¨æˆ·æ•°ä¸º 4000 ä¸ªå·¦å³ã€‚è¦è®© Web åº”ç”¨ç¨‹åºæ”¯æŒæ›´å¤šçš„ç”¨æˆ·ï¼Œå°±éœ€è¦å¢žåŠ æœåŠ¡å™¨çš„æ•°é‡ï¼Œè€Œ Web åº”ç”¨ç¨‹åºçš„ç¡¬ä»¶æˆæœ¬å½“ç„¶å°±ä¸Šå‡äº†ã€‚ Node.js ä¸ä¸ºæ¯ä¸ªå®¢æˆ·è¿žæŽ¥åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œè€Œä»…ä»…ä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹ã€‚å½“æœ‰ç”¨æˆ·è¿žæŽ¥äº†ï¼Œå°±è§¦å‘ä¸€ä¸ª å†…éƒ¨äº‹ä»¶ï¼Œé€šè¿‡éžé˜»å¡ž I/Oã€äº‹ä»¶é©±åŠ¨æœºåˆ¶ï¼Œè®© Node.js ç¨‹åºå®è§‚ä¸Šä¹Ÿæ˜¯å¹¶è¡Œçš„ã€‚ä½¿ç”¨ Node.jsï¼Œä¸€ä¸ª 8GB å†…å­˜çš„æœåŠ¡å™¨ï¼Œå¯ä»¥åŒæ—¶å¤„ç†è¶…è¿‡ 4 ä¸‡ç”¨æˆ·çš„è¿žæŽ¥ã€‚ å®žçŽ°é«˜æ€§èƒ½æœåŠ¡å™¨ ï¼šä¸¥æ ¼åœ°è¯´ï¼ŒNode.js æ˜¯ä¸€ä¸ªç”¨äºŽå¼€å‘å„ç§Web æœåŠ¡å™¨çš„å¼€å‘å·¥å…·ã€‚åœ¨ Node.js æœåŠ¡å™¨ä¸­ï¼Œè¿è¡Œçš„æ˜¯é«˜æ€§èƒ½ V8 JavaScript è„šæœ¬è¯­è¨€ï¼Œè¯¥è¯­è¨€æ˜¯ä¸€ç§å¯ä»¥è¿è¡Œåœ¨æœåŠ¡å™¨ç«¯çš„ JavaScript è„šæœ¬è¯­è¨€ã€‚ é‚£ä¹ˆï¼Œä»€ä¹ˆæ˜¯ V8 JavaScript è„šæœ¬è¯­è¨€å‘¢ï¼Ÿè¯¥è¯­è¨€æ˜¯ä¸€ç§è¢« V8 JavaScript å¼•æ“Žæ‰€è§£æžå¹¶æ‰§è¡Œçš„è„šæœ¬è¯­è¨€ã€‚V8 JavaScript å¼•æ“Žæ˜¯ç”± Google å…¬å¸ä½¿ç”¨ C++è¯­è¨€å¼€å‘çš„ä¸€ç§é«˜æ€§èƒ½ JavaScript å¼•æ“Žï¼Œè¯¥å¼•æ“Žå¹¶ä¸å±€é™äºŽåœ¨æµè§ˆ å™¨ä¸­è¿è¡Œã€‚Node.js å°†å…¶è½¬ç”¨åœ¨äº†æœåŠ¡å™¨ä¸­ï¼Œå¹¶ä¸”ä¸ºå…¶æä¾›äº†è®¸å¤šé™„åŠ çš„å…·æœ‰å„ç§ä¸åŒç”¨é€”çš„ APIã€‚ä¾‹å¦‚ï¼Œ åœ¨ä¸€ä¸ªæœåŠ¡å™¨ä¸­ï¼Œç»å¸¸éœ€è¦å¤„ç†å„ç§äºŒè¿›åˆ¶æ•°æ®ã€‚åœ¨ JavaScript è„šæœ¬è¯­è¨€ä¸­ï¼Œåªå…·æœ‰éžå¸¸æœ‰é™çš„å¯¹äºŒè¿›åˆ¶æ•° æ®çš„å¤„ç†èƒ½åŠ›ï¼Œè€Œ Node.js æ‰€æä¾›çš„ Buffer ç±»åˆ™æä¾›äº†ä¸°å¯Œçš„å¯¹äºŒè¿›åˆ¶æ•°æ®çš„å¤„ç†èƒ½åŠ›ã€‚ å¦å¤–ï¼Œåœ¨V8 JavaScript å¼•æ“Žå†…éƒ¨ä½¿ç”¨ä¸€ç§å…¨æ–°çš„ç¼–è¯‘æŠ€æœ¯ã€‚è¿™æ„å‘³ç€å¼€å‘è€…ç¼–å†™çš„é«˜ç«¯çš„ JavaScript è„šæœ¬ä»£ ç ä¸Žå¼€å‘è€…ç¼–å†™çš„ä½Žç«¯çš„Cè¯­è¨€å…·æœ‰éžå¸¸ç›¸è¿‘çš„æ‰§è¡Œæ•ˆçŽ‡ï¼Œè¿™ä¹Ÿæ˜¯Node.js æœåŠ¡å™¨å¯ä»¥æä¾›çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ã€‚ å¼€å‘å‘¨æœŸçŸ­ã€å¼€å‘æˆæœ¬ä½Žã€å­¦ä¹ æˆæœ¬ä½Žï¼šNode.js è‡ªèº«å“²å­¦ï¼Œæ˜¯èŠ±æœ€å°çš„ç¡¬ä»¶æˆæœ¬ï¼Œè¿½æ±‚æ›´é«˜çš„å¹¶å‘ï¼Œæ›´é«˜çš„å¤„ç†æ€§èƒ½ã€‚ äºŒã€Node.jsé€‚åˆåšä»€ä¹ˆï¼Ÿ å‰åŽç«¯ç¼–ç¨‹è¯­è¨€çŽ¯å¢ƒç»Ÿä¸€ã€‚è¿™ç±»ä»£è¡¨æ˜¯é›…è™Žã€‚é›…è™Žå¼€æ”¾äº† Cocktai æ¡†æž¶ï¼Œåˆ©ç”¨è‡ªå·±æ·±åŽšçš„å‰ç«¯æ²‰æ·€ï¼Œå°† YUI3 è¿™ä¸ªå‰ç«¯æ¡†æž¶çš„èƒ½åŠ›å€ŸåŠ© Node å»¶ä¼¸åˆ°æœåŠ¡å™¨ç«¯ï¼Œä½¿å¾—ä½¿ç”¨è€…æ‘†è„±äº†æ—¥å¸¸å·¥ä½œä¸­ä¸€è¾¹å†™ JavaScriptâ€”è¾¹å†™ PHP æ‰€å¸¯æ¥çš„ä¸Šä¸‹æ–‡äº¤æ¢è´Ÿæ‹…ã€‚ Nodeå¸¦æ¥çš„é«˜æ€§èƒ½ I/0 ç”¨äºŽå®žæ—¶åº”ç”¨ã€‚Voxer å°† Nodeåº”ç”¨åœ¨å®žæ—¶è¯­éŸ³ä¸Šã€‚å›½å†…è…¾è®¯çš„æœ‹å‹ç½‘å°† Node åº”ç”¨åœ¨é•¿è¿žæŽ¥ä¸­ï¼Œä»¥æä¾›å®žæ—¶åŠŸèƒ½ï¼ŒèŠ±ç“£ç½‘ã€è˜‘è‡è¡—ç­‰å…¬å¸é€šè¿‡ socket.io å®žçŽ°å®žæ—¶é€šçŸ¥çš„åŠŸèƒ½ã€‚ å¹¶è¡Œ I/0 ä½¿å¾—ä½¿ç”¨è€…å¯ä»¥æ›´é«˜æ•ˆåœ°åˆ©ç”¨åˆ†å¸ƒå¼çŽ¯å¢ƒã€‚é˜¿é‡Œå·´å·´ eBay æ˜¯è¿™æ–¹é¢çš„å…¸åž‹ã€‚ é˜¿é‡Œå·´å·´çš„NodeFoxå’ŒeBayçš„ql.ioéƒ½æ˜¯å€Ÿç”¨Node å¹¶è¡Œ I/O çš„èƒ½åŠ›ï¼Œæ›´é«˜æ•ˆåœ°ä½¿ç”¨å·²æœ‰çš„æ•°æ®ã€‚ å¹¶è¡Œ I/O â€¢æœ‰æ•ˆåˆ©ç”¨ç¨³å®šæŽ¥å£æå‡Webæ¸²æŸ“èƒ½åŠ›ã€‚é›ªçƒè´¢ç»å’Œ Linkedln çš„ç§»åŠ¨ç‰ˆç½‘ç«™å‡æ˜¯è¿™ç§æ¡ˆä¾‹ï¼Œæ’‡å¼ƒåŒæ­¥ç­‰å¾…å¼çš„é¡ºåºè¯·æ±‚ï¼Œå¤§èƒ†é‡‡ç”¨å¹¶è¡Œä¸¨/ã€‡ï¼ŒåŠ é€Ÿæ•°æ®çš„èŽ·å–è¿›è€Œæå‡ Web çš„æ¸²æŸ“é€Ÿåº¦ã€‚ äº‘è®¡ç®—å¹³å°æä¾› Node æ”¯æŒã€‚å¾®è½¯å°† Node å¼•å…¥ Azure çš„å¼€å‘ä¸­ï¼Œé˜¿é‡Œäº‘ã€ç™¾åº¦å‡çº·çº· åœ¨äº‘æœåŠ¡å™¨ä¸Šæä¾› Node åº”ç”¨æ‰˜ç®¡æœåŠ¡ï¼ŒJoyent æ›´æ˜¯äº‘è®¡ç®—ä¸­æä¾› Node æ”¯æŒçš„ä»£è¡¨ã€‚è¿™ç±»å¹³å°çœ‹é‡ JavaScript å¸¦æ¥çš„å¼€å‘ä¸Šçš„ä¼˜åŠ¿ï¼Œä»¥åŠä½Žèµ„æºå ç”¨ã€é«˜æ€§èƒ½çš„ç‰¹ç‚¹ã€‚ æ¸¸æˆå¼€å‘é¢†åŸŸã€‚æ¸¸æˆé¢†åŸŸå¯¹å®žæ—¶å’Œå¹¶å‘æœ‰å¾ˆé«˜çš„è¦æ±‚ï¼Œç½‘æ˜“å¼€æºäº† pomelo å®žæ—¶æ¡†æž¶ï¼Œ å¯ä»¥åº”ç”¨åœ¨æ¸¸æˆå’Œé«˜å®žæ—¶åº”ç”¨ä¸­ã€‚ å·¥å…·ç±»åº”ç”¨ã€‚è¿‡åŽ»ä¾èµ– java æˆ–å…¶ä»–è¯­è¨€æž„å»ºçš„å‰ç«¯å·¥å…·ç±»åº”ç”¨ï¼Œçº·çº·è¢«ä¸€äº›å‰ç«¯å·¥ç¨‹ å¸ˆç”¨ Node é‡å†™ï¼Œç”¨å‰ç«¯ç†Ÿæ‚‰çš„è¯­è¨€ä¸ºå‰ç«¯æž„å»ºç†Ÿæ‚‰çš„å·¥å…·ã€‚ ä¸‰ã€Node.jsçŽ¯å¢ƒæ­å»º Node.js å’Œ Java éžå¸¸åƒï¼Œè·¨å¹³å°çš„ã€‚ä¸ç®¡æ˜¯ Linux è¿˜æ˜¯ windows ç¼–ç¨‹æ˜¯å®Œå…¨ä¸€è‡´çš„ï¼ˆæœ‰ä¸€äº›ä¸ä¸€æ ·ï¼Œæ¯”å¦‚è·¯å¾„çš„è¡¨è¿°ï¼‰ã€‚Linux ç‰ˆæœ¬çš„ Node.js çŽ¯å¢ƒå’Œ windows çŽ¯å¢ƒæ˜¯ä¸ä¸€æ ·çš„ï¼Œä½†æ˜¯ç¼–ç¨‹è¯­è¨€ä¸€æ ·ã€‚ å®‰è£…å®ŒæˆåŽï¼Œwin+R:cmdâ€”&gt;è¾“å…¥node --version (è®°å¾—é…ç½®path) å››ã€Node.jså¼€å‘å·¥å…·é…ç½® å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨ï¼Œæˆ‘é€‰æ‹©çš„æ˜¯VSCodeï¼Œå› ä¸ºå®ƒå¼ºå¤§çš„æ’ä»¶ã€‚å¾®è½¯æœ‰ Visual Studioè¿™ä¸ªå®‡å®™æœ€å¼ºIDEï¼ŒVisual Studio Code è‡ªç„¶ä¹Ÿä¸ä¼šå¼±(å®‡å®™æœ€å¼ºç¼–è¾‘å™¨)ï¼Œä¸‹é¢ä»‹ç»ä¸€äº›VSCodeä¸­å¥½ç”¨çš„æ’ä»¶ï¼š 1ã€ä»£ç ç‰‡æ®µ(Snippet)æ’ä»¶ å½“ä½ è¦ä»Žäº‹æ›´åŠ å‰æ²¿çš„å¼€å‘çš„æ—¶å€™ï¼Œä½ å°±éœ€è¦ä¸€äº›é¢å¤–çš„ä»£ç ç‰‡æ®µæ’ä»¶æ¥è¾…åŠ©ä½ ç¼–å†™ES6/ES7ä»£ç ã€‚ VS Code JavaScript(ES6) snippetsï¼šå®ƒæ˜¯å¦‚ä»Šæœ€æµè¡Œçš„ï¼Œå®‰è£…äº†è¶…è¿‡120ä¸‡çš„æ’ä»¶ã€‚è¯¥æ’ä»¶ä¸ºJavaScriptã€TypeScriptã€HTMLã€Reactå’ŒVueæä¾›äº†ES6è¯­æ³•æ”¯æŒã€‚ JavaScript Snippet Packï¼šJavaScriptä»£ç ç‰‡æ®µé›†åˆã€‚ Atom JavaScript Snippetï¼šä»ŽAtomç§»æ¤è¿‡æ¥çš„JavaScriptä»£ç ç‰‡æ®µã€‚ JavaScript Snippetsï¼šES6ä»£ç ç‰‡æ®µï¼Œå¹¶ä¸”åŒ…å«Mochaã€Jasmineå’Œå…¶å®ƒBDDæµ‹è¯•æ¡†æž¶çš„ä»£ç ç‰‡æ®µã€‚ 2ã€è¯­æ³•æ’ä»¶ VS Codeè‡ªå¸¦çš„é’ˆå¯¹JavaScriptçš„è¯­æ³•é«˜äº®å·²ç»ç›¸å½“ä¸é”™ã€‚ä½ å¯ä»¥å®‰è£…ä¸åŒçš„ä¸»é¢˜æ¥æ”¹å˜ä»£ç çš„é¢œè‰²ã€‚ä¸è¿‡ï¼Œå¦‚æžœä½ æƒ³è¦æ›´å¥½çš„å¯è¯»æ€§ï¼Œå¯ä»¥å®‰è£…ä»£ç é«˜äº®æ’ä»¶ã€‚è¿™é‡Œæœ‰ä¸€äº›æŽ¨èï¼š JavaScript Atom Grammarï¼šè¯¥æ’ä»¶å°†Visual Studio Codeè‡ªå¸¦çš„JavaScriptè¯­æ³•æ›¿æ¢æˆäº†Atomç¼–è¾‘å™¨çš„ç‰ˆæœ¬ã€‚ Babel JavaScriptï¼šæ”¯æŒ ES201x JavaScriptã€Reactã€FlowTypeå’ŒGraphQLä»£ç çš„è¯­æ³•é«˜äº®ã€‚ DotENVï¼šå¦‚æžœä½ ä½¿ç”¨Nodeï¼Œä½ éœ€è¦å®ƒã€‚DotEnvæä¾›.envæ–‡ä»¶çš„è¯­æ³•é«˜äº®ã€‚ 3ã€ç é£Žæ ¼æ£€æŸ¥æ’ä»¶ ä¸ºäº†ä¿è¯æ•´ä¸ªå›¢é˜Ÿä»£ç æ ¼å¼çš„ä¸€è‡´æ€§ï¼Œä½¿ç”¨ä¸€ä¸ªä»£ç é£Žæ ¼æ£€æŸ¥å·¥å…·å¯ä»¥åšåˆ°ã€‚ESLintæ˜¯æœ€æµè¡Œçš„ä¸€ä¸ªå·¥å…·ï¼Œå› ä¸ºå®ƒæ”¯æŒéžå¸¸å¤šçš„ä»£ç é£Žæ ¼ï¼ŒåŒ…æ‹¬æ ‡å‡†çš„ã€Googleå’ŒAirbnbã€‚ä¸‹é¢åˆ—å‡ºä¸€äº›æŽ¨èçš„æ’ä»¶ï¼š ESLintï¼šè¿™ä¸ªæ˜¯æœ€æµè¡Œçš„ä»£ç é£Žæ ¼æ£€æŸ¥æ’ä»¶ï¼Œæœ‰è¶…è¿‡670ä¸‡çš„å®‰è£…é‡ã€‚ä½ å¯ä»¥åœ¨.eslintrc.jsonä¸­é…ç½®ã€‚ JSHintï¼šJSHintçš„ä»£ç é£Žæ ¼æ£€æŸ¥æ’ä»¶ã€‚åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹é¢ï¼Œç”¨.jshintrcfileé…ç½®ã€‚ JavaScript Standard Style: ä¸€ä¸ªæ— éœ€é…ç½®çš„è‡ªå¸¦éžå¸¸ä¸¥æ ¼è§„åˆ™çš„ä»£ç é£Žæ ¼æ£€æŸ¥æ’ä»¶ã€‚å®ƒå¼ºåˆ¶è¦æ±‚ä½ æ‰€æœ‰ä»£ç è¦éµå¾ªæ ‡å‡†è§„åˆ™ã€‚ JSLintï¼šJSLintçš„ä»£ç é£Žæ ¼æ£€æŸ¥æ’ä»¶ã€‚ å¦‚æžœä½ æƒ³è¦äº†è§£å„ä¸ªæ’ä»¶çš„ä¼˜ç¼ºç‚¹ï¼Œå¯ä»¥çœ‹çœ‹è¿™ç¯‡åšå®¢JavaScriptä»£ç é£Žæ ¼æ£€æŸ¥æ’ä»¶å¤§è¯„æ¯”ã€‚ 4ã€Nodeæ’ä»¶ æ¯ä¸€ä¸ªJavaScripté¡¹ç›®è‡³å°‘éœ€è¦å®‰è£…ä¸€ä¸ªNodeåŒ…ã€‚è¿™é‡ŒæŽ¨èä¸€äº›é’ˆå¯¹Nodeçš„æ’ä»¶ï¼š npmï¼šä½¿ç”¨package.jsonæ¥éªŒè¯å·²ç»å®‰è£…çš„æ¨¡å—ï¼Œç¡®ä¿å·²ç»å®‰è£…çš„æ¨¡å—ç‰ˆæœ¬å·æ­£ç¡®ï¼Œæ ‡è®°é‚£äº›å®‰è£…äº†ä½†æ˜¯æ²¡æœ‰åœ¨package.jsonåˆ—å‡ºæ¥çš„åŒ…ï¼Œä»¥åŠé‚£äº›è¿˜æ²¡æœ‰å®‰è£…çš„åŒ…ã€‚ Node.js Modules IntelliSenseï¼šä¸ºJavaScriptå’ŒTypeScriptæ¨¡å—è‡ªåŠ¨è¡¥å…¨importè¯­å¥ã€‚ Path IntelliSenseï¼šè™½ç„¶å¹¶ä¸æ˜¯çœŸçš„å’ŒNodeç›¸å…³ï¼Œè¿™ä¸ªæ’ä»¶å¯ä»¥è‡ªåŠ¨è¡¥å…¨æ–‡ä»¶åï¼Œå¯ä»¥åœ¨è¾“å…¥æ—¶å¯¹æœ¬åœ°æ–‡ä»¶è¿›è¡Œæ™ºèƒ½æç¤ºã€‚ Node execï¼šè¿è¡Œä½ æ‰§è¡Œå½“å‰çš„Nodeæ–‡ä»¶æˆ–è€…é€‰ä¸­çš„éƒ¨åˆ†ä»£ç ã€‚ View Node Packageï¼šé€šè¿‡æ­¤æ’ä»¶å¯ä»¥å¿«é€ŸæŸ¥çœ‹ä¸€ä¸ªNodeåŒ…çš„æºä»£ç ã€‚ Node Readmeï¼šå¿«é€Ÿæ‰“å¼€npmåŒ…æ–‡æ¡£ã€‚ Search node_modulesï¼šæœç´¢node_modulesé‡Œé¢çš„ä»£ç ï¼Œæ ‡å‡†çš„æœç´¢æ˜¯ä¸ä¼šåŒ…å«è¯¥æ–‡ä»¶å¤¹çš„ã€‚ Import Costï¼šæ˜¾ç¤ºå¼•å…¥çš„åŒ…çš„å¤§å° 5ã€ä»£ç æ ¼å¼åŒ–æ’ä»¶ ä½ ä¹Ÿè®¸ä¼šå‘çŽ°ï¼Œæœ‰æ—¶åŽå¤åˆ¶ç²˜è´´å®Œä¸€æ®µä»£ç åŽï¼Œç¼©è¿›çš„æ ¼å¼å˜ä¹±ï¼Œéœ€è¦ä¸€è¡Œä¸€è¡Œçš„è°ƒæ•´ååˆ†éº»çƒ¦ã€‚è¿™ä¸ªæ—¶å€™ï¼Œä½ è‚¯å®šæƒ³è¦ä¸€ä¸ªä»£ç æ ¼å¼åŒ–å·¥å…·ã€‚ Beautifyï¼šå®‰è£…é‡è¶…è¿‡230ä¸‡ï¼ŒBeautifyæ˜¯jsBeautifierçš„æ’ä»¶ï¼Œæ”¯æŒJavaScriptã€JSONã€CSSå’ŒHTMLä¸€é”®æ ¼å¼åŒ–ã€‚ Prettier Code Formatterï¼šå®‰è£…é‡è¶…è¿‡150ä¸‡ï¼Œæ”¯æŒJavaScriptã€TypeScriptå’ŒCSSçš„æ ¼å¼åŒ–ï¼Œä½¿ç”¨Prettier(ä¸€ä¸ªæ·±å—å¤§å®¶å–œçˆ±çš„æ ¼å¼åŒ–æ’ä»¶)ã€‚ JS Refactorï¼šæä¾›äº†è®¸å¤šé‡æž„JavaScript ä»£ç çš„æ–¹æ³•ï¼Œä¾‹å¦‚æå–ä»£ç ä¸­çš„å˜é‡å’Œæ–¹æ³•ï¼Œå°†å‡½æ•°è½¬æ¢ä¸ºä½¿ç”¨ç®­å¤´å‡½æ•°æˆ–æ¨¡æ¿å­—é¢é‡å’Œå°†å‡½æ•°å¯¼å‡ºã€‚ JavaScript Boosterï¼šä¸€ä¸ªéžå¸¸æ£’çš„é‡æž„å·¥å…·ï¼Œæ¯”å¦‚å°†varæ›¿æ¢ä¸ºconstæˆ–åˆ™letï¼Œç§»é™¤æ— ç”¨çš„elseè¯­å¥ï¼Œå°†å˜é‡å£°æ˜Žå’Œå˜é‡åˆå§‹åŒ–åˆå¹¶ã€‚åº”è¯¥è¯´å¾ˆå¤§ç¨‹åº¦ä¸Šå—åˆ°Webstormçš„å¯å‘ã€‚ 6ã€æµè§ˆå™¨æ’ä»¶ é™¤éžä½ ç›´æŽ¥åœ¨æŽ§åˆ¶å°å†™JavaScriptä»£ç ï¼Œå¤§å¤šæ•°æ—¶å€™æ˜¯åœ¨æµè§ˆå™¨ä¸­æ‰§è¡Œçš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸€æ¬¡ä»£ç æ›´æ–°ï¼Œä½ éƒ½éœ€è¦åˆ·æ–°é¡µé¢æ¥é‡å†™è½½å…¥ä»£ç ã€‚å¦‚æžœä¸€ç›´æ‰‹åŠ¨æ“ä½œï¼Œæ˜¯å¾ˆç¹ççš„ã€‚æˆ‘ä»¬å¯ä»¥ç”¨æ’ä»¶æ¥æ›¿ä»£ã€‚ Debugger for Chromeï¼šä½ åªéœ€è¦åœ¨ä»£ç ç¼–è¾‘å™¨ä¸­è®¾ç½®æ–­ç‚¹ï¼Œåœ¨æµè§ˆå™¨ä¸­ä¼šåœ¨æ–­ç‚¹å¤„æš‚åœã€‚ Live Serverï¼šåœ¨æœ¬åœ°å¼€å‘çŽ¯å¢ƒä¸­ï¼Œå®žæ—¶é‡æ–°åŠ è½½(reload)é¡µé¢ã€‚ Preview on Web Serverï¼šæä¾›webæœåŠ¡å™¨å’Œå®žæ—¶é¢„è§ˆã€‚ PHP Serverï¼šå¯¹äºŽä»…éœ€è¦åœ¨å®¢æˆ·ç«¯è¿è¡ŒJavaScript ä»£ç åšæµ‹è¯•éžå¸¸æœ‰ç”¨ã€‚ Rest Clientï¼šä½ ä¸éœ€è¦ä½¿ç”¨æµè§ˆå™¨æˆ–åˆ™ä¸€ä¸ªCURLç¨‹åºæ¥æµ‹è¯•REST APIï¼Œé€šè¿‡Rest Clientå¯ä»¥åœ¨ç¼–è¾‘å™¨å†…äº¤äº’å¼è¿è¡ŒHTTPè¯·æ±‚ã€‚ 7ã€æ¡†æž¶æ’ä»¶ å¯¹äºŽå¤§å¤šæ•°é¡¹ç›®ï¼Œä¸ºäº†èŠ‚çœå¼€å‘æ—¶é—´ï¼Œä½ å¾€å¾€ä¼šä½¿ç”¨ä¸€ä¸ªåˆé€‚çš„å¼€å‘æ¡†æž¶æ¥å¿«é€Ÿå¼€å‘ã€‚åœ¨VS Codeä¸Šï¼Œå¤§å¤šæ•°æ¡†æž¶éƒ½æœ‰ç›¸åº”çš„æ’ä»¶æ”¯æŒã€‚ä½†æ˜¯ä¾ç„¶æœ‰å¾ˆå¤šæ¡†æž¶å¹¶æ²¡æœ‰å¯¹åº”çš„æ’ä»¶ã€‚ Angular 6ï¼šè¶…è¿‡220ä¸‡çš„å®‰è£…é‡ï¼Œæ”¯æŒTypeScriptã€HTMLã€Angular Material ngRxã€RxJSå’ŒFlex Layoutã€‚å¹¶ä¸”æœ‰172ä¸ªAngularçš„ä»£ç ç‰‡æ®µã€‚ Angular v5 snippetsï¼šè¶…è¿‡270ä¸‡çš„å®‰è£…é‡ï¼Œæä¾› TypeScriptã€RxJSã€HTMLå’ŒDockeræ–‡ä»¶çš„ä»£ç ç‰‡æ®µã€‚ React Native/React/Redux snippets for es6/es7ï¼šä¸ºè¿™äº›æ¡†æž¶æä¾›ES6/ES7è¯­æ³•çš„ä»£ç ç‰‡æ®µã€‚ React Native Toolsï¼šæä¾›æ™ºèƒ½æç¤ºã€å‘½ä»¤è¡Œå·¥å…·å’ŒDebuggingåŠŸèƒ½ã€‚ Veturï¼šä¸ºVueæ¡†æž¶æä¾›è¯­æ³•é«˜äº®ã€ä»£ç ç‰‡æ®µã€Emmetã€æ ¼å¼åŒ–ã€ä»£ç é£Žæ ¼æ£€æŸ¥ã€æ™ºèƒ½æç¤ºã€è°ƒè¯•å¸®åŠ©ç­‰ã€‚æœ‰éžå¸¸è¯¦ç»†çš„æ–‡æ¡£: veturã€‚ Emberï¼šä¸ºEmberæä¾›å‘½ä»¤å·¥å…·å’Œæ™ºèƒ½æç¤ºã€‚å®‰è£…åŽï¼Œæ‰€æœ‰çš„ember cliå‘½ä»¤éƒ½å¯ä»¥ä½¿ç”¨ã€‚ Cordova Toolsï¼šä¸ºCordovaæ’ä»¶å’ŒIonicæ¡†æž¶æä¾›æ”¯æŒã€‚æä¾›ä»£ç æ™ºèƒ½æç¤ºã€è°ƒè¯•è¾…åŠ©ä»¥åŠå…¶ä»–ç‰¹æ€§ã€‚ jQuery Code Snippetsï¼šæä¾›è¶…è¿‡130ä¸ªjQueryä»£ç ç‰‡æ®µã€‚ 8ã€æµ‹è¯•æ’ä»¶ åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œæµ‹è¯•æ˜¯å¿…å¯ä¸å°‘çš„ä¸€ä¸ªçŽ¯èŠ‚ï¼Œç‰¹åˆ«æ˜¯é‚£äº›è¦ä¸Šçº¿åˆ°ç”Ÿäº§çŽ¯å¢ƒçš„é¡¹ç›®ã€‚ä½ å¯ä»¥çœ‹çœ‹æˆ‘ä»¬è¿™ç¯‡è®²æµ‹è¯•çš„æ–‡ç« : JavaScript Testing: Unit vs Functional vs Integration Testsã€‚ä¸‹é¢æ˜¯ä¸€äº›æµè¡Œçš„æµ‹è¯•æ’ä»¶ï¼š Mocha sidebarï¼šä½¿ç”¨Mochaåº“æ¥æä¾›æµ‹è¯•æ”¯æŒã€‚ä½¿ç”¨è¯¥æ’ä»¶å¯ä»¥ç›´æŽ¥åœ¨ä»£ç ä¸­è¿è¡Œæµ‹è¯•å¹¶å°†æç¤ºé”™è¯¯ã€‚ ES6 Mocha Snippetsï¼šæä¾›ES6è¯­æ³•çš„ Mochaä»£ç ç‰‡æ®µã€‚å……åˆ†åˆ©ç”¨ç®­å¤´å‡½æ•°ï¼Œå°½é‡ä¸ä½¿ç”¨å¤§æ‹¬å·æ¥ä¿æŒä»£ç çš„ç®€æ´ï¼Œå¯é…ç½®å…è®¸ä½¿ç”¨åˆ†å·ã€‚ Jasmine Code Snippetsï¼šJasmineæµ‹è¯•æ¡†æž¶çš„ä»£ç ç‰‡æ®µã€‚ Protractor Snippetsï¼šProtractoræ¡†æž¶çš„ç«¯åˆ°ç«¯(end-to-end)æµ‹è¯•ç‰‡æ®µï¼Œæ”¯æŒJavaScriptå’ŒTypescriptã€‚ Node TDDï¼šä¸ºNodeå’ŒJavaScripté¡¹ç›®æä¾›test-driven developmentæ”¯æŒã€‚åœ¨ä»£ç æ›´æ–°çš„æ—¶å€™å¯ä»¥è‡ªåŠ¨è§¦å‘ä»£ç çš„æµ‹è¯•ã€‚ 9ã€å…¶å®ƒå¾ˆé…·çš„æ’ä»¶ æˆ‘æŠŠå®ƒä»¬åˆ†ç±»åˆ°awesomeç±»åˆ«ï¼Œæ˜¯å› ä¸ºå®ƒä»¬çœŸçš„å¾ˆé…·ã€‚ Quokka.jsï¼šä¸€ä¸ªå¾ˆæ£’çš„è°ƒè¯•å·¥å…·ï¼Œå¯ä»¥ä¸ºæ‚¨æ­£åœ¨ç¼–å†™çš„ä»£ç æä¾›å®žæ—¶åé¦ˆ,èƒ½å¤Ÿé¢„è§ˆå˜é‡çš„å‡½æ•°å’Œè®¡ç®—å€¼ç»“æžœã€‚è¯·æŸ¥çœ‹æ–‡æ¡£ï¼šæ–‡æ¡£ Paste as JSONï¼šå¿«é€Ÿå°†JSONæ•°æ®è½¬æ¢ä¸ºJavaScriptä»£ç ã€‚ Code Metricsï¼šè¿™æ˜¯ä¸€ä¸ªç”¨æ¥è®¡ç®—JavaScriptå’ŒTypeScriptä»£ç å¤æ‚åº¦çš„æ’ä»¶ã€‚ 10ã€æ’ä»¶åŒ… VS Codeçš„æ’ä»¶å¸‚åœºæœ‰ä¸€ä¸ªç±»åž‹å«æ’ä»¶åŒ…ã€‚å®ƒå®žé™…ä¸Šå·²ä¸€ä¸ªç›¸äº’å…³è”çš„æ’ä»¶çš„é›†åˆï¼Œæ–¹ä¾¿ä¸€èµ·å®‰è£…ï¼ŒååŒä½¿ç”¨ã€‚ Nodejs Extension Packï¼šåŒ…å«äº†ESLintã€npmã€JavaScript(ES6)ä»£ç ç‰‡æ®µã€node_modulesæœç´¢ã€NPMæ™ºèƒ½æç¤ºå’Œæ–‡ä»¶è·¯å¾„æ™ºèƒ½æç¤ºã€‚ VS Code for Node.js â€“ Development Pack ï¼šNPMæ™ºèƒ½æç¤ºï¼ŒESLintï¼ŒChromeè°ƒè¯•å™¨ï¼ŒCode Metricsï¼ŒDockerå’Œå¯¼å…¥åŒ…çš„å¼€é”€è®¡ç®—ã€‚ Vue.js Extension Packï¼šåŒ…å«å¤§çº¦12ä¸ªVS Codeæ’ä»¶ï¼Œæœ‰äº›åœ¨æœ¬æ–‡æ²¡æœ‰æåˆ°ï¼Œæ¯”å¦‚auto-rename-tagå’Œauto-close-tagã€‚ Ionic Extesion Packï¼šåŒ…å«è®¸å¤šç”¨äºŽIonicã€Angularã€RxJSã€Cordovaå’ŒHTMLå¼€å‘çš„æ’ä»¶ã€‚ 11ã€VSCode æ‹“å±•æ’ä»¶æŽ¨èâ€”â€”æé«˜ Node å’Œ Vueå¼€å‘æ•ˆçŽ‡ Auto Close Tag è‡ªåŠ¨é—­åˆHTMLæ ‡ç­¾ Auto Rename Tag ä¿®æ”¹HTMLæ ‡ç­¾æ—¶ï¼Œè‡ªåŠ¨ä¿®æ”¹åŒ¹é…çš„æ ‡ç­¾ Bookmarks æ·»åŠ è¡Œä¹¦ç­¾ Can I Use HTML5ã€CSS3ã€SVGçš„æµè§ˆå™¨å…¼å®¹æ€§æ£€æŸ¥ Code Runner è¿è¡Œé€‰ä¸­ä»£ç æ®µï¼ˆæ”¯æŒå¤§é‡è¯­è¨€ï¼ŒåŒ…æ‹¬Nodeï¼‰ CodeBing åœ¨VSCodeä¸­å¼¹å‡ºæµè§ˆå™¨å¹¶æœç´¢ï¼Œå¯ç¼–è¾‘æœç´¢å¼•æ“Ž Color Highlight é¢œè‰²å€¼åœ¨ä»£ç ä¸­é«˜äº®æ˜¾ç¤º Color Picker æ‹¾è‰²å™¨ Document This æ³¨é‡Šæ–‡æ¡£ç”Ÿæˆ EditorConfig for VS Code EditorConfigæ’ä»¶ Emoji åœ¨ä»£ç ä¸­è¾“å…¥emoji ESLint ESLintæ’ä»¶ï¼Œé«˜äº®æç¤º File Peek æ ¹æ®è·¯å¾„å­—ç¬¦ä¸²ï¼Œå¿«é€Ÿå®šä½åˆ°æ–‡ä»¶ Font-awesome codes for html FontAwesomeæç¤ºä»£ç æ®µ ftp-sync åŒæ­¥æ–‡ä»¶åˆ°ftp Git Blame åœ¨çŠ¶æ€æ æ˜¾ç¤ºå½“å‰è¡Œçš„Gitä¿¡æ¯ Git History(git log) æŸ¥çœ‹git log GitLens æ˜¾ç¤ºæ–‡ä»¶æœ€è¿‘çš„commitå’Œä½œè€…ï¼Œæ˜¾ç¤ºå½“å‰è¡Œcommitä¿¡æ¯ Guides é«˜äº®ç¼©è¿›åŸºå‡†çº¿ Gulp Snippets Gulpä»£ç æ®µ HTML CSS Class Completion CSS classæç¤º HTML CSS Support cssæç¤ºï¼ˆæ”¯æŒvueï¼‰ HTMLHint HTMLæ ¼å¼æç¤º Indenticator ç¼©è¿›é«˜äº® JavaScript (ES6) code snippets ES6è¯­æ³•ä»£ç æ®µ language-stylus Stylusè¯­æ³•é«˜äº®å’Œæç¤º Lodash Lodashä»£ç æ®µ markdownlint Markdownæ ¼å¼æç¤º MochaSnippets Mochaä»£ç æ®µ Node modules resolve å¿«é€Ÿå¯¼èˆªåˆ°Nodeæ¨¡å— npm è¿è¡Œnpmå‘½ä»¤ npm Intellisense å¯¼å…¥æ¨¡å—æ—¶ï¼Œæç¤ºå·²å®‰è£…æ¨¡å—åç§° Output Colorizer å½©è‰²è¾“å‡ºä¿¡æ¯ Partial Diff å¯¹æ¯”ä¸¤æ®µä»£ç æˆ–æ–‡ä»¶ Path Autocomplete è·¯å¾„å®Œæˆæç¤º Path Intellisense å¦ä¸€ä¸ªè·¯å¾„å®Œæˆæç¤º Prettify JSON æ ¼å¼åŒ–JSON Project Manager å¿«é€Ÿåˆ‡æ¢é¡¹ç›® REST Client å‘é€RESTé£Žæ ¼çš„HTTPè¯·æ±‚ Settings Sync VSCodeè®¾ç½®åŒæ­¥åˆ°Gist String Manipulation å­—ç¬¦ä¸²è½¬æ¢å¤„ç†ï¼ˆé©¼å³°ã€å¤§å†™å¼€å¤´ã€ä¸‹åˆ’çº¿ç­‰ç­‰ï¼‰ Test Spec Generator æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆï¼ˆæ”¯æŒchaiã€shouldã€jasmineï¼‰ TODO Parser Todoç®¡ç† Version Lens package.jsonæ–‡ä»¶æ˜¾ç¤ºæ¨¡å—å½“å‰ç‰ˆæœ¬å’Œæœ€æ–°ç‰ˆæœ¬ vetur ç›®å‰æ¯”è¾ƒå¥½çš„Vueè¯­æ³•é«˜äº® View Node Package å¿«é€Ÿæ‰“å¼€é€‰ä¸­æ¨¡å—çš„ä¸»é¡µå’Œä»£ç ä»“åº“ vscode-icons æ–‡ä»¶å›¾æ ‡ï¼Œæ–¹ä¾¿å®šä½æ–‡ä»¶ VSCode Great Icons æ–‡ä»¶å›¾æ ‡æ‹“å±• VueHelper Vue2ä»£ç æ®µï¼ˆåŒ…æ‹¬Vue2 apiã€vue-router2ã€vuex2ï¼‰ é™„å½•ï¼šVSCodeé¦–é€‰é¡¹é…ç½® 123456789101112131415161718192021222324252627282930313233&#123; &quot;editor.tabSize&quot;: 2, &quot;files.associations&quot;: &#123; &quot;*.vue&quot;: &quot;vue&quot; &#125;, &quot;eslint.autoFixOnSave&quot;: true, &quot;eslint.options&quot;: &#123; &quot;extensions&quot;: [ &quot;.js&quot;, &quot;.vue&quot; ] &#125;, &quot;eslint.validate&quot;: [ &quot;javascript&quot;, &quot;javascriptreact&quot;, &quot;vue&quot;, &quot;vue-html&quot; ], &quot;search.exclude&quot;: &#123; &quot;**/node_modules&quot;: true, &quot;**/bower_components&quot;: true, &quot;**/dist&quot;: true &#125;, &quot;emmet.syntaxProfiles&quot;: &#123; &quot;javascript&quot;: &quot;jsx&quot;, &quot;vue&quot;: &quot;html&quot;, &quot;vue-html&quot;: &quot;html&quot; &#125;, &quot;extensions.autoUpdate&quot;: true, &quot;editor.renderWhitespace&quot;: &quot;boundary&quot;, &quot;editor.cursorBlinking&quot;: &quot;smooth&quot;, &quot;workbench.welcome.enabled&quot;: true&#125; VS Codeèƒ½å¤Ÿå¦‚æ­¤æµè¡Œçš„ä¸€ä¸ªåŽŸå› å°±æ˜¯æ‹¥æœ‰å¤§é‡çš„é«˜è´¨é‡æ’ä»¶ã€‚å®ƒå‰æ‰€æœªæœ‰çš„æé«˜äº†ç¼–ç çš„æ•ˆçŽ‡ã€‚æ¯”å¦‚ESLintåŠ©ä½ å‡å°‘ä»£ç å¤±è¯¯ï¼ŒDebugger for Chromeè®©ä½ æ›´åŠ æ–¹ä¾¿åŽ»Debuggingã€‚Node.jsçš„æ™ºèƒ½å¼•å…¥æç¤ºè®©ä½ å¯ä»¥è®©ä½ æ­£ç¡®å¼•å…¥æ‰€éœ€æ¨¡å—ï¼ŒLive Serverå’Œ REST Clientå¯ä»¥è®©ä½ çœåŽ»é¢‘ç¹åˆ‡æ¢åˆ°å¤–éƒ¨å·¥å…·çš„éº»çƒ¦ã€‚å¸Œæœ›ä»‹ç»çš„è¿™äº›æ’ä»¶å¯ä»¥å¸®åŠ©ä½ æé«˜å·¥ä½œæ•ˆçŽ‡ã€‚]]></content>
      <categories>
        <category>node.js</category>
      </categories>
      <tags>
        <tag>node.js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[VB3.0]]></title>
    <url>%2F2019%2F04%2F22%2Fcoding-test-02-VB3%2F</url>
    <content type="text"><![CDATA[vb3.0 VBç¬¬ä¸‰ç‰ˆä¿®æ”¹ app.js 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114'use strict'var connection = require('./mysql');var express = require('express');var app = express();var fs = require('fs');var bodyParser = require('body-parser');var cors = require('cors');const path = require('path');var multer = require('multer');var https = require('https');var options = &#123; key:fs.readFileSync('./tbaproject_tk/tbaproject_tk.key'), ca:fs.readFileSync('./tbaproject_tk/AddTrustExternalCARoot.crt'), cert:fs.readFileSync('./tbaproject_tk/tbaproject_tk.crt'),&#125;https.createServer(options,app).listen(443, ()=&gt; &#123;console.log('Server running on https://localhost/');&#125;);app.use(bodyParser.json());app.use(bodyParser.urlencoded(&#123;extended:true&#125;));app.use(cors());app.all('*',function(req,res,next)&#123; res.header("Access-Control-Allow-Credentials", true); res.header("Access-Control-Allow-Origin", "*"); res.header("Access-Control-Allow-Headers", "application/json", "X-Requested-With"); res.header("Access-Control-Allow-Methods", "PUT,POST,GET,DELETE,OPTIONS"); res.header("Content-Type", "application/json;charset=utf-8"); next();&#125;);console.log('1');// onboaringapp.post('/user/onboarding',function(req,res)&#123; var email = req.body.email; console.log(email); var password = '123456'; if(!email)&#123; res.send('Wrong email!'); return; &#125; var json = &#123;&#125;; var sql01 = `select * from user where email = "$&#123;email&#125;"`; connection.query(sql01,function(err,result)&#123; if(err)&#123; throw err; &#125; if(result.length&gt;0)&#123; console.log('User already exists!'); json.message = 'User already exists!'; json.resultCode = 1; &#125;else&#123; console.log('Go to next...'); json.message = 'Go to next...'; json.resultCode = 0; var sql02 = `insert into user(email,password) values("$&#123;email&#125;","$&#123;password&#125;")`; connection.query(sql02,function(err,result)&#123; if(err)&#123; throw err; &#125; &#125;); &#125; res.send(JSON.stringify(json)); &#125;);&#125;);console.log('100');// upload imagevar storage01 = multer.diskStorage(&#123; destination: './images/', filename: function(req, file, cb) &#123; return cb(null, "" + file.originalname); &#125; &#125;);app.post("/user/image", multer(&#123; storage: storage01 &#125;).single('image'), function(req, res) &#123; console.log('Sign saved!'); var email = req.body.email; console.log(email); var path01 = path.join(__dirname,req.file.path); // var sql01 = `update user set image="$&#123;path01&#125;" where email="$&#123;email&#125;"`; var sql01 = `insert into images(image) values("$&#123;path01&#125;") `; connection.query(sql01,function(err,result)&#123; if(err)&#123; throw err; &#125; &#125;); return res.status(200).end('success'); &#125; );// upload audiovar storage02 = multer.diskStorage(&#123; destination: './audios/', filename: function(req, file, cb) &#123; return cb(null, "" + file.originalname); &#125; &#125;); app.post("/user/audio", multer(&#123; storage: storage02 &#125;).single('audio'), function(req, res) &#123; console.log('Audio saved!'); var email = req.body.email; var path01 = path.join(__dirname,req.file.path); // var sql01 = `update user set audio="$&#123;path01&#125;" where email="$&#123;email&#125;"`; var sql01 = `insert into audios(audio) values("$&#123;path01&#125;") `; connection.query(sql01,function(err,result)&#123; if(err)&#123; throw err; &#125; &#125;); return res.status(200).end('success'); &#125; );// app1.js 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229'use strict'var connection = require('./mysql');var express = require('express');var app = express();var fs = require('fs');var bodyParser = require('body-parser');var cors = require('cors');const path = require('path');var multer = require('multer');var https = require('https');var nodemailer = require('nodemailer');var request = require('request');var options = &#123; key:fs.readFileSync('/etc/apache2/ssl/tbaproject.com.key'), ca:fs.readFileSync('/etc/apache2/ssl/myCA.pem'), cert:fs.readFileSync('/etc/apache2/ssl/tbaproject.com.crt'),&#125;https.createServer(options,app).listen(443, ()=&gt; &#123;console.log('Server running on https://localhost/');&#125;);app.use(bodyParser.json());app.use(bodyParser.urlencoded(&#123;extended:true&#125;));app.use(cors());app.all('*',function(req,res,next)&#123; res.header("Access-Control-Allow-Credentials", true); res.header("Access-Control-Allow-Origin", "*"); res.header("Access-Control-Allow-Headers", "application/json", "X-Requested-With"); res.header("Access-Control-Allow-Methods", "PUT,POST,GET,DELETE,OPTIONS"); res.header("Content-Type", "application/json;charset=utf-8"); next();&#125;);// onboaringapp.post('/user/onboarding',function(req,res)&#123; var email = req.body.email; console.log(email); var password = '123456'; if(!email)&#123; res.send('No email!'); return; &#125; var json = &#123;&#125;; var sql01 = `select email from user where email = "$&#123;email&#125;"`; connection.query(sql01,function(err,result)&#123; if(err)&#123; throw err; &#125; if(result.length&gt;0)&#123; console.log('User already exists!'); json.message = 'User already exists!'; json.resultCode = 1; &#125;else&#123; console.log('Go to next...'); json.message = 'Go to next...'; json.resultCode = 0; var sql02 = `insert into user(email,password) values("$&#123;email&#125;","$&#123;password&#125;")`; connection.query(sql02,function(err,result)&#123; if(err)&#123; throw err; &#125; &#125;); &#125; res.send(JSON.stringify(json)); &#125;);&#125;);// upload imagevar storage01 = multer.diskStorage(&#123; destination: './images/', filename: function(req, file, cb) &#123; return cb(null, "" + file.originalname); &#125; &#125;);app.post("/user/image", multer(&#123; storage: storage01 &#125;).single('image'), function(req, res) &#123; console.log('Sign saved!'); var email = req.body.email; console.log(email); var path01 = path.join(__dirname,req.file.path); // var sql01 = `update user set image="$&#123;path01&#125;" where email="$&#123;email&#125;"`; var sql01 = `insert into images(image) values("$&#123;path01&#125;") `; // send path01 to python server------------------------------------------ var req = &#123; "request":&#123; "header":&#123;&#125;, "body":&#123; "imagePath":`"$&#123;path01&#125;"` &#125; &#125; &#125;; request(&#123; url:'', body:JSON.stringify(req), method:'POST', json:true, headers:&#123;"content-type":"application/json"&#125;, // body:JSON.stringify(requestData) &#125;,function(error,response,body)&#123; // if(!error&amp;response.statusCode == 200)&#123; // console.log(body); // &#125; &#125;); // ---------------------------------------------------------------------- connection.query(sql01,function(err,result)&#123; if(err)&#123; throw err; &#125; &#125;); return res.status(200).end('success'); &#125; );// upload audiovar storage02 = multer.diskStorage(&#123; destination: './audios/', filename: function(req, file, cb) &#123; return cb(null, "" + file.originalname); &#125; &#125;); app.post("/user/audio", multer(&#123; storage: storage02 &#125;).single('audio'), function(req, res) &#123; console.log('Audio saved!'); var email = req.body.email; var path01 = path.join(__dirname,req.file.path); // var sql01 = `update user set audio="$&#123;path01&#125;" where email="$&#123;email&#125;"`; var sql01 = `insert into audios(audio) values("$&#123;path01&#125;") `; // send path01 to python server------------------------------------------ var req = &#123; "request":&#123; "header":&#123;&#125;, "body":&#123; "audioPath":`"$&#123;path01&#125;"` &#125; &#125; &#125;; request(&#123; url:'', body:JSON.stringify(req), method:'POST', json:true, headers:&#123;"content-type":"application/json"&#125;, // body:JSON.stringify(requestData) &#125;,function(error,response,body)&#123; // if(!error&amp;response.statusCode == 200)&#123; // console.log(body); // &#125; &#125;); // ---------------------------------------------------------------------- connection.query(sql01,function(err,result)&#123; if(err)&#123; throw err; &#125; &#125;); return res.status(200).end('success'); &#125; );// loginapp.post('/user/login',function(req,res)&#123; var email = req.body.email; var password = req.body.password; console.log(email); console.log(password); if(!email)&#123; res.send('No email!'); return; &#125; if(!password)&#123; res.send('No password!'); return; &#125; var json = &#123;&#125;; var sql01 = `select email, password from user where email = "$&#123;email&#125;" and password = "$&#123;password&#125;"`; connection.query(sql01,function(err,result)&#123; if(err)&#123; throw err; &#125; if(result.length&gt;0)&#123; console.log('login'); json.message = 'login'; json.resultCode = 1; &#125;else&#123; console.log('Wrong email or password! Login failed.'); json.message = 'Wrong email or password! Login failed.'; json.resultCode = 0; &#125; res.send(JSON.stringify(json)); &#125;);&#125;);//submitapp.post('/user/submit',function(req,res)&#123; var email = req.body.email; console.log(email); if(!email)&#123; res.send('No email!'); return; &#125;// send activation email if(email)&#123; var transporter = nodemailer.createTransport(&#123; debug: true, host: 'localhost', port: 25, tls:&#123;rejectUnauthorized: false&#125;, &#125;); var options = &#123; from: 'ace@tbaproject.com', to: email, subject: 'Welcome to TBA!', text: 'Hello TBA', // html: '&lt;h2&gt;Text&lt;/h2&gt;&lt;a href="virtual_bank.html"&gt;Tbaprojec&lt;/a&gt;&lt;p&gt;text&lt;/p&gt;', html: fs.createReadStream(path.resolve(__dirname, 'virtual_bank.html')) // æµ &#125;; // send email transporter.sendMail(options, function(error, info)&#123; if(error)&#123; res.send("email sent fail\n" + error); console.log(error); &#125;else&#123; res.send("email sent\n" + info.response); console.log('è¨Šæ¯ç™¼é€: ' + info.respons); &#125; &#125;); &#125;&#125;); email.js 12345678910111213141516171819202122232425var nodemailer = require('nodemailer');var transporter = nodemailer.createTransport(&#123; debug: true, host: 'localhost', port: 25, tls:&#123;rejectUnauthorized: false&#125;,&#125;);var options = &#123; from: 'ace@tbaproject.com', to: 'test@tbaproject.com', subject: 'Welcome to TBA!', text: 'Hello TBA', html: '&lt;h2&gt;TextTextTextTextText&lt;/h2&gt;&lt;a href="https://ithelp.ithome.com.tw/articles/10160766" title="Node.js ç³»åˆ—å­¸ç¿’æ—¥èªŒ"&gt;Node.js ç³»åˆ—å­¸ç¿’æ—¥èªŒ&lt;/a&gt; texttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttexttext&lt;/p&gt;',&#125;;transporter.sendMail(options, function(error, info)&#123; if(error)&#123; console.log(error); &#125;else&#123; console.log('è¨Šæ¯ç™¼é€: ' + info.response); &#125;&#125;); mysql.js 123456789var mysql = require('mysql');const connection = mysql.createConnection(&#123; host:'localhost', user:'root', password:'xxxxxxxx', database:'virtual_bank'&#125;);connection.connect();module.exports = connection; virtual_bank.html 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476477478479480481482483484485486487488489490491492493494495496497498499500501502503504505506507508509510511512513514515516517518519520521522523524525526527528529530531532533534535536537538539540541542543544545546547548549550551552553554555556557558559560561562563564565566567568569570571572573574575576577578579580581582583584585586587588589590591592593594595596597598599600601602603604605606607608609610611612613614615616617618619620621622623624625626627628629630631632633634635636637638639640641642643644645646647648649650651652653654655656657658659660661662663664665666667668669670671672673674675676677678679680681682683684685686687688689690691692693694695696697698699700701702703704705706707708709710711712713714715716717718719720721722723724725726727728729730731732733734735736737738739740741742743744745746747748749750751752753754755756757758759760761762763764765766767768769770771772773774775776777778779780781782783784785786787788789790791792793794795796797798799800801802803804805806807808809810811812813814815816817818819820821822823824825826827828829830831832833834835836837838839840841842843844845846847848849850851852853854855856857858859860861862863864865866867868869870871872873874875876877878879880881882883884885886887888889890891892893894895896897898899900901902903904905906907908909910911912913914915916917918919920921922923924925926927928929930931932933934935936937938939940941942943944945946947948949950951952953954955956957958959960961962963964965966967968969970971972973974975976977978979980981982983984985986987988989990991&lt;!doctype html&gt;&lt;html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office"&gt; &lt;head&gt; &lt;!-- NAME: SELL PRODUCTS --&gt; &lt;!--[if gte mso 15]&gt; &lt;xml&gt; &lt;o:OfficeDocumentSettings&gt; &lt;o:AllowPNG/&gt; &lt;o:PixelsPerInch&gt;96&lt;/o:PixelsPerInch&gt; &lt;/o:OfficeDocumentSettings&gt; &lt;/xml&gt; &lt;![endif]--&gt; &lt;meta charset="UTF-8"&gt; &lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&gt; &lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt; &lt;title&gt;*|MC:SUBJECT|*&lt;/title&gt; &lt;style type="text/css"&gt; p&#123; margin:10px 0; padding:0; &#125; table&#123; border-collapse:collapse; &#125; h1,h2,h3,h4,h5,h6&#123; display:block; margin:0; padding:0; &#125; img,a img&#123; border:0; height:auto; outline:none; text-decoration:none; &#125; body,#bodyTable,#bodyCell&#123; height:100%; margin:0; padding:0; width:100%; &#125; .mcnPreviewText&#123; display:none !important; &#125; #outlook a&#123; padding:0; &#125; img&#123; -ms-interpolation-mode:bicubic; &#125; table&#123; mso-table-lspace:0pt; mso-table-rspace:0pt; &#125; .ReadMsgBody&#123; width:100%; &#125; .ExternalClass&#123; width:100%; &#125; p,a,li,td,blockquote&#123; mso-line-height-rule:exactly; &#125; a[href^=tel],a[href^=sms]&#123; color:inherit; cursor:default; text-decoration:none; &#125; p,a,li,td,body,table,blockquote&#123; -ms-text-size-adjust:100%; -webkit-text-size-adjust:100%; &#125; .ExternalClass,.ExternalClass p,.ExternalClass td,.ExternalClass div,.ExternalClass span,.ExternalClass font&#123; line-height:100%; &#125; a[x-apple-data-detectors]&#123; color:inherit !important; text-decoration:none !important; font-size:inherit !important; font-family:inherit !important; font-weight:inherit !important; line-height:inherit !important; &#125; .templateContainer&#123; max-width:600px !important; &#125; a.mcnButton&#123; display:block; &#125; .mcnImage,.mcnRetinaImage&#123; vertical-align:bottom; &#125; .mcnTextContent&#123; word-break:break-word; &#125; .mcnTextContent img&#123; height:auto !important; &#125; .mcnDividerBlock&#123; table-layout:fixed !important; &#125; /* @tab Page @section Heading 1 @style heading 1 */ h1&#123; /*@editable*/color:#222222; /*@editable*/font-family:Helvetica; /*@editable*/font-size:40px; /*@editable*/font-style:normal; /*@editable*/font-weight:bold; /*@editable*/line-height:150%; /*@editable*/letter-spacing:normal; /*@editable*/text-align:center; &#125; /* @tab Page @section Heading 2 @style heading 2 */ h2&#123; /*@editable*/color:#222222; /*@editable*/font-family:Helvetica; /*@editable*/font-size:34px; /*@editable*/font-style:normal; /*@editable*/font-weight:bold; /*@editable*/line-height:150%; /*@editable*/letter-spacing:normal; /*@editable*/text-align:left; &#125; /* @tab Page @section Heading 3 @style heading 3 */ h3&#123; /*@editable*/color:#444444; /*@editable*/font-family:Helvetica; /*@editable*/font-size:22px; /*@editable*/font-style:normal; /*@editable*/font-weight:bold; /*@editable*/line-height:150%; /*@editable*/letter-spacing:normal; /*@editable*/text-align:left; &#125; /* @tab Page @section Heading 4 @style heading 4 */ h4&#123; /*@editable*/color:#949494; /*@editable*/font-family:Georgia; /*@editable*/font-size:20px; /*@editable*/font-style:italic; /*@editable*/font-weight:normal; /*@editable*/line-height:125%; /*@editable*/letter-spacing:normal; /*@editable*/text-align:left; &#125; /* @tab Header @section Header Container Style */ #templateHeader&#123; /*@editable*/background-color:#F7F7F7; /*@editable*/background-image:none; /*@editable*/background-repeat:no-repeat; /*@editable*/background-position:center; /*@editable*/background-size:cover; /*@editable*/border-top:0; /*@editable*/border-bottom:0; /*@editable*/padding-top:45px; /*@editable*/padding-bottom:45px; &#125; /* @tab Header @section Header Interior Style */ .headerContainer&#123; /*@editable*/background-color:transparent; /*@editable*/background-image:none; /*@editable*/background-repeat:no-repeat; /*@editable*/background-position:center; /*@editable*/background-size:cover; /*@editable*/border-top:0; /*@editable*/border-bottom:0; /*@editable*/padding-top:0; /*@editable*/padding-bottom:0; &#125; /* @tab Header @section Header Text */ .headerContainer .mcnTextContent,.headerContainer .mcnTextContent p&#123; /*@editable*/color:#757575; /*@editable*/font-family:Helvetica; /*@editable*/font-size:16px; /*@editable*/line-height:150%; /*@editable*/text-align:left; &#125; /* @tab Header @section Header Link */ .headerContainer .mcnTextContent a,.headerContainer .mcnTextContent p a&#123; /*@editable*/color:#007C89; /*@editable*/font-weight:normal; /*@editable*/text-decoration:underline; &#125; /* @tab Body @section Body Container Style */ #templateBody&#123; /*@editable*/background-color:#FFFFFF; /*@editable*/background-image:none; /*@editable*/background-repeat:no-repeat; /*@editable*/background-position:center; /*@editable*/background-size:cover; /*@editable*/border-top:0; /*@editable*/border-bottom:0; /*@editable*/padding-top:36px; /*@editable*/padding-bottom:45px; &#125; /* @tab Body @section Body Interior Style */ .bodyContainer&#123; /*@editable*/background-color:transparent; /*@editable*/background-image:none; /*@editable*/background-repeat:no-repeat; /*@editable*/background-position:center; /*@editable*/background-size:cover; /*@editable*/border-top:0; /*@editable*/border-bottom:0; /*@editable*/padding-top:0; /*@editable*/padding-bottom:0; &#125; /* @tab Body @section Body Text */ .bodyContainer .mcnTextContent,.bodyContainer .mcnTextContent p&#123; /*@editable*/color:#757575; /*@editable*/font-family:Helvetica; /*@editable*/font-size:16px; /*@editable*/line-height:150%; /*@editable*/text-align:left; &#125; /* @tab Body @section Body Link */ .bodyContainer .mcnTextContent a,.bodyContainer .mcnTextContent p a&#123; /*@editable*/color:#007C89; /*@editable*/font-weight:normal; /*@editable*/text-decoration:underline; &#125; /* @tab Footer @section Footer Style */ #templateFooter&#123; /*@editable*/background-color:#333333; /*@editable*/background-image:none; /*@editable*/background-repeat:no-repeat; /*@editable*/background-position:center; /*@editable*/background-size:cover; /*@editable*/border-top:0; /*@editable*/border-bottom:0; /*@editable*/padding-top:45px; /*@editable*/padding-bottom:63px; &#125; /* @tab Footer @section Footer Interior Style */ .footerContainer&#123; /*@editable*/background-color:transparent; /*@editable*/background-image:none; /*@editable*/background-repeat:no-repeat; /*@editable*/background-position:center; /*@editable*/background-size:cover; /*@editable*/border-top:0; /*@editable*/border-bottom:0; /*@editable*/padding-top:0; /*@editable*/padding-bottom:0; &#125; /* @tab Footer @section Footer Text */ .footerContainer .mcnTextContent,.footerContainer .mcnTextContent p&#123; /*@editable*/color:#FFFFFF; /*@editable*/font-family:Helvetica; /*@editable*/font-size:12px; /*@editable*/line-height:150%; /*@editable*/text-align:center; &#125; /* @tab Footer @section Footer Link */ .footerContainer .mcnTextContent a,.footerContainer .mcnTextContent p a&#123; /*@editable*/color:#FFFFFF; /*@editable*/font-weight:normal; /*@editable*/text-decoration:underline; &#125; @media only screen and (min-width:768px)&#123; .templateContainer&#123; width:600px !important; &#125;&#125; @media only screen and (max-width: 480px)&#123; body,table,td,p,a,li,blockquote&#123; -webkit-text-size-adjust:none !important; &#125;&#125; @media only screen and (max-width: 480px)&#123; body&#123; width:100% !important; min-width:100% !important; &#125;&#125; @media only screen and (max-width: 480px)&#123; .mcnRetinaImage&#123; max-width:100% !important; &#125;&#125; @media only screen and (max-width: 480px)&#123; .mcnImage&#123; width:100% !important; &#125;&#125; @media only screen and (max-width: 480px)&#123; .mcnCartContainer,.mcnCaptionTopContent,.mcnRecContentContainer,.mcnCaptionBottomContent,.mcnTextContentContainer,.mcnBoxedTextContentContainer,.mcnImageGroupContentContainer,.mcnCaptionLeftTextContentContainer,.mcnCaptionRightTextContentContainer,.mcnCaptionLeftImageContentContainer,.mcnCaptionRightImageContentContainer,.mcnImageCardLeftTextContentContainer,.mcnImageCardRightTextContentContainer,.mcnImageCardLeftImageContentContainer,.mcnImageCardRightImageContentContainer&#123; max-width:100% !important; width:100% !important; &#125;&#125; @media only screen and (max-width: 480px)&#123; .mcnBoxedTextContentContainer&#123; min-width:100% !important; &#125;&#125; @media only screen and (max-width: 480px)&#123; .mcnImageGroupContent&#123; padding:9px !important; &#125;&#125; @media only screen and (max-width: 480px)&#123; .mcnCaptionLeftContentOuter .mcnTextContent,.mcnCaptionRightContentOuter .mcnTextContent&#123; padding-top:9px !important; &#125;&#125; @media only screen and (max-width: 480px)&#123; .mcnImageCardTopImageContent,.mcnCaptionBottomContent:last-child .mcnCaptionBottomImageContent,.mcnCaptionBlockInner .mcnCaptionTopContent:last-child .mcnTextContent&#123; padding-top:18px !important; &#125;&#125; @media only screen and (max-width: 480px)&#123; .mcnImageCardBottomImageContent&#123; padding-bottom:9px !important; &#125;&#125; @media only screen and (max-width: 480px)&#123; .mcnImageGroupBlockInner&#123; padding-top:0 !important; padding-bottom:0 !important; &#125;&#125; @media only screen and (max-width: 480px)&#123; .mcnImageGroupBlockOuter&#123; padding-top:9px !important; padding-bottom:9px !important; &#125;&#125; @media only screen and (max-width: 480px)&#123; .mcnTextContent,.mcnBoxedTextContentColumn&#123; padding-right:18px !important; padding-left:18px !important; &#125;&#125; @media only screen and (max-width: 480px)&#123; .mcnImageCardLeftImageContent,.mcnImageCardRightImageContent&#123; padding-right:18px !important; padding-bottom:0 !important; padding-left:18px !important; &#125;&#125; @media only screen and (max-width: 480px)&#123; .mcpreview-image-uploader&#123; display:none !important; width:100% !important; &#125;&#125; @media only screen and (max-width: 480px)&#123; /* @tab Mobile Styles @section Heading 1 @tip Make the first-level headings larger in size for better readability on small screens. */ h1&#123; /*@editable*/font-size:30px !important; /*@editable*/line-height:125% !important; &#125;&#125; @media only screen and (max-width: 480px)&#123; /* @tab Mobile Styles @section Heading 2 @tip Make the second-level headings larger in size for better readability on small screens. */ h2&#123; /*@editable*/font-size:26px !important; /*@editable*/line-height:125% !important; &#125;&#125; @media only screen and (max-width: 480px)&#123; /* @tab Mobile Styles @section Heading 3 @tip Make the third-level headings larger in size for better readability on small screens. */ h3&#123; /*@editable*/font-size:20px !important; /*@editable*/line-height:150% !important; &#125;&#125; @media only screen and (max-width: 480px)&#123; /* @tab Mobile Styles @section Heading 4 @tip Make the fourth-level headings larger in size for better readability on small screens. */ h4&#123; /*@editable*/font-size:18px !important; /*@editable*/line-height:150% !important; &#125;&#125; @media only screen and (max-width: 480px)&#123; /* @tab Mobile Styles @section Boxed Text @tip Make the boxed text larger in size for better readability on small screens. We recommend a font size of at least 16px. */ .mcnBoxedTextContentContainer .mcnTextContent,.mcnBoxedTextContentContainer .mcnTextContent p&#123; /*@editable*/font-size:14px !important; /*@editable*/line-height:150% !important; &#125;&#125; @media only screen and (max-width: 480px)&#123; /* @tab Mobile Styles @section Header Text @tip Make the header text larger in size for better readability on small screens. */ .headerContainer .mcnTextContent,.headerContainer .mcnTextContent p&#123; /*@editable*/font-size:16px !important; /*@editable*/line-height:150% !important; &#125;&#125; @media only screen and (max-width: 480px)&#123; /* @tab Mobile Styles @section Body Text @tip Make the body text larger in size for better readability on small screens. We recommend a font size of at least 16px. */ .bodyContainer .mcnTextContent,.bodyContainer .mcnTextContent p&#123; /*@editable*/font-size:16px !important; /*@editable*/line-height:150% !important; &#125;&#125; @media only screen and (max-width: 480px)&#123; /* @tab Mobile Styles @section Footer Text @tip Make the footer content text larger in size for better readability on small screens. */ .footerContainer .mcnTextContent,.footerContainer .mcnTextContent p&#123; /*@editable*/font-size:14px !important; /*@editable*/line-height:150% !important; &#125;&#125;&lt;/style&gt;&lt;/head&gt; &lt;body&gt; &lt;!--*|IF:MC_PREVIEW_TEXT|*--&gt; &lt;!--[if !gte mso 9]&gt;&lt;!----&gt;&lt;span class="mcnPreviewText" style="display:none; font-size:0px; line-height:0px; max-height:0px; max-width:0px; opacity:0; overflow:hidden; visibility:hidden; mso-hide:all;"&gt;*|MC_PREVIEW_TEXT|*&lt;/span&gt;&lt;!--&lt;![endif]--&gt; &lt;!--*|END:IF|*--&gt; &lt;center&gt; &lt;table align="center" border="0" cellpadding="0" cellspacing="0" height="100%" width="100%" id="bodyTable"&gt; &lt;tr&gt; &lt;td align="center" valign="top" id="bodyCell"&gt; &lt;!-- BEGIN TEMPLATE // --&gt; &lt;table border="0" cellpadding="0" cellspacing="0" width="100%"&gt; &lt;tr&gt; &lt;td align="center" valign="top" id="templateHeader" data-template-container&gt; &lt;!--[if (gte mso 9)|(IE)]&gt; &lt;table align="center" border="0" cellspacing="0" cellpadding="0" width="600" style="width:600px;"&gt; &lt;tr&gt; &lt;td align="center" valign="top" width="600" style="width:600px;"&gt; &lt;![endif]--&gt; &lt;table align="center" border="0" cellpadding="0" cellspacing="0" width="100%" class="templateContainer"&gt; &lt;tr&gt; &lt;td valign="top" class="headerContainer"&gt;&lt;table border="0" cellpadding="0" cellspacing="0" width="100%" class="mcnImageBlock" style="min-width:100%;"&gt; &lt;tbody class="mcnImageBlockOuter"&gt; &lt;tr&gt; &lt;td valign="top" style="padding:9px" class="mcnImageBlockInner"&gt; &lt;table align="left" width="100%" border="0" cellpadding="0" cellspacing="0" class="mcnImageContentContainer" style="min-width:100%;"&gt; &lt;tbody&gt;&lt;tr&gt; &lt;td class="mcnImageContent" valign="top" style="padding-right: 9px; padding-left: 9px; padding-top: 0; padding-bottom: 0; text-align:center;"&gt; &lt;img align="center" alt="" src="html_image/01.jpg" width="564" style="max-width:1439px; padding-bottom: 0; display: inline !important; vertical-align: bottom;" class="mcnImage"&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt;&lt;table border="0" cellpadding="0" cellspacing="0" width="100%" class="mcnTextBlock" style="min-width:100%;"&gt; &lt;tbody class="mcnTextBlockOuter"&gt; &lt;tr&gt; &lt;td valign="top" class="mcnTextBlockInner" style="padding-top:9px;"&gt; &lt;!--[if mso]&gt; &lt;table align="left" border="0" cellspacing="0" cellpadding="0" width="100%" style="width:100%;"&gt; &lt;tr&gt; &lt;![endif]--&gt; &lt;!--[if mso]&gt; &lt;td valign="top" width="600" style="width:600px;"&gt; &lt;![endif]--&gt; &lt;table align="left" border="0" cellpadding="0" cellspacing="0" style="max-width:100%; min-width:100%;" width="100%" class="mcnTextContentContainer"&gt; &lt;tbody&gt;&lt;tr&gt; &lt;td valign="top" class="mcnTextContent" style="padding-top:0; padding-right:18px; padding-bottom:9px; padding-left:18px;"&gt; &lt;h1&gt;Virtual Bank in Hong Kong&lt;/h1&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt; &lt;!--[if mso]&gt; &lt;/td&gt; &lt;![endif]--&gt; &lt;!--[if mso]&gt; &lt;/tr&gt; &lt;/table&gt; &lt;![endif]--&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt;&lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;!--[if (gte mso 9)|(IE)]&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;![endif]--&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td align="center" valign="top" id="templateBody" data-template-container&gt; &lt;!--[if (gte mso 9)|(IE)]&gt; &lt;table align="center" border="0" cellspacing="0" cellpadding="0" width="600" style="width:600px;"&gt; &lt;tr&gt; &lt;td align="center" valign="top" width="600" style="width:600px;"&gt; &lt;![endif]--&gt; &lt;table align="center" border="0" cellpadding="0" cellspacing="0" width="100%" class="templateContainer"&gt; &lt;tr&gt; &lt;td valign="top" class="bodyContainer"&gt;&lt;table border="0" cellpadding="0" cellspacing="0" width="100%" class="mcnImageBlock" style="min-width:100%;"&gt; &lt;tbody class="mcnImageBlockOuter"&gt; &lt;tr&gt; &lt;td valign="top" style="padding:9px" class="mcnImageBlockInner"&gt; &lt;table align="left" width="100%" border="0" cellpadding="0" cellspacing="0" class="mcnImageContentContainer" style="min-width:100%;"&gt; &lt;tbody&gt;&lt;tr&gt; &lt;td class="mcnImageContent" valign="top" style="padding-right: 9px; padding-left: 9px; padding-top: 0; padding-bottom: 0; text-align:center;"&gt; &lt;img align="center" alt="" src="html_image/02.jpg" width="564" style="max-width:814px; padding-bottom: 0; display: inline !important; vertical-align: bottom;" class="mcnImage"&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt;&lt;table border="0" cellpadding="0" cellspacing="0" width="100%" class="mcnTextBlock" style="min-width:100%;"&gt; &lt;tbody class="mcnTextBlockOuter"&gt; &lt;tr&gt; &lt;td valign="top" class="mcnTextBlockInner" style="padding-top:9px;"&gt; &lt;!--[if mso]&gt; &lt;table align="left" border="0" cellspacing="0" cellpadding="0" width="100%" style="width:100%;"&gt; &lt;tr&gt; &lt;![endif]--&gt; &lt;!--[if mso]&gt; &lt;td valign="top" width="600" style="width:600px;"&gt; &lt;![endif]--&gt; &lt;table align="left" border="0" cellpadding="0" cellspacing="0" style="max-width:100%; min-width:100%;" width="100%" class="mcnTextContentContainer"&gt; &lt;tbody&gt;&lt;tr&gt; &lt;td valign="top" class="mcnTextContent" style="padding-top:0; padding-right:18px; padding-bottom:9px; padding-left:18px;"&gt; &lt;h3&gt;Welcome to the Virtual Bank, confirm you're human&lt;/h3&gt;&lt;p&gt;Since you've made it this far, we want to assume you're a real, live human. But we need to be super sure you aren't a robot.&lt;/p&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt; &lt;!--[if mso]&gt; &lt;/td&gt; &lt;![endif]--&gt; &lt;!--[if mso]&gt; &lt;/tr&gt; &lt;/table&gt; &lt;![endif]--&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt;&lt;table border="0" cellpadding="0" cellspacing="0" width="100%" class="mcnButtonBlock" style="min-width:100%;"&gt; &lt;tbody class="mcnButtonBlockOuter"&gt; &lt;tr&gt; &lt;td style="padding-top:0; padding-right:18px; padding-bottom:18px; padding-left:18px;" valign="top" align="center" class="mcnButtonBlockInner"&gt; &lt;table border="0" cellpadding="0" cellspacing="0" class="mcnButtonContentContainer" style="border-collapse: separate !important;border-radius: 3px;background-color: #009FC7;"&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td align="center" valign="middle" class="mcnButtonContent" style="font-family: Helvetica; font-size: 18px; padding: 18px;"&gt; &lt;a class="mcnButton " title="I'm Not a Robot" href="" target="_blank" style="font-weight: bold;letter-spacing: -0.5px;line-height: 100%;text-align: center;text-decoration: none;color: #FFFFFF;"&gt;I'm Not a Robot&lt;/a&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt;&lt;table border="0" cellpadding="0" cellspacing="0" width="100%" class="mcnDividerBlock" style="min-width:100%;"&gt; &lt;tbody class="mcnDividerBlockOuter"&gt; &lt;tr&gt; &lt;td class="mcnDividerBlockInner" style="min-width:100%; padding:18px;"&gt; &lt;table class="mcnDividerContent" border="0" cellpadding="0" cellspacing="0" width="100%" style="min-width:100%;"&gt; &lt;tbody&gt;&lt;tr&gt; &lt;td&gt; &lt;span&gt;&lt;/span&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt;&lt;!-- &lt;td class="mcnDividerBlockInner" style="padding: 18px;"&gt; &lt;hr class="mcnDividerContent" style="border-bottom-color:none; border-left-color:none; border-right-color:none; border-bottom-width:0; border-left-width:0; border-right-width:0; margin-top:0; margin-right:0; margin-bottom:0; margin-left:0;" /&gt;--&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt;&lt;table border="0" cellpadding="0" cellspacing="0" width="100%" class="mcnCaptionBlock"&gt; &lt;tbody class="mcnCaptionBlockOuter"&gt; &lt;tr&gt; &lt;td class="mcnCaptionBlockInner" valign="top" style="padding:9px;"&gt; &lt;table align="left" border="0" cellpadding="0" cellspacing="0" class="mcnCaptionBottomContent" width="282"&gt; &lt;tbody&gt;&lt;tr&gt; &lt;td class="mcnCaptionBottomImageContent" align="center" valign="top" style="padding:0 9px 9px 9px;"&gt; &lt;img alt="" src="html_image/03.jpg" width="264" style="max-width:1200px;" class="mcnImage"&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td class="mcnTextContent" valign="top" style="padding:0 9px 0 9px;" width="282"&gt; &lt;h4&gt;We are innovating&lt;/h4&gt;&lt;p&gt;Virtual bank combines the latest technology in artificial intelligence, predictive analytics and natural language to be a virtual financial assistant to clients.&lt;/p&gt;&lt;p&gt;&lt;a href="#"&gt;View our website&amp;nbsp;Â»&lt;/a&gt;&lt;/p&gt; &lt;/td&gt; &lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;table align="right" border="0" cellpadding="0" cellspacing="0" class="mcnCaptionBottomContent" width="282"&gt; &lt;tbody&gt;&lt;tr&gt; &lt;td class="mcnCaptionBottomImageContent" align="center" valign="top" style="padding:0 9px 9px 9px;"&gt; &lt;img alt="" src="html_image/04.png" width="264" style="max-width:675px;" class="mcnImage"&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td class="mcnTextContent" valign="top" style="padding:0 9px 0 9px;" width="282"&gt; &lt;h4&gt;Growing with clients&lt;/h4&gt;&lt;p&gt;Everything we do is based on what we hear from our clients: how they want to interact with us and how we can make their&amp;nbsp;financial lives better.&lt;/p&gt;&lt;p&gt;&lt;a href="#"&gt;See our service Â»&lt;/a&gt;&lt;/p&gt; &lt;/td&gt; &lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt;&lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;!--[if (gte mso 9)|(IE)]&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;![endif]--&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td align="center" valign="top" id="templateFooter" data-template-container&gt; &lt;!--[if (gte mso 9)|(IE)]&gt; &lt;table align="center" border="0" cellspacing="0" cellpadding="0" width="600" style="width:600px;"&gt; &lt;tr&gt; &lt;td align="center" valign="top" width="600" style="width:600px;"&gt; &lt;![endif]--&gt; &lt;table align="center" border="0" cellpadding="0" cellspacing="0" width="100%" class="templateContainer"&gt; &lt;tr&gt; &lt;td valign="top" class="footerContainer"&gt;&lt;table border="0" cellpadding="0" cellspacing="0" width="100%" class="mcnFollowBlock" style="min-width:100%;"&gt; &lt;tbody class="mcnFollowBlockOuter"&gt; &lt;tr&gt; &lt;td align="center" valign="top" style="padding:9px" class="mcnFollowBlockInner"&gt; &lt;table border="0" cellpadding="0" cellspacing="0" width="100%" class="mcnFollowContentContainer" style="min-width:100%;"&gt; &lt;tbody&gt;&lt;tr&gt; &lt;td align="center" style="padding-left:9px;padding-right:9px;"&gt; &lt;table border="0" cellpadding="0" cellspacing="0" width="100%" style="min-width:100%;" class="mcnFollowContent"&gt; &lt;tbody&gt;&lt;tr&gt; &lt;td align="center" valign="top" style="padding-top:9px; padding-right:9px; padding-left:9px;"&gt; &lt;table align="center" border="0" cellpadding="0" cellspacing="0"&gt; &lt;tbody&gt;&lt;tr&gt; &lt;td align="center" valign="top"&gt; &lt;!--[if mso]&gt; &lt;table align="center" border="0" cellspacing="0" cellpadding="0"&gt; &lt;tr&gt; &lt;![endif]--&gt; &lt;!--[if mso]&gt; &lt;td align="center" valign="top"&gt; &lt;![endif]--&gt; &lt;table align="left" border="0" cellpadding="0" cellspacing="0" style="display:inline;"&gt; &lt;tbody&gt;&lt;tr&gt; &lt;td valign="top" style="padding-right:10px; padding-bottom:9px;" class="mcnFollowContentItemContainer"&gt; &lt;table border="0" cellpadding="0" cellspacing="0" width="100%" class="mcnFollowContentItem"&gt; &lt;tbody&gt;&lt;tr&gt; &lt;td align="left" valign="middle" style="padding-top:5px; padding-right:10px; padding-bottom:5px; padding-left:9px;"&gt; &lt;table align="left" border="0" cellpadding="0" cellspacing="0" width=""&gt; &lt;tbody&gt;&lt;tr&gt; &lt;td align="center" valign="middle" width="24" class="mcnFollowIconContent"&gt; &lt;a href="http://www.facebook.com" target="_blank"&gt;&lt;img src="html_image/05.png" style="display:block;" height="24" width="24" class=""&gt;&lt;/a&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt; &lt;!--[if mso]&gt; &lt;/td&gt; &lt;![endif]--&gt; &lt;!--[if mso]&gt; &lt;td align="center" valign="top"&gt; &lt;![endif]--&gt; &lt;table align="left" border="0" cellpadding="0" cellspacing="0" style="display:inline;"&gt; &lt;tbody&gt;&lt;tr&gt; &lt;td valign="top" style="padding-right:10px; padding-bottom:9px;" class="mcnFollowContentItemContainer"&gt; &lt;table border="0" cellpadding="0" cellspacing="0" width="100%" class="mcnFollowContentItem"&gt; &lt;tbody&gt;&lt;tr&gt; &lt;td align="left" valign="middle" style="padding-top:5px; padding-right:10px; padding-bottom:5px; padding-left:9px;"&gt; &lt;table align="left" border="0" cellpadding="0" cellspacing="0" width=""&gt; &lt;tbody&gt;&lt;tr&gt; &lt;td align="center" valign="middle" width="24" class="mcnFollowIconContent"&gt; &lt;a href="http://www.twitter.com/" target="_blank"&gt;&lt;img src="html_image/06.png" style="display:block;" height="24" width="24" class=""&gt;&lt;/a&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt; &lt;!--[if mso]&gt; &lt;/td&gt; &lt;![endif]--&gt; &lt;!--[if mso]&gt; &lt;td align="center" valign="top"&gt; &lt;![endif]--&gt; &lt;table align="left" border="0" cellpadding="0" cellspacing="0" style="display:inline;"&gt; &lt;tbody&gt;&lt;tr&gt; &lt;td valign="top" style="padding-right:10px; padding-bottom:9px;" class="mcnFollowContentItemContainer"&gt; &lt;table border="0" cellpadding="0" cellspacing="0" width="100%" class="mcnFollowContentItem"&gt; &lt;tbody&gt;&lt;tr&gt; &lt;td align="left" valign="middle" style="padding-top:5px; padding-right:10px; padding-bottom:5px; padding-left:9px;"&gt; &lt;table align="left" border="0" cellpadding="0" cellspacing="0" width=""&gt; &lt;tbody&gt;&lt;tr&gt; &lt;td align="center" valign="middle" width="24" class="mcnFollowIconContent"&gt; &lt;a href="http://www.instagram.com/" target="_blank"&gt;&lt;img src="html_image/07.png" style="display:block;" height="24" width="24" class=""&gt;&lt;/a&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt; &lt;!--[if mso]&gt; &lt;/td&gt; &lt;![endif]--&gt; &lt;!--[if mso]&gt; &lt;td align="center" valign="top"&gt; &lt;![endif]--&gt; &lt;table align="left" border="0" cellpadding="0" cellspacing="0" style="display:inline;"&gt; &lt;tbody&gt;&lt;tr&gt; &lt;td valign="top" style="padding-right:0; padding-bottom:9px;" class="mcnFollowContentItemContainer"&gt; &lt;table border="0" cellpadding="0" cellspacing="0" width="100%" class="mcnFollowContentItem"&gt; &lt;tbody&gt;&lt;tr&gt; &lt;td align="left" valign="middle" style="padding-top:5px; padding-right:10px; padding-bottom:5px; padding-left:9px;"&gt; &lt;table align="left" border="0" cellpadding="0" cellspacing="0" width=""&gt; &lt;tbody&gt;&lt;tr&gt; &lt;td align="center" valign="middle" width="24" class="mcnFollowIconContent"&gt; &lt;a href="http://mailchimp.com" target="_blank"&gt;&lt;img src="html_image/08.png" style="display:block;" height="24" width="24" class=""&gt;&lt;/a&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt; &lt;!--[if mso]&gt; &lt;/td&gt; &lt;![endif]--&gt; &lt;!--[if mso]&gt; &lt;/tr&gt; &lt;/table&gt; &lt;![endif]--&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt; &lt;/td&gt; &lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt;&lt;table border="0" cellpadding="0" cellspacing="0" width="100%" class="mcnDividerBlock" style="min-width:100%;"&gt; &lt;tbody class="mcnDividerBlockOuter"&gt; &lt;tr&gt; &lt;td class="mcnDividerBlockInner" style="min-width:100%; padding:18px;"&gt; &lt;table class="mcnDividerContent" border="0" cellpadding="0" cellspacing="0" width="100%" style="min-width: 100%;border-top: 2px solid #505050;"&gt; &lt;tbody&gt;&lt;tr&gt; &lt;td&gt; &lt;span&gt;&lt;/span&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt;&lt;!-- &lt;td class="mcnDividerBlockInner" style="padding: 18px;"&gt; &lt;hr class="mcnDividerContent" style="border-bottom-color:none; border-left-color:none; border-right-color:none; border-bottom-width:0; border-left-width:0; border-right-width:0; margin-top:0; margin-right:0; margin-bottom:0; margin-left:0;" /&gt;--&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt;&lt;table border="0" cellpadding="0" cellspacing="0" width="100%" class="mcnTextBlock" style="min-width:100%;"&gt; &lt;tbody class="mcnTextBlockOuter"&gt; &lt;tr&gt; &lt;td valign="top" class="mcnTextBlockInner" style="padding-top:9px;"&gt; &lt;!--[if mso]&gt; &lt;table align="left" border="0" cellspacing="0" cellpadding="0" width="100%" style="width:100%;"&gt; &lt;tr&gt; &lt;![endif]--&gt; &lt;!--[if mso]&gt; &lt;td valign="top" width="600" style="width:600px;"&gt; &lt;![endif]--&gt; &lt;table align="left" border="0" cellpadding="0" cellspacing="0" style="max-width:100%; min-width:100%;" width="100%" class="mcnTextContentContainer"&gt; &lt;tbody&gt;&lt;tr&gt; &lt;td valign="top" class="mcnTextContent" style="padding-top:0; padding-right:18px; padding-bottom:9px; padding-left:18px;"&gt; &lt;em&gt;Copyright Â© *|CURRENT_YEAR|* *|LIST:COMPANY|*, All rights reserved.&lt;/em&gt;&lt;br&gt;*|IFNOT:ARCHIVE_PAGE|* *|LIST:DESCRIPTION|* &lt;br&gt; &lt;br&gt; &lt;strong&gt;Our mailing address is:&lt;/strong&gt; &lt;br&gt; *|HTML:LIST_ADDRESS_HTML|* *|END:IF|* &lt;br&gt; &lt;br&gt; Want to change how you receive these emails?&lt;br&gt; You can &lt;a href="*|UPDATE_PROFILE|*"&gt;update your preferences&lt;/a&gt; or &lt;a href="*|UNSUB|*"&gt;unsubscribe from this list&lt;/a&gt;. &lt;br&gt; &lt;br&gt; *|IF:REWARDS|* *|HTML:REWARDS|**|END:IF|* &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt; &lt;!--[if mso]&gt; &lt;/td&gt; &lt;![endif]--&gt; &lt;!--[if mso]&gt; &lt;/tr&gt; &lt;/table&gt; &lt;![endif]--&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt;&lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;!--[if (gte mso 9)|(IE)]&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;![endif]--&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;!-- // END TEMPLATE --&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;/center&gt; &lt;/body&gt;&lt;/html&gt; html_image(folder)]]></content>
      <categories>
        <category>coding_testing</category>
      </categories>
      <tags>
        <tag>node.js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[server_connect]]></title>
    <url>%2F2019%2F04%2F22%2Fcoding-test-01server-connect%2F</url>
    <content type="text"><![CDATA[Nodejs server &amp;&amp; Python server nodejs serverå’Œpython serverä¹‹é—´ç”¨RESTful APIé€šä¿¡ï¼ŒæŠŠå‰ç«¯ä¸Šä¼ å›¾ç‰‡çš„æ–‡ä»¶è·¯å¾„ä¼ ç»™python server. Client.js (node.js server) 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111var multer = require('multer');// var fs = require('fs');var path = require('path');var express = require('express');var app = express();// var request = require('request');app.get('/', function (req, res) &#123; res.send('Hello World');&#125;)var server = app.listen(8081, function () &#123; var host = server.address().address var port = server.address().port console.log("åº”ç”¨å®žä¾‹ï¼Œè®¿é—®åœ°å€ä¸º http://%s:%s", host, port)&#125;)// upload imagevar storage01 = multer.diskStorage(&#123; destination: './images/', filename: function(req, file, cb) &#123; return cb(null, "" + file.originalname); &#125; &#125;);app.post("/user/image", multer(&#123; storage: storage01 &#125;).single('image'), function(req, res) &#123; console.log('Sign saved!'); var email = req.body.email; console.log(email); var path01 = path.join(__dirname,req.file.path); // console.log(path01);// var request = require('request'); var http = require('http'); var qs = require('querystring'); var opt = &#123; host:'127.0.0.1', port:'8888', method:'POST', path:'/', headers:&#123; 'content-type': "application/json" //'accept-encoding': 'gzip' &#125; &#125;; var body = ''; var req = http.request(opt, function(res) &#123; console.log("Got response: " + res.statusCode); res.on('data',function(d)&#123; body += d; &#125;); res.on('end', function()&#123; console.log(res.headers); console.log(body) &#125;); &#125;); req.on('error', function(e) &#123; console.log("Got error: " + e.message); &#125;); // var data = &#123;num:"1",num1:"123",type:"add"&#125;; var data = &#123;'path01':`'$&#123;path01&#125;'`&#125;; req.write(qs.stringify(data)); req.end();// return res.status(200).end('success');&#125;);// var request = require('request');// var http = require('http');// var qs = require('querystring');// var opt = &#123;// host:'127.0.0.1',// port:'8888',// method:'POST',// path:'/',// headers:&#123;// 'content-type': "application/json"// //'accept-encoding': 'gzip'// &#125;// &#125;;// var body = '';// var req = http.request(opt, function(res) &#123; // console.log("Got response: " + res.statusCode);// res.on('data',function(d)&#123;// body += d;// &#125;);// res.on('end', function()&#123;// console.log(res.headers);// console.log(body)// &#125;);// &#125;);// req.on('error', function(e) &#123;// console.log("Got error: " + e.message);// &#125;); // // var data = &#123;num:"1",num1:"123",type:"add"&#125;;// var data = &#123;'path01':'path01'&#125;; // req.write(qs.stringify(data));// req.end(); Server.js (python server) 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107// var http = require("http"); // var url = require("url"); // var query = require("querystring"); // var server = function(request,response)&#123;// response.writeHead(200,&#123;"Content-Type":"text/json"&#125;);// var postdata = "";// request.addListener("data",function(postchunk)&#123;// postdata += postchunk; // &#125;)// request.addListener("end",function()&#123;// var params = query.parse(postdata);// console.log(params['path01'])// console.log(params['path01'])// // console.log(params['result']);// response.write(JSON.stringify(params));// response.end();// &#125;)// &#125;// http.createServer(server).listen(8888);// console.log("Server start!"); //---------------------//express.js æ–‡ä»¶var express = require('express');var app = express();var server = app.listen(8888, function () &#123; var host = server.address().address var port = server.address().port console.log("åº”ç”¨å®žä¾‹ï¼Œè®¿é—®åœ°å€ä¸º http://%s:%s", host, port)&#125;)app.post('/uploadFile',function(req,res)&#123; response.writeHead(200,&#123;"Content-Type":"text/json"&#125;); var postdata = ""; request.addListener("data",function(postchunk)&#123; postdata += postchunk; &#125;) request.addListener("end",function()&#123; var params = query.parse(postdata); console.log(params['path01']) console.log(params['path01']) // console.log(params['result']); response.write(JSON.stringify(params)); response.end(); &#125;)&#125;)//---------------------// var http = require("http"); //æä¾›webæœåŠ¡// var url = require("url"); //è§£æžGETè¯·æ±‚ // var query = require("querystring"); //è§£æžPOSTè¯·æ±‚ // //æœåŠ¡// var server = function(request,response)&#123;// //å®šä¹‰æŠ¥æ–‡å¤´// response.writeHead(200,&#123;"Content-Type":"text/json"&#125;);// //åˆ¤æ–­æ˜¯GET/POSTè¯·æ±‚// if(request.method == "GET")&#123;// var params = [];// params = url.parse(request.url,true).query;// params['result'] = compute(params);// response.write(JSON.stringify(params));// response.end();// &#125;else&#123;// var postdata = "";// request.addListener("data",function(postchunk)&#123;// postdata += postchunk; // &#125;) // //POSTç»“æŸè¾“å‡ºç»“æžœ// request.addListener("end",function()&#123;// var params = query.parse(postdata);// console.log(params['path01'])// console.log(params['path01'])// params['result'] = compute(params);// // console.log(params['result']);// response.write(JSON.stringify(params));// response.end();// &#125;)// &#125;// &#125; // //è®¡ç®—// var compute = function(params)&#123;// switch(params['type'])&#123;// case "add": return parseFloat(params['num']) + parseFloat(params['num1']);break;// case "sub": return parseFloat(params['num']) - parseFloat(params['num1']);break;// case "mul": return parseFloat(params['num']) * parseFloat(params['num1']);break;// case "div": return parseFloat(params['num']) / parseFloat(params['num1']);break;// &#125;// &#125;; // http.createServer(server).listen(8888);// console.log("Server start!");]]></content>
      <categories>
        <category>coding_testing</category>
      </categories>
      <tags>
        <tag>node.js</tag>
      </tags>
  </entry>
</search>
